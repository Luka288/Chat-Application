var QN=Object.create;var Of=Object.defineProperty,YN=Object.defineProperties,ZN=Object.getOwnPropertyDescriptor,JN=Object.getOwnPropertyDescriptors,XN=Object.getOwnPropertyNames,kE=Object.getOwnPropertySymbols,LE=Object.getPrototypeOf,FE=Object.prototype.hasOwnProperty,eM=Object.prototype.propertyIsEnumerable,tM=Reflect.get;var OE=(t,e,n)=>e in t?Of(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,F=(t,e)=>{for(var n in e||={})FE.call(e,n)&&OE(t,n,e[n]);if(kE)for(var n of kE(e))eM.call(e,n)&&OE(t,n,e[n]);return t},ve=(t,e)=>YN(t,JN(e));var f4=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var nM=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of XN(e))!FE.call(t,i)&&i!==n&&Of(t,i,{get:()=>e[i],enumerable:!(r=ZN(e,i))||r.enumerable});return t};var p4=(t,e,n)=>(n=t!=null?QN(LE(t)):{},nM(e||!t||!t.__esModule?Of(n,"default",{value:t,enumerable:!0}):n,t));var yr=(t,e,n)=>tM(LE(t),n,e);var E=(t,e,n)=>new Promise((r,i)=>{var o=u=>{try{a(n.next(u))}catch(l){i(l)}},s=u=>{try{a(n.throw(u))}catch(l){i(l)}},a=u=>u.done?r(u.value):Promise.resolve(u.value).then(o,s);a((n=n.apply(t,e)).next())});function jf(t,e){return Object.is(t,e)}var Be=null,ou=!1,Uf=1,Qt=Symbol("SIGNAL");function te(t){let e=Be;return Be=t,e}function Bf(){return Be}var Gs={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Ks(t){if(ou)throw new Error("");if(Be===null)return;Be.consumerOnSignalRead(t);let e=Be.nextProducerIndex++;if(uu(Be),e<Be.producerNode.length&&Be.producerNode[e]!==t&&Ws(Be)){let n=Be.producerNode[e];cu(n,Be.producerIndexOfThis[e])}Be.producerNode[e]!==t&&(Be.producerNode[e]=t,Be.producerIndexOfThis[e]=Ws(Be)?jE(t,Be,e):0),Be.producerLastReadVersion[e]=t.version}function VE(){Uf++}function $f(t){if(!(Ws(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===Uf)){if(!t.producerMustRecompute(t)&&!Wf(t)){Vf(t);return}t.producerRecomputeValue(t),Vf(t)}}function Hf(t){if(t.liveConsumerNode===void 0)return;let e=ou;ou=!0;try{for(let n of t.liveConsumerNode)n.dirty||rM(n)}finally{ou=e}}function zf(){return Be?.consumerAllowSignalWrites!==!1}function rM(t){t.dirty=!0,Hf(t),t.consumerMarkedDirty?.(t)}function Vf(t){t.dirty=!1,t.lastCleanEpoch=Uf}function au(t){return t&&(t.nextProducerIndex=0),te(t)}function qf(t,e){if(te(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(Ws(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)cu(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function Wf(t){uu(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||($f(n),r!==n.version))return!0}return!1}function Gf(t){if(uu(t),Ws(t))for(let e=0;e<t.producerNode.length;e++)cu(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function jE(t,e,n){if(UE(t),t.liveConsumerNode.length===0&&BE(t))for(let r=0;r<t.producerNode.length;r++)t.producerIndexOfThis[r]=jE(t.producerNode[r],t,r);return t.liveConsumerIndexOfThis.push(n),t.liveConsumerNode.push(e)-1}function cu(t,e){if(UE(t),t.liveConsumerNode.length===1&&BE(t))for(let r=0;r<t.producerNode.length;r++)cu(t.producerNode[r],t.producerIndexOfThis[r]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];uu(i),i.producerIndexOfThis[r]=e}}function Ws(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function uu(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function UE(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function BE(t){return t.producerNode!==void 0}function Kf(t,e){let n=Object.create(iM);n.computation=t,e!==void 0&&(n.equal=e);let r=()=>{if($f(n),Ks(n),n.value===su)throw n.error;return n.value};return r[Qt]=n,r}var Lf=Symbol("UNSET"),Ff=Symbol("COMPUTING"),su=Symbol("ERRORED"),iM=ve(F({},Gs),{value:Lf,dirty:!0,error:null,equal:jf,kind:"computed",producerMustRecompute(t){return t.value===Lf||t.value===Ff},producerRecomputeValue(t){if(t.value===Ff)throw new Error("Detected cycle in computations.");let e=t.value;t.value=Ff;let n=au(t),r,i=!1;try{r=t.computation(),te(null),i=e!==Lf&&e!==su&&r!==su&&t.equal(e,r)}catch(o){r=su,t.error=o}finally{qf(t,n)}if(i){t.value=e;return}t.value=r,t.version++}});function oM(){throw new Error}var $E=oM;function HE(t){$E(t)}function Qf(t){$E=t}var sM=null;function Yf(t,e){let n=Object.create(lu);n.value=t,e!==void 0&&(n.equal=e);let r=()=>(Ks(n),n.value);return r[Qt]=n,r}function Qs(t,e){zf()||HE(t),t.equal(t.value,e)||(t.value=e,aM(t))}function Zf(t,e){zf()||HE(t),Qs(t,e(t.value))}var lu=ve(F({},Gs),{equal:jf,value:void 0,kind:"signal"});function aM(t){t.version++,VE(),Hf(t),sM?.()}function Jf(t){let e=te(null);try{return t()}finally{te(e)}}var Xf;function Ys(){return Xf}function jn(t){let e=Xf;return Xf=t,e}var du=Symbol("NotFound");function Y(t){return typeof t=="function"}function Xi(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var hu=Xi(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function ti(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var Ne=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(Y(r))try{r()}catch(o){e=o instanceof hu?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{zE(o)}catch(s){e=e??[],s instanceof hu?e=[...e,...s.errors]:e.push(s)}}if(e)throw new hu(e)}}add(e){var n;if(e&&e!==this)if(this.closed)zE(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&ti(n,e)}remove(e){let{_finalizers:n}=this;n&&ti(n,e),e instanceof t&&e._removeParent(this)}};Ne.EMPTY=(()=>{let t=new Ne;return t.closed=!0,t})();var ep=Ne.EMPTY;function fu(t){return t instanceof Ne||t&&"closed"in t&&Y(t.remove)&&Y(t.add)&&Y(t.unsubscribe)}function zE(t){Y(t)?t():t.unsubscribe()}var Yt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var eo={setTimeout(t,e,...n){let{delegate:r}=eo;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=eo;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function pu(t){eo.setTimeout(()=>{let{onUnhandledError:e}=Yt;if(e)e(t);else throw t})}function Zs(){}var qE=tp("C",void 0,void 0);function WE(t){return tp("E",void 0,t)}function GE(t){return tp("N",t,void 0)}function tp(t,e,n){return{kind:t,value:e,error:n}}var ni=null;function to(t){if(Yt.useDeprecatedSynchronousErrorHandling){let e=!ni;if(e&&(ni={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=ni;if(ni=null,n)throw r}}else t()}function KE(t){Yt.useDeprecatedSynchronousErrorHandling&&ni&&(ni.errorThrown=!0,ni.error=t)}var ri=class extends Ne{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,fu(e)&&e.add(this)):this.destination=fM}static create(e,n,r){return new no(e,n,r)}next(e){this.isStopped?rp(GE(e),this):this._next(e)}error(e){this.isStopped?rp(WE(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?rp(qE,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},dM=Function.prototype.bind;function np(t,e){return dM.call(t,e)}var ip=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){gu(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){gu(r)}else gu(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){gu(n)}}},no=class extends ri{constructor(e,n,r){super();let i;if(Y(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&Yt.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&np(e.next,o),error:e.error&&np(e.error,o),complete:e.complete&&np(e.complete,o)}):i=e}this.destination=new ip(i)}};function gu(t){Yt.useDeprecatedSynchronousErrorHandling?KE(t):pu(t)}function hM(t){throw t}function rp(t,e){let{onStoppedNotification:n}=Yt;n&&eo.setTimeout(()=>n(t,e))}var fM={closed:!0,next:Zs,error:hM,complete:Zs};var ro=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Nt(t){return t}function mu(...t){return op(t)}function op(t){return t.length===0?Nt:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var ie=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let o=gM(n)?n:new no(n,r,i);return to(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=QE(r),new r((i,o)=>{let s=new no({next:a=>{try{n(a)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[ro](){return this}pipe(...n){return op(n)(this)}toPromise(n){return n=QE(n),new n((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return t.create=e=>new t(e),t})();function QE(t){var e;return(e=t??Yt.Promise)!==null&&e!==void 0?e:Promise}function pM(t){return t&&Y(t.next)&&Y(t.error)&&Y(t.complete)}function gM(t){return t&&t instanceof ri||pM(t)&&fu(t)}function sp(t){return Y(t?.lift)}function ue(t){return e=>{if(sp(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function oe(t,e,n,r,i){return new ap(t,e,n,r,i)}var ap=class extends ri{constructor(e,n,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function io(){return ue((t,e)=>{let n=null;t._refCount++;let r=oe(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,o=n;n=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var oo=class extends ie{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,sp(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Ne;let n=this.getSubject();e.add(this.source.subscribe(oe(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Ne.EMPTY)}return e}refCount(){return io()(this)}};var YE=Xi(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Ye=(()=>{class t extends ie{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new yu(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new YE}next(n){to(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){to(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){to(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:o}=this;return r||i?ep:(this.currentObservers=null,o.push(n),new Ne(()=>{this.currentObservers=null,ti(o,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){let n=new ie;return n.source=this,n}}return t.create=(e,n)=>new yu(e,n),t})(),yu=class extends Ye{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:ep}};var Ze=class extends Ye{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var cp={now(){return(cp.delegate||Date).now()},delegate:void 0};var vu=class extends Ne{constructor(e,n){super()}schedule(e,n=0){return this}};var Js={setInterval(t,e,...n){let{delegate:r}=Js;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=Js;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var so=class extends vu{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,n),this}requestAsyncId(e,n,r=0){return Js.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&Js.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,ti(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var ao=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};ao.now=cp.now;var co=class extends ao{constructor(e,n=ao.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var Xs=new co(so);var _u=class extends so{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}};var Iu=class extends co{};var up=new Iu(_u);var _t=new ie(t=>t.complete());function ZE(t){return t&&Y(t.schedule)}function JE(t){return t[t.length-1]}function Eu(t){return Y(JE(t))?t.pop():void 0}function vr(t){return ZE(JE(t))?t.pop():void 0}function wu(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function ew(t,e,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(h){try{l(r.next(h))}catch(p){s(p)}}function u(h){try{l(r.throw(h))}catch(p){s(p)}}function l(h){h.done?o(h.value):i(h.value).then(a,u)}l((r=r.apply(t,e||[])).next())})}function XE(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ii(t){return this instanceof ii?(this.v=t,this):new ii(t)}function tw(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(y){return function(w){return Promise.resolve(w).then(y,p)}}function a(y,w){r[y]&&(i[y]=function(R){return new Promise(function(N,O){o.push([y,R,N,O])>1||u(y,R)})},w&&(i[y]=w(i[y])))}function u(y,w){try{l(r[y](w))}catch(R){m(o[0][3],R)}}function l(y){y.value instanceof ii?Promise.resolve(y.value.v).then(h,p):m(o[0][2],y)}function h(y){u("next",y)}function p(y){u("throw",y)}function m(y,w){y(w),o.shift(),o.length&&u(o[0][0],o[0][1])}}function nw(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof XE=="function"?XE(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=t[o]&&function(s){return new Promise(function(a,u){s=t[o](s),i(a,u,s.done,s.value)})}}function i(o,s,a,u){Promise.resolve(u).then(function(l){o({value:l,done:a})},s)}}var Tu=t=>t&&typeof t.length=="number"&&typeof t!="function";function Du(t){return Y(t?.then)}function bu(t){return Y(t[ro])}function Cu(t){return Symbol.asyncIterator&&Y(t?.[Symbol.asyncIterator])}function Su(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function mM(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Au=mM();function Ru(t){return Y(t?.[Au])}function Nu(t){return tw(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield ii(n.read());if(i)return yield ii(void 0);yield yield ii(r)}}finally{n.releaseLock()}})}function Mu(t){return Y(t?.getReader)}function Oe(t){if(t instanceof ie)return t;if(t!=null){if(bu(t))return yM(t);if(Tu(t))return vM(t);if(Du(t))return _M(t);if(Cu(t))return rw(t);if(Ru(t))return IM(t);if(Mu(t))return EM(t)}throw Su(t)}function yM(t){return new ie(e=>{let n=t[ro]();if(Y(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function vM(t){return new ie(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function _M(t){return new ie(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,pu)})}function IM(t){return new ie(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function rw(t){return new ie(e=>{wM(t,e).catch(n=>e.error(n))})}function EM(t){return rw(Nu(t))}function wM(t,e){var n,r,i,o;return ew(this,void 0,void 0,function*(){try{for(n=nw(t);r=yield n.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}e.complete()})}function It(t,e,n,r=0,i=!1){let o=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(o),!i)return o}function _r(t,e=0){return ue((n,r)=>{n.subscribe(oe(r,i=>It(r,t,()=>r.next(i),e),()=>It(r,t,()=>r.complete(),e),i=>It(r,t,()=>r.error(i),e)))})}function Ir(t,e=0){return ue((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function iw(t,e){return Oe(t).pipe(Ir(e),_r(e))}function ow(t,e){return Oe(t).pipe(Ir(e),_r(e))}function sw(t,e){return new ie(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function aw(t,e){return new ie(n=>{let r;return It(n,e,()=>{r=t[Au](),It(n,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){n.error(s);return}o?n.complete():n.next(i)},0,!0)}),()=>Y(r?.return)&&r.return()})}function Pu(t,e){if(!t)throw new Error("Iterable cannot be null");return new ie(n=>{It(n,e,()=>{let r=t[Symbol.asyncIterator]();It(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function cw(t,e){return Pu(Nu(t),e)}function uw(t,e){if(t!=null){if(bu(t))return iw(t,e);if(Tu(t))return sw(t,e);if(Du(t))return ow(t,e);if(Cu(t))return Pu(t,e);if(Ru(t))return aw(t,e);if(Mu(t))return cw(t,e)}throw Su(t)}function Se(t,e){return e?uw(t,e):Oe(t)}function q(...t){let e=vr(t);return Se(t,e)}function uo(t,e){let n=Y(t)?t:()=>t,r=i=>i.error(n());return new ie(e?i=>e.schedule(r,0,i):r)}function lp(t){return!!t&&(t instanceof ie||Y(t.lift)&&Y(t.subscribe))}var Un=Xi(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function se(t,e){return ue((n,r)=>{let i=0;n.subscribe(oe(r,o=>{r.next(t.call(e,o,i++))}))})}var{isArray:TM}=Array;function DM(t,e){return TM(e)?t(...e):t(e)}function xu(t){return se(e=>DM(t,e))}var{isArray:bM}=Array,{getPrototypeOf:CM,prototype:SM,keys:AM}=Object;function ku(t){if(t.length===1){let e=t[0];if(bM(e))return{args:e,keys:null};if(RM(e)){let n=AM(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function RM(t){return t&&typeof t=="object"&&CM(t)===SM}function Ou(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function ea(...t){let e=vr(t),n=Eu(t),{args:r,keys:i}=ku(t);if(r.length===0)return Se([],e);let o=new ie(NM(r,e,i?s=>Ou(i,s):Nt));return n?o.pipe(xu(n)):o}function NM(t,e,n=Nt){return r=>{lw(e,()=>{let{length:i}=t,o=new Array(i),s=i,a=i;for(let u=0;u<i;u++)lw(e,()=>{let l=Se(t[u],e),h=!1;l.subscribe(oe(r,p=>{o[u]=p,h||(h=!0,a--),a||r.next(n(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function lw(t,e,n){t?It(n,t,e):e()}function dw(t,e,n,r,i,o,s,a){let u=[],l=0,h=0,p=!1,m=()=>{p&&!u.length&&!l&&e.complete()},y=R=>l<r?w(R):u.push(R),w=R=>{o&&e.next(R),l++;let N=!1;Oe(n(R,h++)).subscribe(oe(e,O=>{i?.(O),o?y(O):e.next(O)},()=>{N=!0},void 0,()=>{if(N)try{for(l--;u.length&&l<r;){let O=u.shift();s?It(e,s,()=>w(O)):w(O)}m()}catch(O){e.error(O)}}))};return t.subscribe(oe(e,y,()=>{p=!0,m()})),()=>{a?.()}}function xe(t,e,n=1/0){return Y(e)?xe((r,i)=>se((o,s)=>e(r,o,i,s))(Oe(t(r,i))),n):(typeof e=="number"&&(n=e),ue((r,i)=>dw(r,i,t,n)))}function lo(t=1/0){return xe(Nt,t)}function hw(){return lo(1)}function ho(...t){return hw()(Se(t,vr(t)))}function Lu(t){return new ie(e=>{Oe(t()).subscribe(e)})}function MM(...t){let e=Eu(t),{args:n,keys:r}=ku(t),i=new ie(o=>{let{length:s}=n;if(!s){o.complete();return}let a=new Array(s),u=s,l=s;for(let h=0;h<s;h++){let p=!1;Oe(n[h]).subscribe(oe(o,m=>{p||(p=!0,l--),a[h]=m},()=>u--,void 0,()=>{(!u||!p)&&(l||o.next(r?Ou(r,a):a),o.complete())}))}});return e?i.pipe(xu(e)):i}function Et(t,e){return ue((n,r)=>{let i=0;n.subscribe(oe(r,o=>t.call(e,o,i++)&&r.next(o)))})}function Bn(t){return ue((e,n)=>{let r=null,i=!1,o;r=e.subscribe(oe(n,void 0,void 0,s=>{o=Oe(t(s,Bn(t)(e))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function fw(t,e,n,r,i){return(o,s)=>{let a=n,u=e,l=0;o.subscribe(oe(s,h=>{let p=l++;u=a?t(u,h,p):(a=!0,h),r&&s.next(u)},i&&(()=>{a&&s.next(u),s.complete()})))}}function Er(t,e){return Y(e)?xe(t,e,1):xe(t,1)}function PM(t,e=Xs){return ue((n,r)=>{let i=null,o=null,s=null,a=()=>{if(i){i.unsubscribe(),i=null;let l=o;o=null,r.next(l)}};function u(){let l=s+t,h=e.now();if(h<l){i=this.schedule(void 0,l-h),r.add(i);return}a()}n.subscribe(oe(r,l=>{o=l,s=e.now(),i||(i=e.schedule(u,t),r.add(i))},()=>{a(),r.complete()},void 0,()=>{o=i=null}))})}function wr(t){return ue((e,n)=>{let r=!1;e.subscribe(oe(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function $n(t){return t<=0?()=>_t:ue((e,n)=>{let r=0;e.subscribe(oe(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function Fu(t=xM){return ue((e,n)=>{let r=!1;e.subscribe(oe(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function xM(){return new Un}function ta(t){return ue((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function Hn(t,e){let n=arguments.length>=2;return r=>r.pipe(t?Et((i,o)=>t(i,o,r)):Nt,$n(1),n?wr(e):Fu(()=>new Un))}function fo(t){return t<=0?()=>_t:ue((e,n)=>{let r=[];e.subscribe(oe(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function dp(t,e){let n=arguments.length>=2;return r=>r.pipe(t?Et((i,o)=>t(i,o,r)):Nt,fo(1),n?wr(e):Fu(()=>new Un))}function Vu(t,e){return ue(fw(t,e,arguments.length>=2,!0))}function ju(...t){let e=vr(t);return ue((n,r)=>{(e?ho(t,n,e):ho(t,n)).subscribe(r)})}function Mt(t,e){return ue((n,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();n.subscribe(oe(r,u=>{i?.unsubscribe();let l=0,h=o++;Oe(t(u,h)).subscribe(i=oe(r,p=>r.next(e?e(u,p,h,l++):p),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function hp(t){return ue((e,n)=>{Oe(t).subscribe(oe(n,()=>n.complete(),Zs)),!n.closed&&e.subscribe(n)})}function Je(t,e,n){let r=Y(t)||e||n?{next:t,error:e,complete:n}:t;return r?ue((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(oe(o,u=>{var l;(l=r.next)===null||l===void 0||l.call(r,u),o.next(u)},()=>{var u;a=!1,(u=r.complete)===null||u===void 0||u.call(r),o.complete()},u=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,u),o.error(u)},()=>{var u,l;a&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):Nt}var eT="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",j=class extends Error{code;constructor(e,n){super(tT(e,n)),this.code=e}};function kM(t){return`NG0${Math.abs(t)}`}function tT(t,e){return`${kM(t)}${e?": "+e:""}`}var nT=Symbol("InputSignalNode#UNSET"),OM=ve(F({},lu),{transformFn:void 0,applyValueToInputSignal(t,e){Qs(t,e)}});function rT(t,e){let n=Object.create(OM);n.value=t,n.transformFn=e?.transform;function r(){if(Ks(n),n.value===nT){let i=null;throw new j(-950,i)}return n.value}return r[Qt]=n,r}function ya(t){return{toString:t}.toString()}var Uu="__parameters__";function LM(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function FM(t,e,n){return ya(()=>{let r=LM(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(u,l,h){let p=u.hasOwnProperty(Uu)?u[Uu]:Object.defineProperty(u,Uu,{value:[]})[Uu];for(;p.length<=h;)p.push(null);return(p[h]=p[h]||[]).push(s),u}}return i.prototype.ngMetadataName=t,i.annotationCls=i,i})}var ra=globalThis;function Te(t){for(let e in t)if(t[e]===Te)return e;throw Error("Could not find renamed property on target object.")}function VM(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function Dt(t){if(typeof t=="string")return t;if(Array.isArray(t))return`[${t.map(Dt).join(", ")}]`;if(t==null)return""+t;let e=t.overriddenName||t.name;if(e)return`${e}`;let n=t.toString();if(n==null)return""+n;let r=n.indexOf(`
`);return r>=0?n.slice(0,r):n}function pw(t,e){return t?e?`${t} ${e}`:t:e||""}var jM=Te({__forward_ref__:Te});function iT(t){return t.__forward_ref__=iT,t.toString=function(){return Dt(this())},t}function pt(t){return oT(t)?t():t}function oT(t){return typeof t=="function"&&t.hasOwnProperty(jM)&&t.__forward_ref__===iT}function B(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function No(t){return{providers:t.providers||[],imports:t.imports||[]}}function _l(t){return gw(t,aT)||gw(t,cT)}function sT(t){return _l(t)!==null}function gw(t,e){return t.hasOwnProperty(e)?t[e]:null}function UM(t){let e=t&&(t[aT]||t[cT]);return e||null}function mw(t){return t&&(t.hasOwnProperty(yw)||t.hasOwnProperty(BM))?t[yw]:null}var aT=Te({\u0275prov:Te}),yw=Te({\u0275inj:Te}),cT=Te({ngInjectableDef:Te}),BM=Te({ngInjectorDef:Te}),U=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,n){this._desc=e,this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=B({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function uT(t){return t&&!!t.\u0275providers}var $M=Te({\u0275cmp:Te}),HM=Te({\u0275dir:Te}),zM=Te({\u0275pipe:Te}),qM=Te({\u0275mod:Te}),Gu=Te({\u0275fac:Te}),sa=Te({__NG_ELEMENT_ID__:Te}),vw=Te({__NG_ENV_ID__:Te});function yg(t){return typeof t=="string"?t:t==null?"":String(t)}function WM(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():yg(t)}function lT(t,e){throw new j(-200,t)}function vg(t,e){throw new j(-201,!1)}var ee=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(ee||{}),Ap;function dT(){return Ap}function wt(t){let e=Ap;return Ap=t,e}function hT(t,e,n){let r=_l(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&ee.Optional)return null;if(e!==void 0)return e;vg(t,"Injector")}var GM={},si=GM,Rp="__NG_DI_FLAG__",Ku=class{injector;constructor(e){this.injector=e}retrieve(e,n){let r=n;return this.injector.get(e,r.optional?du:si,r)}},Qu="ngTempTokenPath",KM="ngTokenPath",QM=/\n/gm,YM="\u0275",_w="__source";function ZM(t,e=ee.Default){if(Ys()===void 0)throw new j(-203,!1);if(Ys()===null)return hT(t,void 0,e);{let n=Ys(),r;return n instanceof Ku?r=n.injector:r=n,r.get(t,e&ee.Optional?null:void 0,e)}}function G(t,e=ee.Default){return(dT()||ZM)(pt(t),e)}function x(t,e=ee.Default){return G(t,Il(e))}function Il(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function Np(t){let e=[];for(let n=0;n<t.length;n++){let r=pt(t[n]);if(Array.isArray(r)){if(r.length===0)throw new j(900,!1);let i,o=ee.Default;for(let s=0;s<r.length;s++){let a=r[s],u=XM(a);typeof u=="number"?u===-1?i=a.token:o|=u:i=a}e.push(G(i,o))}else e.push(G(r))}return e}function JM(t,e){return t[Rp]=e,t.prototype[Rp]=e,t}function XM(t){return t[Rp]}function eP(t,e,n,r){let i=t[Qu];throw e[_w]&&i.unshift(e[_w]),t.message=tP(`
`+t.message,i,n,r),t[KM]=i,t[Qu]=null,t}function tP(t,e,n,r=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==YM?t.slice(2):t;let i=Dt(e);if(Array.isArray(e))i=e.map(Dt).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):Dt(a)))}i=`{${o.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(QM,`
  `)}`}var Ut=JM(FM("Optional"),8);function ci(t,e){let n=t.hasOwnProperty(Gu);return n?t[Gu]:null}function _g(t,e){t.forEach(n=>Array.isArray(n)?_g(n,e):e(n))}function fT(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Yu(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function nP(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let o=i-2;t[i]=t[o],i--}t[e]=n,t[e+1]=r}}function rP(t,e,n){let r=va(t,e);return r>=0?t[r|1]=n:(r=~r,nP(t,r,e,n)),r}function fp(t,e){let n=va(t,e);if(n>=0)return t[n|1]}function va(t,e){return iP(t,e,1)}function iP(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let o=r+(i-r>>1),s=t[o<<n];if(e===s)return o<<n;s>e?i=o:r=o+1}return~(i<<n)}var ui={},Vt=[],aa=new U(""),pT=new U("",-1),gT=new U(""),Zu=class{get(e,n=si){if(n===si){let r=new Error(`NullInjectorError: No provider for ${Dt(e)}!`);throw r.name="NullInjectorError",r}return n}};function mT(t,e){let n=t[qM]||null;if(!n&&e===!0)throw new Error(`Type ${Dt(t)} does not have '\u0275mod' property.`);return n}function li(t){return t[$M]||null}function oP(t){return t[HM]||null}function sP(t){return t[zM]||null}function _n(t){return{\u0275providers:t}}function aP(...t){return{\u0275providers:yT(!0,t),\u0275fromNgModule:!0}}function yT(t,...e){let n=[],r=new Set,i,o=s=>{n.push(s)};return _g(e,s=>{let a=s;Mp(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&vT(i,o),n}function vT(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];Ig(i,o=>{e(o,r)})}}function Mp(t,e,n,r){if(t=pt(t),!t)return!1;let i=null,o=mw(t),s=!o&&li(t);if(!o&&!s){let u=t.ngModule;if(o=mw(u),o)i=u;else return!1}else{if(s&&!s.standalone)return!1;i=t}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let u=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of u)Mp(l,e,n,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{_g(o.imports,h=>{Mp(h,e,n,r)&&(l||=[],l.push(h))})}finally{}l!==void 0&&vT(l,e)}if(!a){let l=ci(i)||(()=>new i);e({provide:i,useFactory:l,deps:Vt},i),e({provide:gT,useValue:i,multi:!0},i),e({provide:aa,useValue:()=>G(i),multi:!0},i)}let u=o.providers;if(u!=null&&!a){let l=t;Ig(u,h=>{e(h,l)})}}else return!1;return i!==t&&t.providers!==void 0}function Ig(t,e){for(let n of t)uT(n)&&(n=n.\u0275providers),Array.isArray(n)?Ig(n,e):e(n)}var cP=Te({provide:String,useValue:Te});function _T(t){return t!==null&&typeof t=="object"&&cP in t}function uP(t){return!!(t&&t.useExisting)}function lP(t){return!!(t&&t.useFactory)}function Io(t){return typeof t=="function"}function dP(t){return!!t.useClass}var El=new U(""),$u={},Iw={},pp;function Eg(){return pp===void 0&&(pp=new Zu),pp}var it=class{},ca=class extends it{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,xp(e,s=>this.processProvider(s)),this.records.set(pT,po(void 0,this)),i.has("environment")&&this.records.set(it,po(void 0,this));let o=this.records.get(El);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(gT,Vt,ee.Self))}retrieve(e,n){let r=n;return this.get(e,r.optional?du:si,r)}destroy(){ia(this),this._destroyed=!0;let e=te(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),te(e)}}onDestroy(e){return ia(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){ia(this);let n=jn(this),r=wt(void 0),i;try{return e()}finally{jn(n),wt(r)}}get(e,n=si,r=ee.Default){if(ia(this),e.hasOwnProperty(vw))return e[vw](this);r=Il(r);let i,o=jn(this),s=wt(void 0);try{if(!(r&ee.SkipSelf)){let u=this.records.get(e);if(u===void 0){let l=mP(e)&&_l(e);l&&this.injectableDefInScope(l)?u=po(Pp(e),$u):u=null,this.records.set(e,u)}if(u!=null)return this.hydrate(e,u,r)}let a=r&ee.Self?Eg():this.parent;return n=r&ee.Optional&&n===si?null:n,a.get(e,n)}catch(a){if(a.name==="NullInjectorError"){if((a[Qu]=a[Qu]||[]).unshift(Dt(e)),o)throw a;return eP(a,e,"R3InjectorError",this.source)}else throw a}finally{wt(s),jn(o)}}resolveInjectorInitializers(){let e=te(null),n=jn(this),r=wt(void 0),i;try{let o=this.get(aa,Vt,ee.Self);for(let s of o)s()}finally{jn(n),wt(r),te(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(Dt(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=pt(e);let n=Io(e)?e:pt(e&&e.provide),r=fP(e);if(!Io(e)&&e.multi===!0){let i=this.records.get(n);i||(i=po(void 0,$u,!0),i.factory=()=>Np(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n,r){let i=te(null);try{return n.value===Iw?lT(Dt(e)):n.value===$u&&(n.value=Iw,n.value=n.factory(void 0,r)),typeof n.value=="object"&&n.value&&gP(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{te(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=pt(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function Pp(t){let e=_l(t),n=e!==null?e.factory:ci(t);if(n!==null)return n;if(t instanceof U)throw new j(204,!1);if(t instanceof Function)return hP(t);throw new j(204,!1)}function hP(t){if(t.length>0)throw new j(204,!1);let n=UM(t);return n!==null?()=>n.factory(t):()=>new t}function fP(t){if(_T(t))return po(void 0,t.useValue);{let e=IT(t);return po(e,$u)}}function IT(t,e,n){let r;if(Io(t)){let i=pt(t);return ci(i)||Pp(i)}else if(_T(t))r=()=>pt(t.useValue);else if(lP(t))r=()=>t.useFactory(...Np(t.deps||[]));else if(uP(t))r=(i,o)=>G(pt(t.useExisting),o!==void 0&&o&ee.Optional?ee.Optional:void 0);else{let i=pt(t&&(t.useClass||t.provide));if(pP(t))r=()=>new i(...Np(t.deps));else return ci(i)||Pp(i)}return r}function ia(t){if(t.destroyed)throw new j(205,!1)}function po(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function pP(t){return!!t.deps}function gP(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function mP(t){return typeof t=="function"||typeof t=="object"&&t instanceof U}function xp(t,e){for(let n of t)Array.isArray(n)?xp(n,e):n&&uT(n)?xp(n.\u0275providers,e):e(n)}function st(t,e){let n;t instanceof ca?(ia(t),n=t):n=new Ku(t);let r,i=jn(n),o=wt(void 0);try{return e()}finally{jn(i),wt(o)}}function ET(){return dT()!==void 0||Ys()!=null}function wl(t){if(!ET())throw new j(-203,!1)}function yP(t){return typeof t=="function"}var Wn=0,ne=1,Z=2,mt=3,Jt=4,en=5,ua=6,Ju=7,$e=8,Eo=9,zn=10,ot=11,la=12,Ew=13,Mo=14,Xt=15,wo=16,go=17,To=18,Tl=19,wT=20,Tr=21,gp=22,Xu=23,jt=24,vo=25,bt=26,TT=1;var di=7,el=8,tl=9,gt=10;function Dr(t){return Array.isArray(t)&&typeof t[TT]=="object"}function Gn(t){return Array.isArray(t)&&t[TT]===!0}function DT(t){return(t.flags&4)!==0}function Po(t){return t.componentOffset>-1}function wg(t){return(t.flags&1)===1}function pn(t){return!!t.template}function nl(t){return(t[Z]&512)!==0}function xo(t){return(t[Z]&256)===256}var kp=class{previousValue;currentValue;firstChange;constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function bT(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}var Dl=(()=>{let t=()=>CT;return t.ngInherit=!0,t})();function CT(t){return t.type.prototype.ngOnChanges&&(t.setInput=_P),vP}function vP(){let t=AT(this),e=t?.current;if(e){let n=t.previous;if(n===ui)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function _P(t,e,n,r,i){let o=this.declaredInputs[r],s=AT(t)||IP(t,{previous:ui,current:null}),a=s.current||(s.current={}),u=s.previous,l=u[o];a[o]=new kp(l&&l.currentValue,n,u===ui),bT(t,e,i,n)}var ST="__ngSimpleChanges__";function AT(t){return t[ST]||null}function IP(t,e){return t[ST]=e}var ww=null;var _e=function(t,e=null,n){ww?.(t,e,n)},EP="svg",wP="math";function gn(t){for(;Array.isArray(t);)t=t[Wn];return t}function RT(t,e){return gn(e[t])}function Kn(t,e){return gn(e[t.index])}function Tg(t,e){return t.data[e]}function TP(t,e){return t[e]}function DP(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}function mn(t,e){let n=e[t];return Dr(n)?n:n[Wn]}function Dg(t){return(t[Z]&128)===128}function bP(t){return Gn(t[mt])}function Do(t,e){return e==null?null:t[e]}function NT(t){t[go]=0}function MT(t){t[Z]&1024||(t[Z]|=1024,Dg(t)&&_a(t))}function CP(t,e){for(;t>0;)e=e[Mo],t--;return e}function bl(t){return!!(t[Z]&9216||t[jt]?.dirty)}function Op(t){t[zn].changeDetectionScheduler?.notify(8),t[Z]&64&&(t[Z]|=1024),bl(t)&&_a(t)}function _a(t){t[zn].changeDetectionScheduler?.notify(0);let e=hi(t);for(;e!==null&&!(e[Z]&8192||(e[Z]|=8192,!Dg(e)));)e=hi(e)}function PT(t,e){if(xo(t))throw new j(911,!1);t[Tr]===null&&(t[Tr]=[]),t[Tr].push(e)}function SP(t,e){if(t[Tr]===null)return;let n=t[Tr].indexOf(e);n!==-1&&t[Tr].splice(n,1)}function hi(t){let e=t[mt];return Gn(e)?e[mt]:e}function xT(t){return t[Ju]??=[]}function kT(t){return t.cleanup??=[]}var ae={lFrame:HT(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var Lp=!1;function AP(){return ae.lFrame.elementDepthCount}function RP(){ae.lFrame.elementDepthCount++}function NP(){ae.lFrame.elementDepthCount--}function OT(){return ae.bindingsEnabled}function MP(){return ae.skipHydrationRootTNode!==null}function PP(t){return ae.skipHydrationRootTNode===t}function xP(){ae.skipHydrationRootTNode=null}function ye(){return ae.lFrame.lView}function Bt(){return ae.lFrame.tView}function K8(t){return ae.lFrame.contextLView=t,t[$e]}function Q8(t){return ae.lFrame.contextLView=null,t}function $t(){let t=LT();for(;t!==null&&t.type===64;)t=t.parent;return t}function LT(){return ae.lFrame.currentTNode}function kP(){let t=ae.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function Ia(t,e){let n=ae.lFrame;n.currentTNode=t,n.isParent=e}function FT(){return ae.lFrame.isParent}function OP(){ae.lFrame.isParent=!1}function VT(){return Lp}function Tw(t){let e=Lp;return Lp=t,e}function jT(){let t=ae.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function LP(t){return ae.lFrame.bindingIndex=t}function Cl(){return ae.lFrame.bindingIndex++}function FP(t){let e=ae.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function VP(){return ae.lFrame.inI18n}function jP(t,e){let n=ae.lFrame;n.bindingIndex=n.bindingRootIndex=t,Fp(e)}function UP(){return ae.lFrame.currentDirectiveIndex}function Fp(t){ae.lFrame.currentDirectiveIndex=t}function BP(t){let e=ae.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function UT(t){ae.lFrame.currentQueryIndex=t}function $P(t){let e=t[ne];return e.type===2?e.declTNode:e.type===1?t[en]:null}function BT(t,e,n){if(n&ee.SkipSelf){let i=e,o=t;for(;i=i.parent,i===null&&!(n&ee.Host);)if(i=$P(o),i===null||(o=o[Mo],i.type&10))break;if(i===null)return!1;e=i,t=o}let r=ae.lFrame=$T();return r.currentTNode=e,r.lView=t,!0}function bg(t){let e=$T(),n=t[ne];ae.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function $T(){let t=ae.lFrame,e=t===null?null:t.child;return e===null?HT(t):e}function HT(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function zT(){let t=ae.lFrame;return ae.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var qT=zT;function Cg(){let t=zT();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function HP(t){return(ae.lFrame.contextLView=CP(t,ae.lFrame.contextLView))[$e]}function vi(){return ae.lFrame.selectedIndex}function fi(t){ae.lFrame.selectedIndex=t}function zP(){let t=ae.lFrame;return Tg(t.tView,t.selectedIndex)}function qP(){return ae.lFrame.currentNamespace}var WT=!0;function Sg(){return WT}function Ag(t){WT=t}function WP(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=CT(e);(n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s)}i&&(n.preOrderHooks??=[]).push(0-t,i),o&&((n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o))}function GT(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let o=t.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:h}=o;s&&(t.contentHooks??=[]).push(-n,s),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),u&&(t.viewHooks??=[]).push(-n,u),l&&((t.viewHooks??=[]).push(n,l),(t.viewCheckHooks??=[]).push(n,l)),h!=null&&(t.destroyHooks??=[]).push(n,h)}}function Hu(t,e,n){KT(t,e,3,n)}function zu(t,e,n,r){(t[Z]&3)===n&&KT(t,e,n,r)}function mp(t,e){let n=t[Z];(n&3)===e&&(n&=16383,n+=1,t[Z]=n)}function KT(t,e,n,r){let i=r!==void 0?t[go]&65535:0,o=r??-1,s=e.length-1,a=0;for(let u=i;u<s;u++)if(typeof e[u+1]=="number"){if(a=e[u],r!=null&&a>=r)break}else e[u]<0&&(t[go]+=65536),(a<o||o==-1)&&(GP(t,n,e,u),t[go]=(t[go]&4294901760)+u+2),u++}function Dw(t,e){_e(4,t,e);let n=te(null);try{e.call(t)}finally{te(n),_e(5,t,e)}}function GP(t,e,n,r){let i=n[r]<0,o=n[r+1],s=i?-n[r]:n[r],a=t[s];i?t[Z]>>14<t[go]>>16&&(t[Z]&3)===e&&(t[Z]+=16384,Dw(a,o)):Dw(a,o)}var _o=-1,pi=class{factory;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,n,r){this.factory=e,this.canSeeViewProviders=n,this.injectImpl=r}};function KP(t){return(t.flags&8)!==0}function QP(t){return(t.flags&16)!==0}function YP(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let o=n[r++],s=n[r++],a=n[r++];t.setAttribute(e,s,a,o)}else{let o=i,s=n[++r];JP(o)?t.setProperty(e,o,s):t.setAttribute(e,o,s),r++}}return r}function ZP(t){return t===3||t===4||t===6}function JP(t){return t.charCodeAt(0)===64}function da(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?bw(t,n,i,null,e[++r]):bw(t,n,i,null,null))}}return t}function bw(t,e,n,r,i){let o=0,s=t.length;if(e===-1)s=-1;else for(;o<t.length;){let a=t[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<t.length;){let a=t[o];if(typeof a=="number")break;if(a===n){i!==null&&(t[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),i!==null&&t.splice(o++,0,i)}function QT(t){return t!==_o}function rl(t){return t&32767}function XP(t){return t>>16}function il(t,e){let n=XP(t),r=e;for(;n>0;)r=r[Mo],n--;return r}var Vp=!0;function ol(t){let e=Vp;return Vp=t,e}var ex=256,YT=ex-1,ZT=5,tx=0,fn={};function nx(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(sa)&&(r=n[sa]),r==null&&(r=n[sa]=tx++);let i=r&YT,o=1<<i;e.data[t+(i>>ZT)]|=o}function sl(t,e){let n=JT(t,e);if(n!==-1)return n;let r=e[ne];r.firstCreatePass&&(t.injectorIndex=e.length,yp(r.data,t),yp(e,null),yp(r.blueprint,null));let i=Rg(t,e),o=t.injectorIndex;if(QT(i)){let s=rl(i),a=il(i,e),u=a[ne].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|u[s+l]}return e[o+8]=i,o}function yp(t,e){t.push(0,0,0,0,0,0,0,0,e)}function JT(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function Rg(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=rD(i),r===null)return _o;if(n++,i=i[Mo],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return _o}function jp(t,e,n){nx(t,e,n)}function XT(t,e,n){if(n&ee.Optional||t!==void 0)return t;vg(e,"NodeInjector")}function eD(t,e,n,r){if(n&ee.Optional&&r===void 0&&(r=null),(n&(ee.Self|ee.Host))===0){let i=t[Eo],o=wt(void 0);try{return i?i.get(e,r,n&ee.Optional):hT(e,r,n&ee.Optional)}finally{wt(o)}}return XT(r,e,n)}function tD(t,e,n,r=ee.Default,i){if(t!==null){if(e[Z]&2048&&!(r&ee.Self)){let s=ax(t,e,n,r,fn);if(s!==fn)return s}let o=nD(t,e,n,r,fn);if(o!==fn)return o}return eD(e,n,r,i)}function nD(t,e,n,r,i){let o=ox(n);if(typeof o=="function"){if(!BT(e,t,r))return r&ee.Host?XT(i,n,r):eD(e,n,r,i);try{let s;if(s=o(r),s==null&&!(r&ee.Optional))vg(n);else return s}finally{qT()}}else if(typeof o=="number"){let s=null,a=JT(t,e),u=_o,l=r&ee.Host?e[Xt][en]:null;for((a===-1||r&ee.SkipSelf)&&(u=a===-1?Rg(t,e):e[a+8],u===_o||!Sw(r,!1)?a=-1:(s=e[ne],a=rl(u),e=il(u,e)));a!==-1;){let h=e[ne];if(Cw(o,a,h.data)){let p=rx(a,e,n,s,r,l);if(p!==fn)return p}u=e[a+8],u!==_o&&Sw(r,e[ne].data[a+8]===l)&&Cw(o,a,e)?(s=h,a=rl(u),e=il(u,e)):a=-1}}return i}function rx(t,e,n,r,i,o){let s=e[ne],a=s.data[t+8],u=r==null?Po(a)&&Vp:r!=s&&(a.type&3)!==0,l=i&ee.Host&&o===a,h=ix(a,s,n,u,l);return h!==null?al(e,s,h,a,i):fn}function ix(t,e,n,r,i){let o=t.providerIndexes,s=e.data,a=o&1048575,u=t.directiveStart,l=t.directiveEnd,h=o>>20,p=r?a:a+h,m=i?a+h:l;for(let y=p;y<m;y++){let w=s[y];if(y<u&&n===w||y>=u&&w.type===n)return y}if(i){let y=s[u];if(y&&pn(y)&&y.type===n)return u}return null}function al(t,e,n,r,i){let o=t[n],s=e.data;if(o instanceof pi){let a=o;a.resolving&&lT(WM(s[n]));let u=ol(a.canSeeViewProviders);a.resolving=!0;let l,h=a.injectImpl?wt(a.injectImpl):null,p=BT(t,r,ee.Default);try{o=t[n]=a.factory(void 0,i,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&WP(n,s[n],e)}finally{h!==null&&wt(h),ol(u),a.resolving=!1,qT()}}return o}function ox(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(sa)?t[sa]:void 0;return typeof e=="number"?e>=0?e&YT:sx:e}function Cw(t,e,n){let r=1<<t;return!!(n[e+(t>>ZT)]&r)}function Sw(t,e){return!(t&ee.Self)&&!(t&ee.Host&&e)}var ai=class{_tNode;_lView;constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return tD(this._tNode,this._lView,e,Il(r),n)}};function sx(){return new ai($t(),ye())}function Ng(t){return ya(()=>{let e=t.prototype.constructor,n=e[Gu]||Up(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let o=i[Gu]||Up(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function Up(t){return oT(t)?()=>{let e=Up(pt(t));return e&&e()}:ci(t)}function ax(t,e,n,r,i){let o=t,s=e;for(;o!==null&&s!==null&&s[Z]&2048&&!nl(s);){let a=nD(o,s,n,r|ee.Self,fn);if(a!==fn)return a;let u=o.parent;if(!u){let l=s[wT];if(l){let h=l.get(n,fn,r);if(h!==fn)return h}u=rD(s),s=s[Mo]}o=u}return i}function rD(t){let e=t[ne],n=e.type;return n===2?e.declTNode:n===1?t[en]:null}function Aw(t,e=null,n=null,r){let i=iD(t,e,n,r);return i.resolveInjectorInitializers(),i}function iD(t,e=null,n=null,r,i=new Set){let o=[n||Vt,aP(t)];return r=r||(typeof t=="object"?void 0:Dt(t)),new ca(o,e||Eg(),r||null,i)}var He=class t{static THROW_IF_NOT_FOUND=si;static NULL=new Zu;static create(e,n){if(Array.isArray(e))return Aw({name:""},n,e,"");{let r=e.name??"";return Aw({name:r},e.parent,e.providers,r)}}static \u0275prov=B({token:t,providedIn:"any",factory:()=>G(pT)});static __NG_ELEMENT_ID__=-1};var cx=new U("");cx.__NG_ELEMENT_ID__=t=>{let e=$t();if(e===null)throw new j(204,!1);if(e.type&2)return e.value;if(t&ee.Optional)return null;throw new j(204,!1)};var oD=!1,Cr=(()=>{class t{static __NG_ELEMENT_ID__=ux;static __NG_ENV_ID__=n=>n}return t})(),Bp=class extends Cr{_lView;constructor(e){super(),this._lView=e}onDestroy(e){let n=this._lView;return xo(n)?(e(),()=>{}):(PT(n,e),()=>SP(n,e))}};function ux(){return new Bp(ye())}var gi=class{},Mg=new U("",{providedIn:"root",factory:()=>!1});var sD=new U(""),aD=new U(""),_i=(()=>{class t{taskId=0;pendingTasks=new Set;get _hasPendingTasks(){return this.hasPendingTasks.value}hasPendingTasks=new Ze(!1);add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let n=this.taskId++;return this.pendingTasks.add(n),n}has(n){return this.pendingTasks.has(n)}remove(n){this.pendingTasks.delete(n),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static \u0275prov=B({token:t,providedIn:"root",factory:()=>new t})}return t})(),Sl=(()=>{class t{internalPendingTasks=x(_i);scheduler=x(gi);add(){let n=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(n)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(n))}}run(n){return E(this,null,function*(){let r=this.add();try{return yield n()}finally{r()}})}static \u0275prov=B({token:t,providedIn:"root",factory:()=>new t})}return t})(),$p=class extends Ye{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,ET()&&(this.destroyRef=x(Cr,{optional:!0})??void 0,this.pendingTasks=x(_i,{optional:!0})??void 0)}emit(e){let n=te(null);try{super.next(e)}finally{te(n)}}subscribe(e,n,r){let i=e,o=n||(()=>null),s=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof Ne&&e.add(a),a}wrapInTimeout(e){return n=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(n)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},Tt=$p;function cl(...t){}function cD(t){let e,n;function r(){t=cl;try{n!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(n),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{t(),r()}),typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(()=>{t(),r()})),()=>r()}function Rw(t){return queueMicrotask(()=>t()),()=>{t=cl}}var Pg="isAngularZone",ul=Pg+"_ID",lx=0,fe=class t{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new Tt(!1);onMicrotaskEmpty=new Tt(!1);onStable=new Tt(!1);onError=new Tt(!1);constructor(e){let{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=oD}=e;if(typeof Zone>"u")throw new j(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,fx(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(Pg)===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new j(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new j(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,dx,cl,cl);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},dx={};function xg(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function hx(t){if(t.isCheckStableRunning||t.callbackScheduled)return;t.callbackScheduled=!0;function e(){cD(()=>{t.callbackScheduled=!1,Hp(t),t.isCheckStableRunning=!0,xg(t),t.isCheckStableRunning=!1})}t.scheduleInRootZone?Zone.root.run(()=>{e()}):t._outer.run(()=>{e()}),Hp(t)}function fx(t){let e=()=>{hx(t)},n=lx++;t._inner=t._inner.fork({name:"angular",properties:{[Pg]:!0,[ul]:n,[ul+n]:!0},onInvokeTask:(r,i,o,s,a,u)=>{if(px(u))return r.invokeTask(o,s,a,u);try{return Nw(t),r.invokeTask(o,s,a,u)}finally{(t.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),Mw(t)}},onInvoke:(r,i,o,s,a,u,l)=>{try{return Nw(t),r.invoke(o,s,a,u,l)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!gx(u)&&e(),Mw(t)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(t._hasPendingMicrotasks=s.microTask,Hp(t),xg(t)):s.change=="macroTask"&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}function Hp(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.callbackScheduled===!0?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function Nw(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function Mw(t){t._nesting--,xg(t)}var zp=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new Tt;onMicrotaskEmpty=new Tt;onStable=new Tt;onError=new Tt;run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}};function px(t){return uD(t,"__ignore_ng_zone__")}function gx(t){return uD(t,"__scheduler_tick__")}function uD(t,e){return!Array.isArray(t)||t.length!==1?!1:t[0]?.data?.[e]===!0}var yn=class{_console=console;handleError(e){this._console.error("ERROR",e)}},mx=new U("",{providedIn:"root",factory:()=>{let t=x(fe),e=x(yn);return n=>t.runOutsideAngular(()=>e.handleError(n))}});function Pw(t,e){return rT(t,e)}function yx(t){return rT(nT,t)}var lD=(Pw.required=yx,Pw);function vx(){return Al($t(),ye())}function Al(t,e){return new Ea(Kn(t,e))}var Ea=(()=>{class t{nativeElement;constructor(n){this.nativeElement=n}static __NG_ELEMENT_ID__=vx}return t})();function kg(t,e){let n=Yf(t,e?.equal),r=n[Qt];return n.set=i=>Qs(r,i),n.update=i=>Zf(r,i),n.asReadonly=_x.bind(n),n}function _x(){let t=this[Qt];if(t.readonlyFn===void 0){let e=()=>this();e[Qt]=t,t.readonlyFn=e}return t.readonlyFn}function dD(t){return(t.flags&128)===128}var hD=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(hD||{}),fD=new Map,Ix=0;function Ex(){return Ix++}function wx(t){fD.set(t[Tl],t)}function qp(t){fD.delete(t[Tl])}var xw="__ngContext__";function wa(t,e){Dr(e)?(t[xw]=e[Tl],wx(e)):t[xw]=e}function pD(t){return mD(t[la])}function gD(t){return mD(t[Jt])}function mD(t){for(;t!==null&&!Gn(t);)t=t[Jt];return t}var Wp;function yD(t){Wp=t}function Tx(){if(Wp!==void 0)return Wp;if(typeof document<"u")return document;throw new j(210,!1)}var Og=new U("",{providedIn:"root",factory:()=>Dx}),Dx="ng",Lg=new U(""),Sr=new U("",{providedIn:"platform",factory:()=>"unknown"});var Fg=new U("",{providedIn:"root",factory:()=>Tx().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var bx="h",Cx="b";var vD=!1,Sx=new U("",{providedIn:"root",factory:()=>vD});var Vg=function(t){return t[t.CHANGE_DETECTION=0]="CHANGE_DETECTION",t[t.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",t}(Vg||{}),ko=new U(""),kw=new Set;function Ar(t){kw.has(t)||(kw.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}var _D=(()=>{class t{view;node;constructor(n,r){this.view=n,this.node=r}static __NG_ELEMENT_ID__=Ax}return t})();function Ax(){return new _D(ye(),$t())}var mo=function(t){return t[t.EarlyRead=0]="EarlyRead",t[t.Write=1]="Write",t[t.MixedReadWrite=2]="MixedReadWrite",t[t.Read=3]="Read",t}(mo||{}),ID=(()=>{class t{impl=null;execute(){this.impl?.execute()}static \u0275prov=B({token:t,providedIn:"root",factory:()=>new t})}return t})(),Rx=[mo.EarlyRead,mo.Write,mo.MixedReadWrite,mo.Read],Nx=(()=>{class t{ngZone=x(fe);scheduler=x(gi);errorHandler=x(yn,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){x(ko,{optional:!0})}execute(){let n=this.sequences.size>0;n&&_e(16),this.executing=!0;for(let r of Rx)for(let i of this.sequences)if(!(i.erroredOrDestroyed||!i.hooks[r]))try{i.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let o=i.hooks[r];return o(i.pipelinedValue)},i.snapshot))}catch(o){i.erroredOrDestroyed=!0,this.errorHandler?.handleError(o)}this.executing=!1;for(let r of this.sequences)r.afterRun(),r.once&&(this.sequences.delete(r),r.destroy());for(let r of this.deferredRegistrations)this.sequences.add(r);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),n&&_e(17)}register(n){let{view:r}=n;r!==void 0?((r[vo]??=[]).push(n),_a(r),r[Z]|=8192):this.executing?this.deferredRegistrations.add(n):this.addSequence(n)}addSequence(n){this.sequences.add(n),this.scheduler.notify(7)}unregister(n){this.executing&&this.sequences.has(n)?(n.erroredOrDestroyed=!0,n.pipelinedValue=void 0,n.once=!0):(this.sequences.delete(n),this.deferredRegistrations.delete(n))}maybeTrace(n,r){return r?r.run(Vg.AFTER_NEXT_RENDER,n):n()}static \u0275prov=B({token:t,providedIn:"root",factory:()=>new t})}return t})(),Gp=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(e,n,r,i,o,s=null){this.impl=e,this.hooks=n,this.view=r,this.once=i,this.snapshot=s,this.unregisterOnDestroy=o?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let e=this.view?.[vo];e&&(this.view[vo]=e.filter(n=>n!==this))}};function jg(t,e){!e?.injector&&wl(jg);let n=e?.injector??x(He);return Ar("NgAfterNextRender"),Px(t,n,e,!0)}function Mx(t,e){if(t instanceof Function){let n=[void 0,void 0,void 0,void 0];return n[e]=t,n}else return[t.earlyRead,t.write,t.mixedReadWrite,t.read]}function Px(t,e,n,r){let i=e.get(ID);i.impl??=e.get(Nx);let o=e.get(ko,null,{optional:!0}),s=n?.phase??mo.MixedReadWrite,a=n?.manualCleanup!==!0?e.get(Cr):null,u=e.get(_D,null,{optional:!0}),l=new Gp(i.impl,Mx(t,s),u?.view,r,a,o?.snapshot(null));return i.impl.register(l),l}var xx=(t,e,n,r)=>{};function kx(t,e,n,r){xx(t,e,n,r)}var Ox=()=>null;function ED(t,e,n=!1){return Ox(t,e,n)}function wD(t,e){let n=t.contentQueries;if(n!==null){let r=te(null);try{for(let i=0;i<n.length;i+=2){let o=n[i],s=n[i+1];if(s!==-1){let a=t.data[s];UT(o),a.contentQueries(2,e[s],s)}}}finally{te(r)}}}function Kp(t,e,n){UT(0);let r=te(null);try{e(t,n)}finally{te(r)}}function TD(t,e,n){if(DT(e)){let r=te(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=t.data[s];if(a.contentQueries){let u=n[s];a.contentQueries(1,u,s)}}}finally{te(r)}}}var vn=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(vn||{});var ll=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${eT})`}};function Ug(t){return t instanceof ll?t.changingThisBreaksApplicationSecurity:t}function Lx(t,e){let n=Fx(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${eT})`)}return n===e}function Fx(t){return t instanceof ll&&t.getTypeName()||null}var Vx=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function jx(t){return t=String(t),t.match(Vx)?t:"unsafe:"+t}var DD=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(DD||{});function Y8(t){let e=Ux();return e?e.sanitize(DD.URL,t)||"":Lx(t,"URL")?Ug(t):jx(yg(t))}function Ux(){let t=ye();return t&&t[zn].sanitizer}function bD(t){return t instanceof Function?t():t}function Bx(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||t.charCodeAt(i+o)<=32)return i}n=i+1}}var CD="ng-template";function $x(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&Bx(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(Bg(t))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===n)return!0}return!1}function Bg(t){return t.type===4&&t.value!==CD}function Hx(t,e,n){let r=t.type===4&&!n?CD:t.value;return e===r}function zx(t,e,n){let r=4,i=t.attrs,o=i!==null?Gx(i):0,s=!1;for(let a=0;a<e.length;a++){let u=e[a];if(typeof u=="number"){if(!s&&!Zt(r)&&!Zt(u))return!1;if(s&&Zt(u))continue;s=!1,r=u|r&1;continue}if(!s)if(r&4){if(r=2|r&1,u!==""&&!Hx(t,u,n)||u===""&&e.length===1){if(Zt(r))return!1;s=!0}}else if(r&8){if(i===null||!$x(t,i,u,n)){if(Zt(r))return!1;s=!0}}else{let l=e[++a],h=qx(u,i,Bg(t),n);if(h===-1){if(Zt(r))return!1;s=!0;continue}if(l!==""){let p;if(h>o?p="":p=i[h+1].toLowerCase(),r&2&&l!==p){if(Zt(r))return!1;s=!0}}}}return Zt(r)||s}function Zt(t){return(t&1)===0}function qx(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let o=!1;for(;i<e.length;){let s=e[i];if(s===t)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return Kx(e,t)}function Wx(t,e,n=!1){for(let r=0;r<e.length;r++)if(zx(t,e[r],n))return!0;return!1}function Gx(t){for(let e=0;e<t.length;e++){let n=t[e];if(ZP(n))return e}return t.length}function Kx(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function Ow(t,e){return t?":not("+e.trim()+")":e}function Qx(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if(typeof s=="string")if(r&2){let a=t[++n];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!Zt(s)&&(e+=Ow(o,i),i=""),r=s,o=o||!Zt(r);n++}return i!==""&&(e+=Ow(o,i)),e}function Yx(t){return t.map(Qx).join(",")}function Zx(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let o=t[r];if(typeof o=="string")i===2?o!==""&&e.push(o,t[++r]):i===8&&n.push(o);else{if(!Zt(i))break;i=o}r++}return n.length&&e.push(1,...n),e}var Rr={};function Jx(t,e){return t.createText(e)}function Xx(t,e,n){t.setValue(e,n)}function SD(t,e,n){return t.createElement(e,n)}function dl(t,e,n,r,i){t.insertBefore(e,n,r,i)}function AD(t,e,n){t.appendChild(e,n)}function Lw(t,e,n,r,i){r!==null?dl(t,e,n,r,i):AD(t,e,n)}function ek(t,e,n){t.removeChild(null,e,n)}function tk(t,e,n){t.setAttribute(e,"style",n)}function nk(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function RD(t,e,n){let{mergedAttrs:r,classes:i,styles:o}=n;r!==null&&YP(t,e,r),i!==null&&nk(t,e,i),o!==null&&tk(t,e,o)}function $g(t,e,n,r,i,o,s,a,u,l,h){let p=bt+r,m=p+i,y=rk(p,m),w=typeof l=="function"?l():l;return y[ne]={type:t,blueprint:y,template:n,queries:null,viewQuery:a,declTNode:e,data:y.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:u,consts:w,incompleteFirstPass:!1,ssrId:h}}function rk(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:Rr);return n}function ik(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=$g(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function Hg(t,e,n,r,i,o,s,a,u,l,h){let p=e.blueprint.slice();return p[Wn]=i,p[Z]=r|4|128|8|64|1024,(l!==null||t&&t[Z]&2048)&&(p[Z]|=2048),NT(p),p[mt]=p[Mo]=t,p[$e]=n,p[zn]=s||t&&t[zn],p[ot]=a||t&&t[ot],p[Eo]=u||t&&t[Eo]||null,p[en]=o,p[Tl]=Ex(),p[ua]=h,p[wT]=l,p[Xt]=e.type==2?t[Xt]:p,p}function ok(t,e,n){let r=Kn(e,t),i=ik(n),o=t[zn].rendererFactory,s=zg(t,Hg(t,i,null,ND(n),r,e,null,o.createRenderer(r,n),null,null,null));return t[e.index]=s}function ND(t){let e=16;return t.signals?e=4096:t.onPush&&(e=64),e}function MD(t,e,n,r){if(n===0)return-1;let i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function zg(t,e){return t[la]?t[Ew][Jt]=e:t[la]=e,t[Ew]=e,e}function Z8(t=1){PD(Bt(),ye(),vi()+t,!1)}function PD(t,e,n,r){if(!r)if((e[Z]&3)===3){let o=t.preOrderCheckHooks;o!==null&&Hu(e,o,n)}else{let o=t.preOrderHooks;o!==null&&zu(e,o,0,n)}fi(n)}var Rl=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(Rl||{});function Qp(t,e,n,r){let i=te(null);try{let[o,s,a]=t.inputs[n],u=null;(s&Rl.SignalBased)!==0&&(u=e[o][Qt]),u!==null&&u.transformFn!==void 0?r=u.transformFn(r):a!==null&&(r=a.call(e,r)),t.setInput!==null?t.setInput(e,u,r,n,o):bT(e,u,o,r)}finally{te(i)}}function xD(t,e,n,r,i){let o=vi(),s=r&2;try{fi(-1),s&&e.length>bt&&PD(t,e,bt,!1),_e(s?2:0,i),n(r,i)}finally{fi(o),_e(s?3:1,i)}}function qg(t,e,n){hk(t,e,n),(n.flags&64)===64&&fk(t,e,n)}function kD(t,e,n=Kn){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?n(e,t):t[s];t[i++]=a}}}function sk(t,e,n,r){let o=r.get(Sx,vD)||n===vn.ShadowDom,s=t.selectRootElement(e,o);return ak(s),s}function ak(t){ck(t)}var ck=()=>null;function uk(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function lk(t,e,n,r,i,o,s,a){if(!a&&Wg(e,t,n,r,i)){Po(e)&&dk(n,e.index);return}if(e.type&3){let u=Kn(e,n);r=uk(r),i=s!=null?s(i,e.value||"",r):i,o.setProperty(u,r,i)}else e.type&12}function dk(t,e){let n=mn(e,t);n[Z]&16||(n[Z]|=64)}function hk(t,e,n){let r=n.directiveStart,i=n.directiveEnd;Po(n)&&ok(e,n,t.data[r+n.componentOffset]),t.firstCreatePass||sl(n,e);let o=n.initialInputs;for(let s=r;s<i;s++){let a=t.data[s],u=al(e,t,s,n);if(wa(u,e),o!==null&&gk(e,s-r,u,a,n,o),pn(a)){let l=mn(n.index,e);l[$e]=al(e,t,s,n)}}}function fk(t,e,n){let r=n.directiveStart,i=n.directiveEnd,o=n.index,s=UP();try{fi(o);for(let a=r;a<i;a++){let u=t.data[a],l=e[a];Fp(a),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&pk(u,l)}}finally{fi(-1),Fp(s)}}function pk(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function OD(t,e){let n=t.directiveRegistry,r=null;if(n)for(let i=0;i<n.length;i++){let o=n[i];Wx(e,o.selectors,!1)&&(r??=[],pn(o)?r.unshift(o):r.push(o))}return r}function gk(t,e,n,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;a+=2){let u=s[a],l=s[a+1];Qp(r,n,u,l)}}function mk(t,e){let n=t[Eo],r=n?n.get(yn,null):null;r&&r.handleError(e)}function Wg(t,e,n,r,i){let o=t.inputs?.[r],s=t.hostDirectiveInputs?.[r],a=!1;if(s)for(let u=0;u<s.length;u+=2){let l=s[u],h=s[u+1],p=e.data[l];Qp(p,n[l],h,i),a=!0}if(o)for(let u of o){let l=n[u],h=e.data[u];Qp(h,l,r,i),a=!0}return a}function yk(t,e){let n=mn(e,t),r=n[ne];vk(r,n);let i=n[Wn];i!==null&&n[ua]===null&&(n[ua]=ED(i,n[Eo])),_e(18),Gg(r,n,n[$e]),_e(19,n[$e])}function vk(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function Gg(t,e,n){bg(e);try{let r=t.viewQuery;r!==null&&Kp(1,r,n);let i=t.template;i!==null&&xD(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[To]?.finishViewCreation(t),t.staticContentQueries&&wD(t,e),t.staticViewQueries&&Kp(2,t.viewQuery,n);let o=t.components;o!==null&&_k(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[Z]&=-5,Cg()}}function _k(t,e){for(let n=0;n<e.length;n++)yk(t,e[n])}function Nl(t,e,n,r){let i=te(null);try{let o=e.tView,a=t[Z]&4096?4096:16,u=Hg(t,o,n,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=t[e.index];u[wo]=l;let h=t[To];return h!==null&&(u[To]=h.createEmbeddedView(o)),Gg(o,u,n),u}finally{te(i)}}function ha(t,e){return!e||e.firstChild===null||dD(t)}var Ik;function Kg(t,e){return Ik(t,e)}var qn=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(qn||{});function LD(t){return(t.flags&32)===32}function yo(t,e,n,r,i){if(r!=null){let o,s=!1;Gn(r)?o=r:Dr(r)&&(s=!0,r=r[Wn]);let a=gn(r);t===0&&n!==null?i==null?AD(e,n,a):dl(e,n,a,i||null,!0):t===1&&n!==null?dl(e,n,a,i||null,!0):t===2?ek(e,a,s):t===3&&e.destroyNode(a),o!=null&&Pk(e,t,o,n,i)}}function Ek(t,e){FD(t,e),e[Wn]=null,e[en]=null}function wk(t,e,n,r,i,o){r[Wn]=i,r[en]=e,Pl(t,r,n,1,i,o)}function FD(t,e){e[zn].changeDetectionScheduler?.notify(9),Pl(t,e,e[ot],2,null,null)}function Tk(t){let e=t[la];if(!e)return vp(t[ne],t);for(;e;){let n=null;if(Dr(e))n=e[la];else{let r=e[gt];r&&(n=r)}if(!n){for(;e&&!e[Jt]&&e!==t;)Dr(e)&&vp(e[ne],e),e=e[mt];e===null&&(e=t),Dr(e)&&vp(e[ne],e),n=e&&e[Jt]}e=n}}function Qg(t,e){let n=t[tl],r=n.indexOf(e);n.splice(r,1)}function Ml(t,e){if(xo(e))return;let n=e[ot];n.destroyNode&&Pl(t,e,n,3,null,null),Tk(e)}function vp(t,e){if(xo(e))return;let n=te(null);try{e[Z]&=-129,e[Z]|=256,e[jt]&&Gf(e[jt]),bk(t,e),Dk(t,e),e[ne].type===1&&e[ot].destroy();let r=e[wo];if(r!==null&&Gn(e[mt])){r!==e[mt]&&Qg(r,e);let i=e[To];i!==null&&i.detachView(t)}qp(e)}finally{te(n)}}function Dk(t,e){let n=t.cleanup,r=e[Ju];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let a=n[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[n[s+1]];n[s].call(a)}r!==null&&(e[Ju]=null);let i=e[Tr];if(i!==null){e[Tr]=null;for(let s=0;s<i.length;s++){let a=i[s];a()}}let o=e[Xu];if(o!==null){e[Xu]=null;for(let s of o)s.destroy()}}function bk(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof pi)){let o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],u=o[s+1];_e(4,a,u);try{u.call(a)}finally{_e(5,a,u)}}else{_e(4,i,o);try{o.call(i)}finally{_e(5,i,o)}}}}}function Ck(t,e,n){return Sk(t,e.parent,n)}function Sk(t,e,n){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return n[Wn];if(Po(r)){let{encapsulation:i}=t.data[r.directiveStart+r.componentOffset];if(i===vn.None||i===vn.Emulated)return null}return Kn(r,n)}function Ak(t,e,n){return Nk(t,e,n)}function Rk(t,e,n){return t.type&40?Kn(t,n):null}var Nk=Rk,Fw;function Yg(t,e,n,r){let i=Ck(t,r,e),o=e[ot],s=r.parent||e[en],a=Ak(s,r,e);if(i!=null)if(Array.isArray(n))for(let u=0;u<n.length;u++)Lw(o,i,n[u],a,!1);else Lw(o,i,n,a,!1);Fw!==void 0&&Fw(o,r,e,n,i)}function oa(t,e){if(e!==null){let n=e.type;if(n&3)return Kn(e,t);if(n&4)return Yp(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return oa(t,r);{let i=t[e.index];return Gn(i)?Yp(-1,i):gn(i)}}else{if(n&128)return oa(t,e.next);if(n&32)return Kg(e,t)()||gn(t[e.index]);{let r=VD(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=hi(t[Xt]);return oa(i,r)}else return oa(t,e.next)}}}return null}function VD(t,e){if(e!==null){let r=t[Xt][en],i=e.projection;return r.projection[i]}return null}function Yp(t,e){let n=gt+t+1;if(n<e.length){let r=e[n],i=r[ne].firstChild;if(i!==null)return oa(r,i)}return e[di]}function Zg(t,e,n,r,i,o,s){for(;n!=null;){if(n.type===128){n=n.next;continue}let a=r[n.index],u=n.type;if(s&&e===0&&(a&&wa(gn(a),r),n.flags|=2),!LD(n))if(u&8)Zg(t,e,n.child,r,i,o,!1),yo(e,t,i,a,o);else if(u&32){let l=Kg(n,r),h;for(;h=l();)yo(e,t,i,h,o);yo(e,t,i,a,o)}else u&16?Mk(t,e,r,n,i,o):yo(e,t,i,a,o);n=s?n.projectionNext:n.next}}function Pl(t,e,n,r,i,o){Zg(n,r,t.firstChild,e,i,o,!1)}function Mk(t,e,n,r,i,o){let s=n[Xt],u=s[en].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++){let h=u[l];yo(e,t,i,h,o)}else{let l=u,h=s[mt];dD(r)&&(l.flags|=128),Zg(t,e,l,h,i,o,!0)}}function Pk(t,e,n,r,i){let o=n[di],s=gn(n);o!==s&&yo(e,t,r,o,i);for(let a=gt;a<n.length;a++){let u=n[a];Pl(u[ne],u,t,e,r,o)}}function xk(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let o=r.indexOf("-")===-1?void 0:qn.DashCase;i==null?t.removeStyle(n,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=qn.Important),t.setStyle(n,r,i,o))}}function hl(t,e,n,r,i=!1){for(;n!==null;){if(n.type===128){n=i?n.projectionNext:n.next;continue}let o=e[n.index];o!==null&&r.push(gn(o)),Gn(o)&&kk(o,r);let s=n.type;if(s&8)hl(t,e,n.child,r);else if(s&32){let a=Kg(n,e),u;for(;u=a();)r.push(u)}else if(s&16){let a=VD(e,n);if(Array.isArray(a))r.push(...a);else{let u=hi(e[Xt]);hl(u[ne],u,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function kk(t,e){for(let n=gt;n<t.length;n++){let r=t[n],i=r[ne].firstChild;i!==null&&hl(r[ne],r,i,e)}t[di]!==t[Wn]&&e.push(t[di])}function jD(t){if(t[vo]!==null){for(let e of t[vo])e.impl.addSequence(e);t[vo].length=0}}var UD=[];function Ok(t){return t[jt]??Lk(t)}function Lk(t){let e=UD.pop()??Object.create(Vk);return e.lView=t,e}function Fk(t){t.lView[jt]!==t&&(t.lView=null,UD.push(t))}var Vk=ve(F({},Gs),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{_a(t.lView)},consumerOnSignalRead(){this.lView[jt]=this}});function jk(t){let e=t[jt]??Object.create(Uk);return e.lView=t,e}var Uk=ve(F({},Gs),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{let e=hi(t.lView);for(;e&&!BD(e[ne]);)e=hi(e);e&&MT(e)},consumerOnSignalRead(){this.lView[jt]=this}});function BD(t){return t.type!==2}function $D(t){if(t[Xu]===null)return;let e=!0;for(;e;){let n=!1;for(let r of t[Xu])r.dirty&&(n=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=n&&!!(t[Z]&8192)}}var Bk=100;function HD(t,e=!0,n=0){let i=t[zn].rendererFactory,o=!1;o||i.begin?.();try{$k(t,n)}catch(s){throw e&&mk(t,s),s}finally{o||i.end?.()}}function $k(t,e){let n=VT();try{Tw(!0),Zp(t,e);let r=0;for(;bl(t);){if(r===Bk)throw new j(103,!1);r++,Zp(t,1)}}finally{Tw(n)}}function Hk(t,e,n,r){if(xo(e))return;let i=e[Z],o=!1,s=!1;bg(e);let a=!0,u=null,l=null;o||(BD(t)?(l=Ok(e),u=au(l)):Bf()===null?(a=!1,l=jk(e),u=au(l)):e[jt]&&(Gf(e[jt]),e[jt]=null));try{NT(e),LP(t.bindingStartIndex),n!==null&&xD(t,e,n,2,r);let h=(i&3)===3;if(!o)if(h){let y=t.preOrderCheckHooks;y!==null&&Hu(e,y,null)}else{let y=t.preOrderHooks;y!==null&&zu(e,y,0,null),mp(e,0)}if(s||zk(e),$D(e),zD(e,0),t.contentQueries!==null&&wD(t,e),!o)if(h){let y=t.contentCheckHooks;y!==null&&Hu(e,y)}else{let y=t.contentHooks;y!==null&&zu(e,y,1),mp(e,1)}Wk(t,e);let p=t.components;p!==null&&WD(e,p,0);let m=t.viewQuery;if(m!==null&&Kp(2,m,r),!o)if(h){let y=t.viewCheckHooks;y!==null&&Hu(e,y)}else{let y=t.viewHooks;y!==null&&zu(e,y,2),mp(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[gp]){for(let y of e[gp])y();e[gp]=null}o||(jD(e),e[Z]&=-73)}catch(h){throw o||_a(e),h}finally{l!==null&&(qf(l,u),a&&Fk(l)),Cg()}}function zD(t,e){for(let n=pD(t);n!==null;n=gD(n))for(let r=gt;r<n.length;r++){let i=n[r];qD(i,e)}}function zk(t){for(let e=pD(t);e!==null;e=gD(e)){if(!(e[Z]&2))continue;let n=e[tl];for(let r=0;r<n.length;r++){let i=n[r];MT(i)}}}function qk(t,e,n){_e(18);let r=mn(e,t);qD(r,n),_e(19,r[$e])}function qD(t,e){Dg(t)&&Zp(t,e)}function Zp(t,e){let r=t[ne],i=t[Z],o=t[jt],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&Wf(o)),s||=!1,o&&(o.dirty=!1),t[Z]&=-9217,s)Hk(r,t,r.template,t[$e]);else if(i&8192){$D(t),zD(t,1);let a=r.components;a!==null&&WD(t,a,1),jD(t)}}function WD(t,e,n){for(let r=0;r<e.length;r++)qk(t,e[r],n)}function Wk(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)fi(~i);else{let o=i,s=n[++r],a=n[++r];jP(s,o);let u=e[o];_e(24,u),a(2,u),_e(25,u)}}}finally{fi(-1)}}function Jg(t,e){let n=VT()?64:1088;for(t[zn].changeDetectionScheduler?.notify(e);t;){t[Z]|=n;let r=hi(t);if(nl(t)&&!r)return t;t=r}return null}function GD(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function KD(t,e){let n=gt+e;if(n<t.length)return t[n]}function xl(t,e,n,r=!0){let i=e[ne];if(Gk(i,e,t,n),r){let s=Yp(n,t),a=e[ot],u=a.parentNode(t[di]);u!==null&&wk(i,t[en],a,e,u,s)}let o=e[ua];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function QD(t,e){let n=fa(t,e);return n!==void 0&&Ml(n[ne],n),n}function fa(t,e){if(t.length<=gt)return;let n=gt+e,r=t[n];if(r){let i=r[wo];i!==null&&i!==t&&Qg(i,r),e>0&&(t[n-1][Jt]=r[Jt]);let o=Yu(t,gt+e);Ek(r[ne],r);let s=o[To];s!==null&&s.detachView(o[ne]),r[mt]=null,r[Jt]=null,r[Z]&=-129}return r}function Gk(t,e,n,r){let i=gt+r,o=n.length;r>0&&(n[i-1][Jt]=e),r<o-gt?(e[Jt]=n[i],fT(n,gt+r,e)):(n.push(e),e[Jt]=null),e[mt]=n;let s=e[wo];s!==null&&n!==s&&YD(s,e);let a=e[To];a!==null&&a.insertView(t),Op(e),e[Z]|=128}function YD(t,e){let n=t[tl],r=e[mt];if(Dr(r))t[Z]|=2;else{let i=r[mt][Xt];e[Xt]!==i&&(t[Z]|=2)}n===null?t[tl]=[e]:n.push(e)}var pa=class{_lView;_cdRefInjectingView;notifyErrorHandler;_appRef=null;_attachedToViewContainer=!1;get rootNodes(){let e=this._lView,n=e[ne];return hl(n,e,n.firstChild,[])}constructor(e,n,r=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=r}get context(){return this._lView[$e]}set context(e){this._lView[$e]=e}get destroyed(){return xo(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[mt];if(Gn(e)){let n=e[el],r=n?n.indexOf(this):-1;r>-1&&(fa(e,r),Yu(n,r))}this._attachedToViewContainer=!1}Ml(this._lView[ne],this._lView)}onDestroy(e){PT(this._lView,e)}markForCheck(){Jg(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[Z]&=-129}reattach(){Op(this._lView),this._lView[Z]|=128}detectChanges(){this._lView[Z]|=1024,HD(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new j(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=nl(this._lView),n=this._lView[wo];n!==null&&!e&&Qg(n,this._lView),FD(this._lView[ne],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new j(902,!1);this._appRef=e;let n=nl(this._lView),r=this._lView[wo];r!==null&&!n&&YD(r,this._lView),Op(this._lView)}};var Xg=(()=>{class t{static __NG_ELEMENT_ID__=Yk}return t})(),Kk=Xg,Qk=class extends Kk{_declarationLView;_declarationTContainer;elementRef;constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,r){let i=Nl(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:n,dehydratedView:r});return new pa(i)}};function Yk(){return Zk($t(),ye())}function Zk(t,e){return t.type&4?new Qk(e,t,Al(t,e)):null}function em(t,e,n,r,i){let o=t.data[e];if(o===null)o=Jk(t,e,n,r,i),VP()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=r,o.attrs=i;let s=kP();o.injectorIndex=s===null?-1:s.injectorIndex}return Ia(o,!0),o}function Jk(t,e,n,r,i){let o=LT(),s=FT(),a=s?o:o&&o.parent,u=t.data[e]=eO(t,a,n,e,r,i);return Xk(t,u,o,s),u}function Xk(t,e,n,r){t.firstChild===null&&(t.firstChild=e),n!==null&&(r?n.child==null&&e.parent!==null&&(n.child=e):n.next===null&&(n.next=e,e.prev=n))}function eO(t,e,n,r,i,o){let s=e?e.injectorIndex:-1,a=0;return MP()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var eW=new RegExp(`^(\\d+)*(${Cx}|${bx})*(.*)`);var tO=()=>null;function ga(t,e){return tO(t,e)}var nO=class{},ZD=class{},Jp=class{resolveComponentFactory(e){throw Error(`No component factory found for ${Dt(e)}.`)}},kl=class{static NULL=new Jp},bo=class{},Ol=(()=>{class t{destroyNode=null;static __NG_ELEMENT_ID__=()=>rO()}return t})();function rO(){let t=ye(),e=$t(),n=mn(e.index,t);return(Dr(n)?n:t)[ot]}var iO=(()=>{class t{static \u0275prov=B({token:t,providedIn:"root",factory:()=>null})}return t})();var _p={},Xp=class{injector;parentInjector;constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=Il(r);let i=this.injector.get(e,_p,r);return i!==_p||n===_p?i:this.parentInjector.get(e,n,r)}};function Vw(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=pw(i,a);else if(o==2){let u=a,l=e[++s];r=pw(r,u+": "+l+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}function Pt(t,e=ee.Default){let n=ye();if(n===null)return G(t,e);let r=$t();return tD(r,n,pt(t),e)}function JD(){let t="invalid";throw new Error(t)}function XD(t,e,n,r,i){let o=r===null?null:{"":-1},s=i(t,n);if(s!==null){let a,u=null,l=null,h=sO(s);h===null?a=s:[a,u,l]=h,uO(t,e,n,a,o,u,l)}o!==null&&r!==null&&oO(n,r,o)}function oO(t,e,n){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let o=n[e[i+1]];if(o==null)throw new j(-301,!1);r.push(e[i],o)}}function sO(t){let e=null,n=!1;for(let s=0;s<t.length;s++){let a=t[s];if(s===0&&pn(a)&&(e=a),a.findHostDirectiveDefs!==null){n=!0;break}}if(!n)return null;let r=null,i=null,o=null;for(let s of t)s.findHostDirectiveDefs!==null&&(r??=[],i??=new Map,o??=new Map,aO(s,r,o,i)),s===e&&(r??=[],r.push(s));return r!==null?(r.push(...e===null?t:t.slice(1)),[r,i,o]):null}function aO(t,e,n,r){let i=e.length;t.findHostDirectiveDefs(t,e,r),n.set(t,[i,e.length-1])}function cO(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function uO(t,e,n,r,i,o,s){let a=r.length,u=!1;for(let m=0;m<a;m++){let y=r[m];!u&&pn(y)&&(u=!0,cO(t,n,m)),jp(sl(n,e),t,y.type)}gO(n,t.data.length,a);for(let m=0;m<a;m++){let y=r[m];y.providersResolver&&y.providersResolver(y)}let l=!1,h=!1,p=MD(t,e,a,null);a>0&&(n.directiveToIndex=new Map);for(let m=0;m<a;m++){let y=r[m];if(n.mergedAttrs=da(n.mergedAttrs,y.hostAttrs),dO(t,n,e,p,y),pO(p,y,i),s!==null&&s.has(y)){let[R,N]=s.get(y);n.directiveToIndex.set(y.type,[p,R+n.directiveStart,N+n.directiveStart])}else(o===null||!o.has(y))&&n.directiveToIndex.set(y.type,p);y.contentQueries!==null&&(n.flags|=4),(y.hostBindings!==null||y.hostAttrs!==null||y.hostVars!==0)&&(n.flags|=64);let w=y.type.prototype;!l&&(w.ngOnChanges||w.ngOnInit||w.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),l=!0),!h&&(w.ngOnChanges||w.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),h=!0),p++}lO(t,n,o)}function lO(t,e,n){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=t.data[r];if(n===null||!n.has(i))jw(0,e,i,r),jw(1,e,i,r),Bw(e,r,!1);else{let o=n.get(i);Uw(0,e,o,r),Uw(1,e,o,r),Bw(e,r,!0)}}}function jw(t,e,n,r){let i=t===0?n.inputs:n.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;t===0?s=e.inputs??={}:s=e.outputs??={},s[o]??=[],s[o].push(r),eb(e,o)}}function Uw(t,e,n,r){let i=t===0?n.inputs:n.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],a;t===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[s]??=[],a[s].push(r,o),eb(e,s)}}function eb(t,e){e==="class"?t.flags|=8:e==="style"&&(t.flags|=16)}function Bw(t,e,n){let{attrs:r,inputs:i,hostDirectiveInputs:o}=t;if(r===null||!n&&i===null||n&&o===null||Bg(t)){t.initialInputs??=[],t.initialInputs.push(null);return}let s=null,a=0;for(;a<r.length;){let u=r[a];if(u===0){a+=4;continue}else if(u===5){a+=2;continue}else if(typeof u=="number")break;if(!n&&i.hasOwnProperty(u)){let l=i[u];for(let h of l)if(h===e){s??=[],s.push(u,r[a+1]);break}}else if(n&&o.hasOwnProperty(u)){let l=o[u];for(let h=0;h<l.length;h+=2)if(l[h]===e){s??=[],s.push(l[h+1],r[a+1]);break}}a+=2}t.initialInputs??=[],t.initialInputs.push(s)}function dO(t,e,n,r,i){t.data[r]=i;let o=i.factory||(i.factory=ci(i.type,!0)),s=new pi(o,pn(i),Pt);t.blueprint[r]=s,n[r]=s,hO(t,e,r,MD(t,n,i.hostVars,Rr),i)}function hO(t,e,n,r,i){let o=i.hostBindings;if(o){let s=t.hostBindingOpCodes;s===null&&(s=t.hostBindingOpCodes=[]);let a=~e.index;fO(s)!=a&&s.push(a),s.push(n,r,o)}}function fO(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function pO(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;pn(e)&&(n[""]=t)}}function gO(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function tb(t,e,n,r,i,o,s,a){let u=e.consts,l=Do(u,s),h=em(e,t,2,r,l);return o&&XD(e,n,h,Do(u,a),i),h.mergedAttrs=da(h.mergedAttrs,h.attrs),h.attrs!==null&&Vw(h,h.attrs,!1),h.mergedAttrs!==null&&Vw(h,h.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,h),h}function nb(t,e){GT(t,e),DT(e)&&t.queries.elementEnd(e)}var fl=class extends kl{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=li(e);return new Co(n,this.ngModule)}};function mO(t){return Object.keys(t).map(e=>{let[n,r,i]=t[e],o={propName:n,templateName:e,isSignal:(r&Rl.SignalBased)!==0};return i&&(o.transform=i),o})}function yO(t){return Object.keys(t).map(e=>({propName:t[e],templateName:e}))}function vO(t,e,n){let r=e instanceof it?e:e?.injector;return r&&t.getStandaloneInjector!==null&&(r=t.getStandaloneInjector(r)||r),r?new Xp(n,r):n}function _O(t){let e=t.get(bo,null);if(e===null)throw new j(407,!1);let n=t.get(iO,null),r=t.get(gi,null);return{rendererFactory:e,sanitizer:n,changeDetectionScheduler:r}}function IO(t,e){let n=(t.selectors[0][0]||"div").toLowerCase();return SD(e,n,n==="svg"?EP:n==="math"?wP:null)}var Co=class extends ZD{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=mO(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=yO(this.componentDef.outputs),this.cachedOutputs}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=Yx(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!n}create(e,n,r,i){_e(22);let o=te(null);try{let s=this.componentDef,a=r?["ng-version","19.2.13"]:Zx(this.componentDef.selectors[0]),u=$g(0,null,null,1,0,null,null,null,null,[a],null),l=vO(s,i||this.ngModule,e),h=_O(l),p=h.rendererFactory.createRenderer(null,s),m=r?sk(p,r,s.encapsulation,l):IO(s,p),y=Hg(null,u,null,512|ND(s),null,null,h,p,l,null,ED(m,l,!0));y[bt]=m,bg(y);let w=null;try{let R=tb(bt,u,y,"#host",()=>[this.componentDef],!0,0);m&&(RD(p,m,R),wa(m,y)),qg(u,y,R),TD(u,R,y),nb(u,R),n!==void 0&&EO(R,this.ngContentSelectors,n),w=mn(R.index,y),y[$e]=w[$e],Gg(u,y,null)}catch(R){throw w!==null&&qp(w),qp(y),R}finally{_e(23),Cg()}return new eg(this.componentType,y)}finally{te(o)}}},eg=class extends nO{_rootLView;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,n){super(),this._rootLView=n,this._tNode=Tg(n[ne],bt),this.location=Al(this._tNode,n),this.instance=mn(this._tNode.index,n)[$e],this.hostView=this.changeDetectorRef=new pa(n,void 0,!1),this.componentType=e}setInput(e,n){let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let i=this._rootLView,o=Wg(r,i[ne],i,e,n);this.previousInputValues.set(e,n);let s=mn(r.index,i);Jg(s,1)}get injector(){return new ai(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function EO(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let o=n[i];r.push(o!=null&&o.length?Array.from(o):null)}}var Ta=(()=>{class t{static __NG_ELEMENT_ID__=wO}return t})();function wO(){let t=$t();return DO(t,ye())}var TO=Ta,rb=class extends TO{_lContainer;_hostTNode;_hostLView;constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return Al(this._hostTNode,this._hostLView)}get injector(){return new ai(this._hostTNode,this._hostLView)}get parentInjector(){let e=Rg(this._hostTNode,this._hostLView);if(QT(e)){let n=il(e,this._hostLView),r=rl(e),i=n[ne].data[r+8];return new ai(i,n)}else return new ai(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=$w(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-gt}createEmbeddedView(e,n,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=ga(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},o,s);return this.insertImpl(a,i,ha(this._hostTNode,s)),a}createComponent(e,n,r,i,o){let s=e&&!yP(e),a;if(s)a=n;else{let w=n||{};a=w.index,r=w.injector,i=w.projectableNodes,o=w.environmentInjector||w.ngModuleRef}let u=s?e:new Co(li(e)),l=r||this.parentInjector;if(!o&&u.ngModule==null){let R=(s?l:this.parentInjector).get(it,null);R&&(o=R)}let h=li(u.componentType??{}),p=ga(this._lContainer,h?.id??null),m=p?.firstChild??null,y=u.create(l,i,m,o);return this.insertImpl(y.hostView,a,ha(this._hostTNode,p)),y}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(bP(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let u=i[mt],l=new rb(u,u[en],u[mt]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(n),s=this._lContainer;return xl(s,i,o,r),e.attachToViewContainerRef(),fT(Ip(s),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=$w(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=fa(this._lContainer,n);r&&(Yu(Ip(this._lContainer),n),Ml(r[ne],r))}detach(e){let n=this._adjustIndex(e,-1),r=fa(this._lContainer,n);return r&&Yu(Ip(this._lContainer),n)!=null?new pa(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function $w(t){return t[el]}function Ip(t){return t[el]||(t[el]=[])}function DO(t,e){let n,r=e[t.index];return Gn(r)?n=r:(n=GD(r,e,null,t),e[t.index]=n,zg(e,n)),CO(n,e,t,r),new rb(n,t,e)}function bO(t,e){let n=t[ot],r=n.createComment(""),i=Kn(e,t),o=n.parentNode(i);return dl(n,o,r,n.nextSibling(i),!1),r}var CO=RO,SO=()=>!1;function AO(t,e,n){return SO(t,e,n)}function RO(t,e,n,r){if(t[di])return;let i;n.type&8?i=gn(r):i=bO(e,n),t[di]=i}var So=class{},tm=class{};var tg=class extends So{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new fl(this);constructor(e,n,r,i=!0){super(),this.ngModuleType=e,this._parent=n;let o=mT(e);this._bootstrapComponents=bD(o.bootstrap),this._r3Injector=iD(e,n,[{provide:So,useValue:this},{provide:kl,useValue:this.componentFactoryResolver},...r],Dt(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},ng=class extends tm{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new tg(this.moduleType,e,[])}};var pl=class extends So{injector;componentFactoryResolver=new fl(this);instance=null;constructor(e){super();let n=new ca([...e.providers,{provide:So,useValue:this},{provide:kl,useValue:this.componentFactoryResolver}],e.parent||Eg(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Da(t,e,n=null){return new pl({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var NO=(()=>{class t{_injector;cachedInjectors=new Map;constructor(n){this._injector=n}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){let r=yT(!1,n.type),i=r.length>0?Da([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,i)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=B({token:t,providedIn:"environment",factory:()=>new t(G(it))})}return t})();function ib(t){return ya(()=>{let e=sb(t),n=ve(F({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===hD.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(NO).getOrCreateStandaloneInjector(n):null,getExternalStyles:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||vn.Emulated,styles:t.styles||Vt,_:null,schemas:t.schemas||null,tView:null,id:""});e.standalone&&Ar("NgStandalone"),ab(n);let r=t.dependencies;return n.directiveDefs=Hw(r,!1),n.pipeDefs=Hw(r,!0),n.id=OO(n),n})}function MO(t){return li(t)||oP(t)}function PO(t){return t!==null}function Oo(t){return ya(()=>({type:t.type,bootstrap:t.bootstrap||Vt,declarations:t.declarations||Vt,imports:t.imports||Vt,exports:t.exports||Vt,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function xO(t,e){if(t==null)return ui;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],o,s,a,u;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o,u=i[3]||null):(o=i,s=i,a=Rl.None,u=null),n[o]=[r,a,u],e[o]=s}return n}function kO(t){if(t==null)return ui;let e={};for(let n in t)t.hasOwnProperty(n)&&(e[t[n]]=n);return e}function Lo(t){return ya(()=>{let e=sb(t);return ab(e),e})}function ob(t){return{type:t.type,name:t.name,factory:null,pure:t.pure!==!1,standalone:t.standalone??!0,onDestroy:t.type.prototype.ngOnDestroy||null}}function sb(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputConfig:t.inputs||ui,exportAs:t.exportAs||null,standalone:t.standalone??!0,signals:t.signals===!0,selectors:t.selectors||Vt,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:xO(t.inputs,e),outputs:kO(t.outputs),debugInfo:null}}function ab(t){t.features?.forEach(e=>e(t))}function Hw(t,e){if(!t)return null;let n=e?sP:MO;return()=>(typeof t=="function"?t():t).map(r=>n(r)).filter(PO)}function OO(t){let e=0,n=typeof t.consts=="function"?"":t.consts,r=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,n,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery];for(let o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function LO(t){return Object.getPrototypeOf(t.prototype).constructor}function FO(t){let e=LO(t.type),n=!0,r=[t];for(;e;){let i;if(pn(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new j(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);let s=t;s.inputs=Ep(t.inputs),s.declaredInputs=Ep(t.declaredInputs),s.outputs=Ep(t.outputs);let a=i.hostBindings;a&&$O(t,a);let u=i.viewQuery,l=i.contentQueries;if(u&&UO(t,u),l&&BO(t,l),VO(t,i),VM(t.outputs,i.outputs),pn(i)&&i.data.animation){let h=t.data;h.animation=(h.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(t),a===FO&&(n=!1)}}e=Object.getPrototypeOf(e)}jO(r)}function VO(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let r=e.inputs[n];r!==void 0&&(t.inputs[n]=r,t.declaredInputs[n]=e.declaredInputs[n])}}function jO(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){let i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=da(i.hostAttrs,n=da(n,i.hostAttrs))}}function Ep(t){return t===ui?{}:t===Vt?[]:t}function UO(t,e){let n=t.viewQuery;n?t.viewQuery=(r,i)=>{e(r,i),n(r,i)}:t.viewQuery=e}function BO(t,e){let n=t.contentQueries;n?t.contentQueries=(r,i,o)=>{e(r,i,o),n(r,i,o)}:t.contentQueries=e}function $O(t,e){let n=t.hostBindings;n?t.hostBindings=(r,i)=>{e(r,i),n(r,i)}:t.hostBindings=e}function cb(t,e,n){return t[e]=n}function br(t,e,n){let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function HO(t,e,n,r){let i=br(t,e,n);return br(t,e+1,r)||i}function zO(t,e,n,r,i,o,s,a,u){let l=e.consts,h=em(e,t,4,s||null,a||null);OT()&&XD(e,n,h,Do(l,u),OD),h.mergedAttrs=da(h.mergedAttrs,h.attrs),GT(e,h);let p=h.tView=$g(2,h,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,h),p.queries=e.queries.embeddedTView(h)),h}function rg(t,e,n,r,i,o,s,a,u,l){let h=n+bt,p=e.firstCreatePass?zO(h,e,t,r,i,o,s,a,u):e.data[h];Ia(p,!1);let m=WO(e,t,p,n);Sg()&&Yg(e,t,m,p),wa(m,t);let y=GD(m,t,m,p);return t[h]=y,zg(t,y),AO(y,p,t),wg(p)&&qg(e,t,p),u!=null&&kD(t,p,l),p}function qO(t,e,n,r,i,o,s,a){let u=ye(),l=Bt(),h=Do(l.consts,o);return rg(u,l,t,e,n,r,i,h,s,a),qO}var WO=GO;function GO(t,e,n,r){return Ag(!0),e[ot].createComment("")}var ub=(()=>{class t{log(n){console.log(n)}warn(n){console.warn(n)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();var lb=new U("");var KO=(()=>{class t{static \u0275prov=B({token:t,providedIn:"root",factory:()=>new ig})}return t})(),ig=class{queuedEffectCount=0;queues=new Map;schedule(e){this.enqueue(e)}remove(e){let n=e.zone,r=this.queues.get(n);r.has(e)&&(r.delete(e),this.queuedEffectCount--)}enqueue(e){let n=e.zone;this.queues.has(n)||this.queues.set(n,new Set);let r=this.queues.get(n);r.has(e)||(this.queuedEffectCount++,r.add(e))}flush(){for(;this.queuedEffectCount>0;)for(let[e,n]of this.queues)e===null?this.flushQueue(n):e.run(()=>this.flushQueue(n))}flushQueue(e){for(let n of e)e.delete(n),this.queuedEffectCount--,n.run()}};function ba(t){return!!t&&typeof t.then=="function"}function db(t){return!!t&&typeof t.subscribe=="function"}var hb=new U("");function nm(t){return _n([{provide:hb,multi:!0,useValue:t}])}var fb=(()=>{class t{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r});appInits=x(hb,{optional:!0})??[];injector=x(He);constructor(){}runInitializers(){if(this.initialized)return;let n=[];for(let i of this.appInits){let o=st(this.injector,i);if(ba(o))n.push(o);else if(db(o)){let s=new Promise((a,u)=>{o.subscribe({complete:a,error:u})});n.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),n.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||t)};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Ll=new U("");function QO(){Qf(()=>{throw new j(600,!1)})}function YO(t){return t.isBoundToModule}var ZO=10;var mi=(()=>{class t{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=x(mx);afterRenderManager=x(ID);zonelessEnabled=x(Mg);rootEffectScheduler=x(KO);dirtyFlags=0;tracingSnapshot=null;externalTestViews=new Set;afterTick=new Ye;get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];isStable=x(_i).hasPendingTasks.pipe(se(n=>!n));constructor(){x(ko,{optional:!0})}whenStable(){let n;return new Promise(r=>{n=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{n.unsubscribe()})}_injector=x(it);_rendererFactory=null;get injector(){return this._injector}bootstrap(n,r){return this.bootstrapImpl(n,r)}bootstrapImpl(n,r,i=He.NULL){_e(10);let o=n instanceof ZD;if(!this._injector.get(fb).done){let y="";throw new j(405,y)}let a;o?a=n:a=this._injector.get(kl).resolveComponentFactory(n),this.componentTypes.push(a.componentType);let u=YO(a)?void 0:this._injector.get(So),l=r||a.selector,h=a.create(i,[],l,u),p=h.location.nativeElement,m=h.injector.get(lb,null);return m?.registerApplication(p),h.onDestroy(()=>{this.detachView(h.hostView),qu(this.components,h),m?.unregisterApplication(p)}),this._loadComponent(h),_e(11,h),h}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){_e(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(Vg.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new j(101,!1);let n=te(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,te(n),this.afterTick.next(),_e(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(bo,null,{optional:!0}));let n=0;for(;this.dirtyFlags!==0&&n++<ZO;)_e(14),this.synchronizeOnce(),_e(15)}synchronizeOnce(){if(this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush()),this.dirtyFlags&7){let n=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:r,notifyErrorHandler:i}of this.allViews)JO(r,i,n,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}else this._rendererFactory?.begin?.(),this._rendererFactory?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:n})=>bl(n))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(n){let r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){let r=n;qu(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n),this._injector.get(Ll,[]).forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>qu(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new j(406,!1);let n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||t)};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function qu(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function JO(t,e,n,r){if(!n&&!bl(t))return;HD(t,e,n&&!r?0:1)}function XO(t,e,n,r){return br(t,Cl(),n)?e+yg(n)+r:Rr}function Bu(t,e){return t<<17|e<<2}function yi(t){return t>>17&32767}function e1(t){return(t&2)==2}function t1(t,e){return t&131071|e<<17}function og(t){return t|2}function Ao(t){return(t&131068)>>2}function wp(t,e){return t&-131069|e<<2}function n1(t){return(t&1)===1}function sg(t){return t|1}function r1(t,e,n,r,i,o){let s=o?e.classBindings:e.styleBindings,a=yi(s),u=Ao(s);t[r]=n;let l=!1,h;if(Array.isArray(n)){let p=n;h=p[1],(h===null||va(p,h)>0)&&(l=!0)}else h=n;if(i)if(u!==0){let m=yi(t[a+1]);t[r+1]=Bu(m,a),m!==0&&(t[m+1]=wp(t[m+1],r)),t[a+1]=t1(t[a+1],r)}else t[r+1]=Bu(a,0),a!==0&&(t[a+1]=wp(t[a+1],r)),a=r;else t[r+1]=Bu(u,0),a===0?a=r:t[u+1]=wp(t[u+1],r),u=r;l&&(t[r+1]=og(t[r+1])),zw(t,h,r,!0),zw(t,h,r,!1),i1(e,h,t,r,o),s=Bu(a,u),o?e.classBindings=s:e.styleBindings=s}function i1(t,e,n,r,i){let o=i?t.residualClasses:t.residualStyles;o!=null&&typeof e=="string"&&va(o,e)>=0&&(n[r+1]=sg(n[r+1]))}function zw(t,e,n,r){let i=t[n+1],o=e===null,s=r?yi(i):Ao(i),a=!1;for(;s!==0&&(a===!1||o);){let u=t[s],l=t[s+1];o1(u,e)&&(a=!0,t[s+1]=r?sg(l):og(l)),s=r?yi(l):Ao(l)}a&&(t[n+1]=r?og(i):sg(i))}function o1(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?va(t,e)>=0:!1}function s1(t,e,n){let r=ye(),i=Cl();if(br(r,i,e)){let o=Bt(),s=zP();lk(o,s,r,t,e,r[ot],n,!1)}return s1}function qw(t,e,n,r,i){Wg(e,t,n,i?"class":"style",r)}function a1(t,e){return c1(t,e,null,!0),a1}function c1(t,e,n,r){let i=ye(),o=Bt(),s=FP(2);if(o.firstUpdatePass&&l1(o,t,s,r),e!==Rr&&br(i,s,e)){let a=o.data[vi()];g1(o,a,i,i[ot],t,i[s+1]=m1(e,n),r,s)}}function u1(t,e){return e>=t.expandoStartIndex}function l1(t,e,n,r){let i=t.data;if(i[n+1]===null){let o=i[vi()],s=u1(t,n);y1(o,r)&&e===null&&!s&&(e=!1),e=d1(i,o,e,r),r1(i,o,e,n,s,r)}}function d1(t,e,n,r){let i=BP(t),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=Tp(null,t,e,n,r),n=ma(n,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||t[s]!==i)if(n=Tp(i,t,e,n,r),o===null){let u=h1(t,e,r);u!==void 0&&Array.isArray(u)&&(u=Tp(null,t,e,u[1],r),u=ma(u,e.attrs,r),f1(t,e,r,u))}else o=p1(t,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),n}function h1(t,e,n){let r=n?e.classBindings:e.styleBindings;if(Ao(r)!==0)return t[yi(r)]}function f1(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[yi(i)]=r}function p1(t,e,n){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=t[o].hostAttrs;r=ma(r,s,n)}return ma(r,e.attrs,n)}function Tp(t,e,n,r,i){let o=null,s=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<s&&(o=e[a],r=ma(r,o.hostAttrs,i),o!==t);)a++;return t!==null&&(n.directiveStylingLast=a),r}function ma(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),rP(t,s,n?!0:e[++o]))}return t===void 0?null:t}function g1(t,e,n,r,i,o,s,a){if(!(e.type&3))return;let u=t.data,l=u[a+1],h=n1(l)?Ww(u,e,n,i,Ao(l),s):void 0;if(!gl(h)){gl(o)||e1(l)&&(o=Ww(u,null,n,i,a,s));let p=RT(vi(),n);xk(r,s,p,i,o)}}function Ww(t,e,n,r,i,o){let s=e===null,a;for(;i>0;){let u=t[i],l=Array.isArray(u),h=l?u[1]:u,p=h===null,m=n[i+1];m===Rr&&(m=p?Vt:void 0);let y=p?fp(m,r):h===r?m:void 0;if(l&&!gl(y)&&(y=fp(u,r)),gl(y)&&(a=y,s))return a;let w=t[i+1];i=s?yi(w):Ao(w)}if(e!==null){let u=o?e.residualClasses:e.residualStyles;u!=null&&(a=fp(u,r))}return a}function gl(t){return t!==void 0}function m1(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=Dt(Ug(t)))),t}function y1(t,e){return(t.flags&(e?8:16))!==0}var ag=class{destroy(e){}updateValue(e,n){}swap(e,n){let r=Math.min(e,n),i=Math.max(e,n),o=this.detach(i);if(i-r>1){let s=this.detach(r);this.attach(r,o),this.attach(i,s)}else this.attach(r,o)}move(e,n){this.attach(n,this.detach(e))}};function Dp(t,e,n,r,i){return t===n&&Object.is(e,r)?1:Object.is(i(t,e),i(n,r))?-1:0}function v1(t,e,n){let r,i,o=0,s=t.length-1,a=void 0;if(Array.isArray(e)){let u=e.length-1;for(;o<=s&&o<=u;){let l=t.at(o),h=e[o],p=Dp(o,l,o,h,n);if(p!==0){p<0&&t.updateValue(o,h),o++;continue}let m=t.at(s),y=e[u],w=Dp(s,m,u,y,n);if(w!==0){w<0&&t.updateValue(s,y),s--,u--;continue}let R=n(o,l),N=n(s,m),O=n(o,h);if(Object.is(O,N)){let $=n(u,y);Object.is($,R)?(t.swap(o,s),t.updateValue(s,y),u--,s--):t.move(s,o),t.updateValue(o,h),o++;continue}if(r??=new ml,i??=Kw(t,o,s,n),cg(t,r,o,O))t.updateValue(o,h),o++,s++;else if(i.has(O))r.set(R,t.detach(o)),s--;else{let $=t.create(o,e[o]);t.attach(o,$),o++,s++}}for(;o<=u;)Gw(t,r,n,o,e[o]),o++}else if(e!=null){let u=e[Symbol.iterator](),l=u.next();for(;!l.done&&o<=s;){let h=t.at(o),p=l.value,m=Dp(o,h,o,p,n);if(m!==0)m<0&&t.updateValue(o,p),o++,l=u.next();else{r??=new ml,i??=Kw(t,o,s,n);let y=n(o,p);if(cg(t,r,o,y))t.updateValue(o,p),o++,s++,l=u.next();else if(!i.has(y))t.attach(o,t.create(o,p)),o++,s++,l=u.next();else{let w=n(o,h);r.set(w,t.detach(o)),s--}}}for(;!l.done;)Gw(t,r,n,t.length,l.value),l=u.next()}for(;o<=s;)t.destroy(t.detach(s--));r?.forEach(u=>{t.destroy(u)})}function cg(t,e,n,r){return e!==void 0&&e.has(r)?(t.attach(n,e.get(r)),e.delete(r),!0):!1}function Gw(t,e,n,r,i){if(cg(t,e,r,n(r,i)))t.updateValue(r,i);else{let o=t.create(r,i);t.attach(r,o)}}function Kw(t,e,n,r){let i=new Set;for(let o=e;o<=n;o++)i.add(r(o,t.at(o)));return i}var ml=class{kvMap=new Map;_vMap=void 0;has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let n=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(n)?(this.kvMap.set(e,this._vMap.get(n)),this._vMap.delete(n)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,n){if(this.kvMap.has(e)){let r=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let i=this._vMap;for(;i.has(r);)r=i.get(r);i.set(r,n)}else this.kvMap.set(e,n)}forEach(e){for(let[n,r]of this.kvMap)if(e(r,n),this._vMap!==void 0){let i=this._vMap;for(;i.has(r);)r=i.get(r),e(r,n)}}};function aW(t,e){Ar("NgControlFlow");let n=ye(),r=Cl(),i=n[r]!==Rr?n[r]:-1,o=i!==-1?yl(n,bt+i):void 0,s=0;if(br(n,r,t)){let a=te(null);try{if(o!==void 0&&QD(o,s),t!==-1){let u=bt+t,l=yl(n,u),h=hg(n[ne],u),p=ga(l,h.tView.ssrId),m=Nl(n,h,e,{dehydratedView:p});xl(l,m,s,ha(h,p))}}finally{te(a)}}else if(o!==void 0){let a=KD(o,s);a!==void 0&&(a[$e]=e)}}var ug=class{lContainer;$implicit;$index;constructor(e,n,r){this.lContainer=e,this.$implicit=n,this.$index=r}get $count(){return this.lContainer.length-gt}};function cW(t){return t}var lg=class{hasEmptyBlock;trackByFn;liveCollection;constructor(e,n,r){this.hasEmptyBlock=e,this.trackByFn=n,this.liveCollection=r}};function uW(t,e,n,r,i,o,s,a,u,l,h,p,m){Ar("NgControlFlow");let y=ye(),w=Bt(),R=u!==void 0,N=ye(),O=a?s.bind(N[Xt][$e]):s,$=new lg(R,O);N[bt+t]=$,rg(y,w,t+1,e,n,r,i,Do(w.consts,o)),R&&rg(y,w,t+2,u,l,h,p,Do(w.consts,m))}var dg=class extends ag{lContainer;hostLView;templateTNode;operationsCounter=void 0;needsIndexUpdate=!1;constructor(e,n,r){super(),this.lContainer=e,this.hostLView=n,this.templateTNode=r}get length(){return this.lContainer.length-gt}at(e){return this.getLView(e)[$e].$implicit}attach(e,n){let r=n[ua];this.needsIndexUpdate||=e!==this.length,xl(this.lContainer,n,e,ha(this.templateTNode,r))}detach(e){return this.needsIndexUpdate||=e!==this.length-1,_1(this.lContainer,e)}create(e,n){let r=ga(this.lContainer,this.templateTNode.tView.ssrId),i=Nl(this.hostLView,this.templateTNode,new ug(this.lContainer,n,e),{dehydratedView:r});return this.operationsCounter?.recordCreate(),i}destroy(e){Ml(e[ne],e),this.operationsCounter?.recordDestroy()}updateValue(e,n){this.getLView(e)[$e].$implicit=n}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[$e].$index=e}getLView(e){return I1(this.lContainer,e)}};function lW(t){let e=te(null),n=vi();try{let r=ye(),i=r[ne],o=r[n],s=n+1,a=yl(r,s);if(o.liveCollection===void 0){let l=hg(i,s);o.liveCollection=new dg(a,r,l)}else o.liveCollection.reset();let u=o.liveCollection;if(v1(u,t,o.trackByFn),u.updateIndexes(),o.hasEmptyBlock){let l=Cl(),h=u.length===0;if(br(r,l,h)){let p=n+2,m=yl(r,p);if(h){let y=hg(i,p),w=ga(m,y.tView.ssrId),R=Nl(r,y,void 0,{dehydratedView:w});xl(m,R,0,ha(y,w))}else QD(m,0)}}}finally{te(e)}}function yl(t,e){return t[e]}function _1(t,e){return fa(t,e)}function I1(t,e){return KD(t,e)}function hg(t,e){return Tg(t,e)}function pb(t,e,n,r){let i=ye(),o=Bt(),s=bt+t,a=i[ot],u=o.firstCreatePass?tb(s,o,i,e,OD,OT(),n,r):o.data[s],l=E1(o,i,u,a,e,t);i[s]=l;let h=wg(u);return Ia(u,!0),RD(a,l,u),!LD(u)&&Sg()&&Yg(o,i,l,u),(AP()===0||h)&&wa(l,i),RP(),h&&(qg(o,i,u),TD(o,u,i)),r!==null&&kD(i,u),pb}function gb(){let t=$t();FT()?OP():(t=t.parent,Ia(t,!1));let e=t;PP(e)&&xP(),NP();let n=Bt();return n.firstCreatePass&&nb(n,e),e.classesWithoutHost!=null&&KP(e)&&qw(n,e,ye(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&QP(e)&&qw(n,e,ye(),e.stylesWithoutHost,!1),gb}function rm(t,e,n,r){return pb(t,e,n,r),gb(),rm}var E1=(t,e,n,r,i,o)=>(Ag(!0),SD(r,i,qP()));function dW(){return ye()}var oi=void 0;function w1(t){let e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return e===1&&n===0?1:5}var T1=["en",[["a","p"],["AM","PM"],oi],[["AM","PM"],oi,oi],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],oi,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],oi,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",oi,"{1} 'at' {0}",oi],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",w1],bp={};function Ht(t){let e=D1(t),n=Qw(e);if(n)return n;let r=e.split("-")[0];if(n=Qw(r),n)return n;if(r==="en")return T1;throw new j(701,!1)}function Qw(t){return t in bp||(bp[t]=ra.ng&&ra.ng.common&&ra.ng.common.locales&&ra.ng.common.locales[t]),bp[t]}var ke=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}(ke||{});function D1(t){return t.toLowerCase().replace(/_/g,"-")}var vl="en-US";var b1=vl;function C1(t){typeof t=="string"&&(b1=t.toLowerCase().replace(/_/g,"-"))}function Yw(t,e,n){return function r(i){if(i===Function)return n;let o=Po(t)?mn(t.index,e):e;Jg(o,5);let s=e[$e],a=Zw(e,s,n,i),u=r.__ngNextListenerFn__;for(;u;)a=Zw(e,s,u,i)&&a,u=u.__ngNextListenerFn__;return a}}function Zw(t,e,n,r){let i=te(null);try{return _e(6,e,n),n(r)!==!1}catch(o){return S1(t,o),!1}finally{_e(7,e,n),te(i)}}function S1(t,e){let n=t[Eo],r=n?n.get(yn,null):null;r&&r.handleError(e)}function Jw(t,e,n,r,i,o){let s=e[n],a=e[ne],l=a.data[n].outputs[r],h=s[l],p=a.firstCreatePass?kT(a):null,m=xT(e),y=h.subscribe(o),w=m.length;m.push(o,y),p&&p.push(i,t.index,w,-(w+1))}function mb(t,e,n,r){let i=ye(),o=Bt(),s=$t();return R1(o,i,i[ot],s,t,e,r),mb}function A1(t,e,n,r){let i=t.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===n&&i[o+1]===r){let a=e[Ju],u=i[o+2];return a.length>u?a[u]:null}typeof s=="string"&&(o+=2)}return null}function R1(t,e,n,r,i,o,s){let a=wg(r),l=t.firstCreatePass?kT(t):null,h=xT(e),p=!0;if(r.type&3||s){let m=Kn(r,e),y=s?s(m):m,w=h.length,R=s?O=>s(gn(O[r.index])):r.index,N=null;if(!s&&a&&(N=A1(t,e,i,r.index)),N!==null){let O=N.__ngLastListenerFn__||N;O.__ngNextListenerFn__=o,N.__ngLastListenerFn__=o,p=!1}else{o=Yw(r,e,o),kx(e,y,i,o);let O=n.listen(y,i,o);h.push(o,O),l&&l.push(i,R,w,w+1)}}else o=Yw(r,e,o);if(p){let m=r.outputs?.[i],y=r.hostDirectiveOutputs?.[i];if(y&&y.length)for(let w=0;w<y.length;w+=2){let R=y[w],N=y[w+1];Jw(r,e,R,N,i,o)}if(m&&m.length)for(let w of m)Jw(r,e,w,i,i,o)}}function hW(t=1){return HP(t)}function fW(t,e=""){let n=ye(),r=Bt(),i=t+bt,o=r.firstCreatePass?em(r,i,1,e,null):r.data[i],s=N1(r,n,o,e,t);n[i]=s,Sg()&&Yg(r,n,s,o),Ia(o,!1)}var N1=(t,e,n,r,i)=>(Ag(!0),Jx(e[ot],r));function M1(t){return yb("",t,""),M1}function yb(t,e,n){let r=ye(),i=XO(r,t,e,n);return i!==Rr&&P1(r,vi(),i),yb}function P1(t,e,n){let r=RT(e,t);Xx(t[ot],r,n)}function x1(t,e,n){let r=Bt();if(r.firstCreatePass){let i=pn(t);fg(n,r.data,r.blueprint,i,!0),fg(e,r.data,r.blueprint,i,!1)}}function fg(t,e,n,r,i){if(t=pt(t),Array.isArray(t))for(let o=0;o<t.length;o++)fg(t[o],e,n,r,i);else{let o=Bt(),s=ye(),a=$t(),u=Io(t)?t:pt(t.provide),l=IT(t),h=a.providerIndexes&1048575,p=a.directiveStart,m=a.providerIndexes>>20;if(Io(t)||!t.multi){let y=new pi(l,i,Pt),w=Sp(u,e,i?h:h+m,p);w===-1?(jp(sl(a,s),o,u),Cp(o,t,e.length),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(y),s.push(y)):(n[w]=y,s[w]=y)}else{let y=Sp(u,e,h+m,p),w=Sp(u,e,h,h+m),R=y>=0&&n[y],N=w>=0&&n[w];if(i&&!N||!i&&!R){jp(sl(a,s),o,u);let O=L1(i?O1:k1,n.length,i,r,l);!i&&N&&(n[w].providerFactory=O),Cp(o,t,e.length,0),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(O),s.push(O)}else{let O=vb(n[i?w:y],l,!i&&r);Cp(o,t,y>-1?y:w,O)}!i&&r&&N&&n[w].componentProviders++}}}function Cp(t,e,n,r){let i=Io(e),o=dP(e);if(i||o){let u=(o?pt(e.useClass):e).prototype.ngOnDestroy;if(u){let l=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){let h=l.indexOf(n);h===-1?l.push(n,[r,u]):l[h+1].push(r,u)}else l.push(n,u)}}}function vb(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function Sp(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function k1(t,e,n,r,i){return pg(this.multi,[])}function O1(t,e,n,r,i){let o=this.multi,s;if(this.providerFactory){let a=this.providerFactory.componentProviders,u=al(r,r[ne],this.providerFactory.index,i);s=u.slice(0,a),pg(o,s);for(let l=a;l<u.length;l++)s.push(u[l])}else s=[],pg(o,s);return s}function pg(t,e){for(let n=0;n<t.length;n++){let r=t[n];e.push(r())}return e}function L1(t,e,n,r,i){let o=new pi(t,n,Pt);return o.multi=[],o.index=e,o.componentProviders=0,vb(o,i,r&&!n),o}function pW(t,e=[]){return n=>{n.providersResolver=(r,i)=>x1(r,i?i(t):t,e)}}function gW(t,e,n,r){return F1(ye(),jT(),t,e,n,r)}function _b(t,e){let n=t[e];return n===Rr?void 0:n}function F1(t,e,n,r,i,o){let s=e+n;return br(t,s,i)?cb(t,s+1,o?r.call(o,i):r(i)):_b(t,s+1)}function V1(t,e,n,r,i,o,s){let a=e+n;return HO(t,a,i,o)?cb(t,a+2,s?r.call(s,i,o):r(i,o)):_b(t,a+2)}function mW(t,e){let n=Bt(),r,i=t+bt;n.firstCreatePass?(r=j1(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks??=[]).push(i,r.onDestroy)):r=n.data[i];let o=r.factory||(r.factory=ci(r.type,!0)),s,a=wt(Pt);try{let u=ol(!1),l=o();return ol(u),DP(n,ye(),i,l),l}finally{wt(a)}}function j1(t,e){if(e)for(let n=e.length-1;n>=0;n--){let r=e[n];if(t===r.name)return r}}function yW(t,e,n,r){let i=t+bt,o=ye(),s=TP(o,i);return U1(o,i)?V1(o,jT(),e,s.transform,n,r,s):s.transform(n,r)}function U1(t,e){return t[ne].data[e].pure}var Ro=class{full;major;minor;patch;constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},Ib=new Ro("19.2.13"),gg=class{ngModuleFactory;componentFactories;constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},Eb=(()=>{class t{compileModuleSync(n){return new ng(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){let r=this.compileModuleSync(n),i=mT(n),o=bD(i.declarations).reduce((s,a)=>{let u=li(a);return u&&s.push(new Co(u)),s},[]);return new gg(r,o)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static \u0275fac=function(r){return new(r||t)};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var B1=(()=>{class t{zone=x(fe);changeDetectionScheduler=x(gi);applicationRef=x(mi);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||t)};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),$1=new U("",{factory:()=>!1});function wb({ngZoneFactory:t,ignoreChangesOutsideZone:e,scheduleInRootZone:n}){return t??=()=>new fe(ve(F({},Tb()),{scheduleInRootZone:n})),[{provide:fe,useFactory:t},{provide:aa,multi:!0,useFactory:()=>{let r=x(B1,{optional:!0});return()=>r.initialize()}},{provide:aa,multi:!0,useFactory:()=>{let r=x(H1);return()=>{r.initialize()}}},e===!0?{provide:sD,useValue:!0}:[],{provide:aD,useValue:n??oD}]}function vW(t){let e=t?.ignoreChangesOutsideZone,n=t?.scheduleInRootZone,r=wb({ngZoneFactory:()=>{let i=Tb(t);return i.scheduleInRootZone=n,i.shouldCoalesceEventChangeDetection&&Ar("NgZone_CoalesceEvent"),new fe(i)},ignoreChangesOutsideZone:e,scheduleInRootZone:n});return _n([{provide:$1,useValue:!0},{provide:Mg,useValue:!1},r])}function Tb(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var H1=(()=>{class t{subscription=new Ne;initialized=!1;zone=x(fe);pendingTasks=x(_i);initialize(){if(this.initialized)return;this.initialized=!0;let n=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(n=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{fe.assertNotInAngularZone(),queueMicrotask(()=>{n!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(n),n=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{fe.assertInAngularZone(),n??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||t)};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var z1=(()=>{class t{appRef=x(mi);taskService=x(_i);ngZone=x(fe);zonelessEnabled=x(Mg);tracing=x(ko,{optional:!0});disableScheduling=x(sD,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new Ne;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(ul):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(x(aD,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof zp||!this.zoneIsDefined)}notify(n){if(!this.zonelessEnabled&&n===5)return;let r=!1;switch(n){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{this.appRef.dirtyFlags|=16,r=!0;break}case 13:{this.appRef.dirtyFlags|=2,r=!0;break}case 11:{r=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let i=this.useMicrotaskScheduler?Rw:cD;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(n){return!(this.disableScheduling&&!n||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(ul+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let n=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(n),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,Rw(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(n)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let n=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(n)}}static \u0275fac=function(r){return new(r||t)};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function q1(){return typeof $localize<"u"&&$localize.locale||vl}var Fl=new U("",{providedIn:"root",factory:()=>x(Fl,ee.Optional|ee.SkipSelf)||q1()});var mg=new U(""),W1=new U("");function na(t){return!t.moduleRef}function G1(t){let e=na(t)?t.r3Injector:t.moduleRef.injector,n=e.get(fe);return n.run(()=>{na(t)?t.r3Injector.resolveInjectorInitializers():t.moduleRef.resolveInjectorInitializers();let r=e.get(yn,null),i;if(n.runOutsideAngular(()=>{i=n.onError.subscribe({next:o=>{r.handleError(o)}})}),na(t)){let o=()=>e.destroy(),s=t.platformInjector.get(mg);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>t.moduleRef.destroy(),s=t.platformInjector.get(mg);s.add(o),t.moduleRef.onDestroy(()=>{qu(t.allPlatformModules,t.moduleRef),i.unsubscribe(),s.delete(o)})}return Q1(r,n,()=>{let o=e.get(fb);return o.runInitializers(),o.donePromise.then(()=>{let s=e.get(Fl,vl);if(C1(s||vl),!e.get(W1,!0))return na(t)?e.get(mi):(t.allPlatformModules.push(t.moduleRef),t.moduleRef);if(na(t)){let u=e.get(mi);return t.rootComponent!==void 0&&u.bootstrap(t.rootComponent),u}else return K1(t.moduleRef,t.allPlatformModules),t.moduleRef})})})}function K1(t,e){let n=t.injector.get(mi);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(r=>n.bootstrap(r));else if(t.instance.ngDoBootstrap)t.instance.ngDoBootstrap(n);else throw new j(-403,!1);e.push(t)}function Q1(t,e,n){try{let r=n();return ba(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}var Wu=null;function Y1(t=[],e){return He.create({name:e,providers:[{provide:El,useValue:"platform"},{provide:mg,useValue:new Set([()=>Wu=null])},...t]})}function Z1(t=[]){if(Wu)return Wu;let e=Y1(t);return Wu=e,QO(),J1(e),e}function J1(t){let e=t.get(Lg,null);st(t,()=>{e?.forEach(n=>n())})}function im(){return!1}var Ca=(()=>{class t{static __NG_ELEMENT_ID__=X1}return t})();function X1(t){return eL($t(),ye(),(t&16)===16)}function eL(t,e,n){if(Po(t)&&!n){let r=mn(t.index,e);return new pa(r,r)}else if(t.type&175){let r=e[Xt];return new pa(r,e)}return null}function Db(t){_e(8);try{let{rootComponent:e,appProviders:n,platformProviders:r}=t,i=Z1(r),o=[wb({}),{provide:gi,useExisting:z1},...n||[]],s=new pl({providers:o,parent:i,debugName:"",runEnvironmentInitializers:!1});return G1({r3Injector:s.injector,platformInjector:i,rootComponent:e})}catch(e){return Promise.reject(e)}finally{_e(9)}}function bb(t){return Jf(t)}function Cb(t,e){return Kf(t,e?.equal)}var Xw=class{[Qt];constructor(e){this[Qt]=e}destroy(){this[Qt].destroy()}};function Sb(t){let e=li(t);if(!e)return null;let n=new Co(e);return{get selector(){return n.selector},get type(){return n.componentType},get inputs(){return n.inputs},get outputs(){return n.outputs},get ngContentSelectors(){return n.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var qe=new U("");var Nb=null;function Qn(){return Nb}function om(t){Nb??=t}var Sa=class{},Aa=(()=>{class t{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||t)};static \u0275prov=B({token:t,factory:()=>x(Mb),providedIn:"platform"})}return t})(),sm=new U(""),Mb=(()=>{class t extends Aa{_location;_history;_doc=x(qe);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Qn().getBaseHref(this._doc)}onPopState(n){let r=Qn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){let r=Qn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,i){this._history.pushState(n,r,i)}replaceState(n,r,i){this._history.replaceState(n,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||t)};static \u0275prov=B({token:t,factory:()=>new t,providedIn:"platform"})}return t})();function Vl(t,e){return t?e?t.endsWith("/")?e.startsWith("/")?t+e.slice(1):t+e:e.startsWith("/")?t+e:`${t}/${e}`:t:e}function Ab(t){let e=t.search(/#|\?|$/);return t[e-1]==="/"?t.slice(0,e-1)+t.slice(e):t}function tn(t){return t&&t[0]!=="?"?`?${t}`:t}var Yn=(()=>{class t{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||t)};static \u0275prov=B({token:t,factory:()=>x(Ul),providedIn:"root"})}return t})(),jl=new U(""),Ul=(()=>{class t extends Yn{_platformLocation;_baseHref;_removeListenerFns=[];constructor(n,r){super(),this._platformLocation=n,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??x(qe).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return Vl(this._baseHref,n)}path(n=!1){let r=this._platformLocation.pathname+tn(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,o){let s=this.prepareExternalUrl(i+tn(o));this._platformLocation.pushState(n,r,s)}replaceState(n,r,i,o){let s=this.prepareExternalUrl(i+tn(o));this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static \u0275fac=function(r){return new(r||t)(G(Aa),G(jl,8))};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Mr=(()=>{class t{_subject=new Ye;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(n){this._locationStrategy=n;let r=this._locationStrategy.getBaseHref();this._basePath=rL(Ab(Rb(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+tn(r))}normalize(n){return t.stripTrailingSlash(nL(this._basePath,Rb(n)))}prepareExternalUrl(n){return n&&n[0]!=="/"&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+tn(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+tn(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=tn;static joinWithSlash=Vl;static stripTrailingSlash=Ab;static \u0275fac=function(r){return new(r||t)(G(Yn))};static \u0275prov=B({token:t,factory:()=>tL(),providedIn:"root"})}return t})();function tL(){return new Mr(G(Yn))}function nL(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function Rb(t){return t.replace(/\/index.html$/,"")}function rL(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}var dm=(()=>{class t extends Yn{_platformLocation;_baseHref="";_removeListenerFns=[];constructor(n,r){super(),this._platformLocation=n,r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}path(n=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(n){let r=Vl(this._baseHref,n);return r.length>0?"#"+r:r}pushState(n,r,i,o){let s=this.prepareExternalUrl(i+tn(o))||this._platformLocation.pathname;this._platformLocation.pushState(n,r,s)}replaceState(n,r,i,o){let s=this.prepareExternalUrl(i+tn(o))||this._platformLocation.pathname;this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static \u0275fac=function(r){return new(r||t)(G(Aa),G(jl,8))};static \u0275prov=B({token:t,factory:t.\u0275fac})}return t})();var at=function(t){return t[t.Format=0]="Format",t[t.Standalone=1]="Standalone",t}(at||{}),Ie=function(t){return t[t.Narrow=0]="Narrow",t[t.Abbreviated=1]="Abbreviated",t[t.Wide=2]="Wide",t[t.Short=3]="Short",t}(Ie||{}),Ct=function(t){return t[t.Short=0]="Short",t[t.Medium=1]="Medium",t[t.Long=2]="Long",t[t.Full=3]="Full",t}(Ct||{}),Jn={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function Ob(t){return Ht(t)[ke.LocaleId]}function Lb(t,e,n){let r=Ht(t),i=[r[ke.DayPeriodsFormat],r[ke.DayPeriodsStandalone]],o=zt(i,e);return zt(o,n)}function Fb(t,e,n){let r=Ht(t),i=[r[ke.DaysFormat],r[ke.DaysStandalone]],o=zt(i,e);return zt(o,n)}function Vb(t,e,n){let r=Ht(t),i=[r[ke.MonthsFormat],r[ke.MonthsStandalone]],o=zt(i,e);return zt(o,n)}function jb(t,e){let r=Ht(t)[ke.Eras];return zt(r,e)}function Ra(t,e){let n=Ht(t);return zt(n[ke.DateFormat],e)}function Na(t,e){let n=Ht(t);return zt(n[ke.TimeFormat],e)}function Ma(t,e){let r=Ht(t)[ke.DateTimeFormat];return zt(r,e)}function Pa(t,e){let n=Ht(t),r=n[ke.NumberSymbols][e];if(typeof r>"u"){if(e===Jn.CurrencyDecimal)return n[ke.NumberSymbols][Jn.Decimal];if(e===Jn.CurrencyGroup)return n[ke.NumberSymbols][Jn.Group]}return r}function Ub(t){if(!t[ke.ExtraData])throw new Error(`Missing extra locale data for the locale "${t[ke.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function Bb(t){let e=Ht(t);return Ub(e),(e[ke.ExtraData][2]||[]).map(r=>typeof r=="string"?am(r):[am(r[0]),am(r[1])])}function $b(t,e,n){let r=Ht(t);Ub(r);let i=[r[ke.ExtraData][0],r[ke.ExtraData][1]],o=zt(i,e)||[];return zt(o,n)||[]}function zt(t,e){for(let n=e;n>-1;n--)if(typeof t[n]<"u")return t[n];throw new Error("Locale data API: locale data undefined")}function am(t){let[e,n]=t.split(":");return{hours:+e,minutes:+n}}var oL=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Bl={},sL=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;function Hb(t,e,n,r){let i=gL(t);e=Zn(n,e)||e;let s=[],a;for(;e;)if(a=sL.exec(e),a){s=s.concat(a.slice(1));let h=s.pop();if(!h)break;e=h}else{s.push(e);break}let u=i.getTimezoneOffset();r&&(u=qb(r,u),i=pL(i,r));let l="";return s.forEach(h=>{let p=hL(h);l+=p?p(i,n,u):h==="''"?"'":h.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),l}function Wl(t,e,n){let r=new Date(0);return r.setFullYear(t,e,n),r.setHours(0,0,0),r}function Zn(t,e){let n=Ob(t);if(Bl[n]??={},Bl[n][e])return Bl[n][e];let r="";switch(e){case"shortDate":r=Ra(t,Ct.Short);break;case"mediumDate":r=Ra(t,Ct.Medium);break;case"longDate":r=Ra(t,Ct.Long);break;case"fullDate":r=Ra(t,Ct.Full);break;case"shortTime":r=Na(t,Ct.Short);break;case"mediumTime":r=Na(t,Ct.Medium);break;case"longTime":r=Na(t,Ct.Long);break;case"fullTime":r=Na(t,Ct.Full);break;case"short":let i=Zn(t,"shortTime"),o=Zn(t,"shortDate");r=$l(Ma(t,Ct.Short),[i,o]);break;case"medium":let s=Zn(t,"mediumTime"),a=Zn(t,"mediumDate");r=$l(Ma(t,Ct.Medium),[s,a]);break;case"long":let u=Zn(t,"longTime"),l=Zn(t,"longDate");r=$l(Ma(t,Ct.Long),[u,l]);break;case"full":let h=Zn(t,"fullTime"),p=Zn(t,"fullDate");r=$l(Ma(t,Ct.Full),[h,p]);break}return r&&(Bl[n][e]=r),r}function $l(t,e){return e&&(t=t.replace(/\{([^}]+)}/g,function(n,r){return e!=null&&r in e?e[r]:n})),t}function nn(t,e,n="-",r,i){let o="";(t<0||i&&t<=0)&&(i?t=-t+1:(t=-t,o=n));let s=String(t);for(;s.length<e;)s="0"+s;return r&&(s=s.slice(s.length-e)),o+s}function aL(t,e){return nn(t,3).substring(0,e)}function Le(t,e,n=0,r=!1,i=!1){return function(o,s){let a=cL(t,o);if((n>0||a>-n)&&(a+=n),t===3)a===0&&n===-12&&(a=12);else if(t===6)return aL(a,e);let u=Pa(s,Jn.MinusSign);return nn(a,e,u,r,i)}}function cL(t,e){switch(t){case 0:return e.getFullYear();case 1:return e.getMonth();case 2:return e.getDate();case 3:return e.getHours();case 4:return e.getMinutes();case 5:return e.getSeconds();case 6:return e.getMilliseconds();case 7:return e.getDay();default:throw new Error(`Unknown DateType value "${t}".`)}}function De(t,e,n=at.Format,r=!1){return function(i,o){return uL(i,o,t,e,n,r)}}function uL(t,e,n,r,i,o){switch(n){case 2:return Vb(e,i,r)[t.getMonth()];case 1:return Fb(e,i,r)[t.getDay()];case 0:let s=t.getHours(),a=t.getMinutes();if(o){let l=Bb(e),h=$b(e,i,r),p=l.findIndex(m=>{if(Array.isArray(m)){let[y,w]=m,R=s>=y.hours&&a>=y.minutes,N=s<w.hours||s===w.hours&&a<w.minutes;if(y.hours<w.hours){if(R&&N)return!0}else if(R||N)return!0}else if(m.hours===s&&m.minutes===a)return!0;return!1});if(p!==-1)return h[p]}return Lb(e,i,r)[s<12?0:1];case 3:return jb(e,r)[t.getFullYear()<=0?0:1];default:let u=n;throw new Error(`unexpected translation type ${u}`)}}function Hl(t){return function(e,n,r){let i=-1*r,o=Pa(n,Jn.MinusSign),s=i>0?Math.floor(i/60):Math.ceil(i/60);switch(t){case 0:return(i>=0?"+":"")+nn(s,2,o)+nn(Math.abs(i%60),2,o);case 1:return"GMT"+(i>=0?"+":"")+nn(s,1,o);case 2:return"GMT"+(i>=0?"+":"")+nn(s,2,o)+":"+nn(Math.abs(i%60),2,o);case 3:return r===0?"Z":(i>=0?"+":"")+nn(s,2,o)+":"+nn(Math.abs(i%60),2,o);default:throw new Error(`Unknown zone width "${t}"`)}}}var lL=0,ql=4;function dL(t){let e=Wl(t,lL,1).getDay();return Wl(t,0,1+(e<=ql?ql:ql+7)-e)}function zb(t){let e=t.getDay(),n=e===0?-3:ql-e;return Wl(t.getFullYear(),t.getMonth(),t.getDate()+n)}function cm(t,e=!1){return function(n,r){let i;if(e){let o=new Date(n.getFullYear(),n.getMonth(),1).getDay()-1,s=n.getDate();i=1+Math.floor((s+o)/7)}else{let o=zb(n),s=dL(o.getFullYear()),a=o.getTime()-s.getTime();i=1+Math.round(a/6048e5)}return nn(i,t,Pa(r,Jn.MinusSign))}}function zl(t,e=!1){return function(n,r){let o=zb(n).getFullYear();return nn(o,t,Pa(r,Jn.MinusSign),e)}}var um={};function hL(t){if(um[t])return um[t];let e;switch(t){case"G":case"GG":case"GGG":e=De(3,Ie.Abbreviated);break;case"GGGG":e=De(3,Ie.Wide);break;case"GGGGG":e=De(3,Ie.Narrow);break;case"y":e=Le(0,1,0,!1,!0);break;case"yy":e=Le(0,2,0,!0,!0);break;case"yyy":e=Le(0,3,0,!1,!0);break;case"yyyy":e=Le(0,4,0,!1,!0);break;case"Y":e=zl(1);break;case"YY":e=zl(2,!0);break;case"YYY":e=zl(3);break;case"YYYY":e=zl(4);break;case"M":case"L":e=Le(1,1,1);break;case"MM":case"LL":e=Le(1,2,1);break;case"MMM":e=De(2,Ie.Abbreviated);break;case"MMMM":e=De(2,Ie.Wide);break;case"MMMMM":e=De(2,Ie.Narrow);break;case"LLL":e=De(2,Ie.Abbreviated,at.Standalone);break;case"LLLL":e=De(2,Ie.Wide,at.Standalone);break;case"LLLLL":e=De(2,Ie.Narrow,at.Standalone);break;case"w":e=cm(1);break;case"ww":e=cm(2);break;case"W":e=cm(1,!0);break;case"d":e=Le(2,1);break;case"dd":e=Le(2,2);break;case"c":case"cc":e=Le(7,1);break;case"ccc":e=De(1,Ie.Abbreviated,at.Standalone);break;case"cccc":e=De(1,Ie.Wide,at.Standalone);break;case"ccccc":e=De(1,Ie.Narrow,at.Standalone);break;case"cccccc":e=De(1,Ie.Short,at.Standalone);break;case"E":case"EE":case"EEE":e=De(1,Ie.Abbreviated);break;case"EEEE":e=De(1,Ie.Wide);break;case"EEEEE":e=De(1,Ie.Narrow);break;case"EEEEEE":e=De(1,Ie.Short);break;case"a":case"aa":case"aaa":e=De(0,Ie.Abbreviated);break;case"aaaa":e=De(0,Ie.Wide);break;case"aaaaa":e=De(0,Ie.Narrow);break;case"b":case"bb":case"bbb":e=De(0,Ie.Abbreviated,at.Standalone,!0);break;case"bbbb":e=De(0,Ie.Wide,at.Standalone,!0);break;case"bbbbb":e=De(0,Ie.Narrow,at.Standalone,!0);break;case"B":case"BB":case"BBB":e=De(0,Ie.Abbreviated,at.Format,!0);break;case"BBBB":e=De(0,Ie.Wide,at.Format,!0);break;case"BBBBB":e=De(0,Ie.Narrow,at.Format,!0);break;case"h":e=Le(3,1,-12);break;case"hh":e=Le(3,2,-12);break;case"H":e=Le(3,1);break;case"HH":e=Le(3,2);break;case"m":e=Le(4,1);break;case"mm":e=Le(4,2);break;case"s":e=Le(5,1);break;case"ss":e=Le(5,2);break;case"S":e=Le(6,1);break;case"SS":e=Le(6,2);break;case"SSS":e=Le(6,3);break;case"Z":case"ZZ":case"ZZZ":e=Hl(0);break;case"ZZZZZ":e=Hl(3);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=Hl(1);break;case"OOOO":case"ZZZZ":case"zzzz":e=Hl(2);break;default:return null}return um[t]=e,e}function qb(t,e){t=t.replace(/:/g,"");let n=Date.parse("Jan 01, 1970 00:00:00 "+t)/6e4;return isNaN(n)?e:n}function fL(t,e){return t=new Date(t.getTime()),t.setMinutes(t.getMinutes()+e),t}function pL(t,e,n){let i=t.getTimezoneOffset(),o=qb(e,i);return fL(t,-1*(o-i))}function gL(t){if(Pb(t))return t;if(typeof t=="number"&&!isNaN(t))return new Date(t);if(typeof t=="string"){if(t=t.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(t)){let[i,o=1,s=1]=t.split("-").map(a=>+a);return Wl(i,o-1,s)}let n=parseFloat(t);if(!isNaN(t-n))return new Date(n);let r;if(r=t.match(oL))return mL(r)}let e=new Date(t);if(!Pb(e))throw new Error(`Unable to convert "${t}" into a date`);return e}function mL(t){let e=new Date(0),n=0,r=0,i=t[8]?e.setUTCFullYear:e.setFullYear,o=t[8]?e.setUTCHours:e.setHours;t[9]&&(n=Number(t[9]+t[10]),r=Number(t[9]+t[11])),i.call(e,Number(t[1]),Number(t[2])-1,Number(t[3]));let s=Number(t[4]||0)-n,a=Number(t[5]||0)-r,u=Number(t[6]||0),l=Math.floor(parseFloat("0."+(t[7]||0))*1e3);return o.call(e,s,a,u,l),e}function Pb(t){return t instanceof Date&&!isNaN(t.valueOf())}var lm=/\s+/,xb=[],yL=(()=>{class t{_ngEl;_renderer;initialClasses=xb;rawClass;stateMap=new Map;constructor(n,r){this._ngEl=n,this._renderer=r}set klass(n){this.initialClasses=n!=null?n.trim().split(lm):xb}set ngClass(n){this.rawClass=typeof n=="string"?n.trim().split(lm):n}ngDoCheck(){for(let r of this.initialClasses)this._updateState(r,!0);let n=this.rawClass;if(Array.isArray(n)||n instanceof Set)for(let r of n)this._updateState(r,!0);else if(n!=null)for(let r of Object.keys(n))this._updateState(r,!!n[r]);this._applyStateDiff()}_updateState(n,r){let i=this.stateMap.get(n);i!==void 0?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(n,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(let n of this.stateMap){let r=n[0],i=n[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(n,r){n=n.trim(),n.length>0&&n.split(lm).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static \u0275fac=function(r){return new(r||t)(Pt(Ea),Pt(Ol))};static \u0275dir=Lo({type:t,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"}})}return t})();var vL=(()=>{class t{_viewContainer;_context=new Gl;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(n,r){this._viewContainer=n,this._thenTemplateRef=r}set ngIf(n){this._context.$implicit=this._context.ngIf=n,this._updateView()}set ngIfThen(n){kb(n,!1),this._thenTemplateRef=n,this._thenViewRef=null,this._updateView()}set ngIfElse(n){kb(n,!1),this._elseTemplateRef=n,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(n,r){return!0}static \u0275fac=function(r){return new(r||t)(Pt(Ta),Pt(Xg))};static \u0275dir=Lo({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return t})(),Gl=class{$implicit=null;ngIf=null};function kb(t,e){if(t&&!t.createEmbeddedView)throw new j(2020,!1)}function _L(t,e){return new j(2100,!1)}var IL="mediumDate",Wb=new U(""),Gb=new U(""),EL=(()=>{class t{locale;defaultTimezone;defaultOptions;constructor(n,r,i){this.locale=n,this.defaultTimezone=r,this.defaultOptions=i}transform(n,r,i,o){if(n==null||n===""||n!==n)return null;try{let s=r??this.defaultOptions?.dateFormat??IL,a=i??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return Hb(n,s,o||this.locale,a)}catch(s){throw _L(t,s.message)}}static \u0275fac=function(r){return new(r||t)(Pt(Fl,16),Pt(Wb,24),Pt(Gb,24))};static \u0275pipe=ob({name:"date",type:t,pure:!0})}return t})();var Kb=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=Oo({type:t});static \u0275inj=No({})}return t})();function hm(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,o]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var fm="browser",Qb="server";function Kl(t){return t===Qb}var xa=class{};var Yb=(()=>{class t{static \u0275prov=B({token:t,providedIn:"root",factory:()=>new pm(x(qe),window)})}return t})(),pm=class{document;window;offset=()=>[0,0];constructor(e,n){this.document=e,this.window=n}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let n=DL(this.document,e);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let n=e.getBoundingClientRect(),r=n.left+this.window.pageXOffset,i=n.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}};function DL(t,e){let n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if(typeof t.createTreeWalker=="function"&&t.body&&typeof t.body.attachShadow=="function"){let r=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let o=i.shadowRoot;if(o){let s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}var Zl=new U(""),vm=(()=>{class t{_zone;_plugins;_eventNameToPlugin=new Map;constructor(n,r){this._zone=r,n.forEach(i=>{i.manager=this}),this._plugins=n.slice().reverse()}addEventListener(n,r,i,o){return this._findPluginFor(r).addEventListener(n,r,i,o)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(o=>o.supports(n)),!r)throw new j(5101,!1);return this._eventNameToPlugin.set(n,r),r}static \u0275fac=function(r){return new(r||t)(G(Zl),G(fe))};static \u0275prov=B({token:t,factory:t.\u0275fac})}return t})(),ka=class{_doc;constructor(e){this._doc=e}manager},Ql="ng-app-id";function Zb(t){for(let e of t)e.remove()}function Jb(t,e){let n=e.createElement("style");return n.textContent=t,n}function bL(t,e,n,r){let i=t.head?.querySelectorAll(`style[${Ql}="${e}"],link[${Ql}="${e}"]`);if(i)for(let o of i)o.removeAttribute(Ql),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&n.set(o.textContent,{usage:0,elements:[o]})}function mm(t,e){let n=e.createElement("link");return n.setAttribute("rel","stylesheet"),n.setAttribute("href",t),n}var _m=(()=>{class t{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;isServer;constructor(n,r,i,o={}){this.doc=n,this.appId=r,this.nonce=i,this.isServer=Kl(o),bL(n,r,this.inline,this.external),this.hosts.add(n.head)}addStyles(n,r){for(let i of n)this.addUsage(i,this.inline,Jb);r?.forEach(i=>this.addUsage(i,this.external,mm))}removeStyles(n,r){for(let i of n)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(n,r,i){let o=r.get(n);o?o.usage++:r.set(n,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(n,this.doc)))})}removeUsage(n,r){let i=r.get(n);i&&(i.usage--,i.usage<=0&&(Zb(i.elements),r.delete(n)))}ngOnDestroy(){for(let[,{elements:n}]of[...this.inline,...this.external])Zb(n);this.hosts.clear()}addHost(n){this.hosts.add(n);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(n,Jb(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(n,mm(r,this.doc)))}removeHost(n){this.hosts.delete(n)}addElement(n,r){return this.nonce&&r.setAttribute("nonce",this.nonce),this.isServer&&r.setAttribute(Ql,this.appId),n.appendChild(r)}static \u0275fac=function(r){return new(r||t)(G(qe),G(Og),G(Fg,8),G(Sr))};static \u0275prov=B({token:t,factory:t.\u0275fac})}return t})(),gm={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Im=/%COMP%/g;var eC="%COMP%",CL=`_nghost-${eC}`,SL=`_ngcontent-${eC}`,AL=!0,RL=new U("",{providedIn:"root",factory:()=>AL});function NL(t){return SL.replace(Im,t)}function ML(t){return CL.replace(Im,t)}function tC(t,e){return e.map(n=>n.replace(Im,t))}var Em=(()=>{class t{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(n,r,i,o,s,a,u,l=null,h=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=u,this.nonce=l,this.tracingService=h,this.platformIsServer=Kl(a),this.defaultRenderer=new Oa(n,s,u,this.platformIsServer,this.tracingService)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===vn.ShadowDom&&(r=ve(F({},r),{encapsulation:vn.Emulated}));let i=this.getOrCreateRenderer(n,r);return i instanceof Yl?i.applyToHost(n):i instanceof La&&i.applyStyles(),i}getOrCreateRenderer(n,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,p=this.platformIsServer,m=this.tracingService;switch(r.encapsulation){case vn.Emulated:o=new Yl(u,l,r,this.appId,h,s,a,p,m);break;case vn.ShadowDom:return new ym(u,l,n,r,s,a,this.nonce,p,m);default:o=new La(u,l,r,h,s,a,p,m);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(n){this.rendererByCompId.delete(n)}static \u0275fac=function(r){return new(r||t)(G(vm),G(_m),G(Og),G(RL),G(qe),G(Sr),G(fe),G(Fg),G(ko,8))};static \u0275prov=B({token:t,factory:t.\u0275fac})}return t})(),Oa=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,n,r,i,o){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.tracingService=o}destroy(){}destroyNode=null;createElement(e,n){return n?this.doc.createElementNS(gm[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(Xb(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(Xb(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){n.remove()}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new j(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let o=gm[i];o?e.setAttributeNS(o,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=gm[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(qn.DashCase|qn.Important)?e.style.setProperty(n,r,i&qn.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&qn.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r,i){if(typeof e=="string"&&(e=Qn().getGlobalEventTarget(this.doc,e),!e))throw new j(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,n,o)),this.eventManager.addEventListener(e,n,o,i)}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function Xb(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var ym=class extends Oa{sharedStylesHost;hostEl;shadowRoot;constructor(e,n,r,i,o,s,a,u,l){super(e,o,s,u,l),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let h=i.styles;h=tC(i.id,h);for(let m of h){let y=document.createElement("style");a&&y.setAttribute("nonce",a),y.textContent=m,this.shadowRoot.appendChild(y)}let p=i.getExternalStyles?.();if(p)for(let m of p){let y=mm(m,o);a&&y.setAttribute("nonce",a),this.shadowRoot.appendChild(y)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(null,n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},La=class extends Oa{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,n,r,i,o,s,a,u,l){super(e,o,s,a,u),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i;let h=r.styles;this.styles=l?tC(l,h):h,this.styleUrls=r.getExternalStyles?.(l)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},Yl=class extends La{contentAttr;hostAttr;constructor(e,n,r,i,o,s,a,u,l){let h=i+"-"+r.id;super(e,n,r,o,s,a,u,l,h),this.contentAttr=NL(h),this.hostAttr=ML(h)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}};var Jl=class t extends Sa{supportsDOMEvents=!0;static makeCurrent(){om(new t)}onAndCancel(e,n,r,i){return e.addEventListener(n,r,i),()=>{e.removeEventListener(n,r,i)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.remove()}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=PL();return n==null?null:xL(n)}resetBaseElement(){Fa=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return hm(document.cookie,e)}},Fa=null;function PL(){return Fa=Fa||document.head.querySelector("base"),Fa?Fa.getAttribute("href"):null}function xL(t){return new URL(t,document.baseURI).pathname}var kL=(()=>{class t{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||t)};static \u0275prov=B({token:t,factory:t.\u0275fac})}return t})(),rC=(()=>{class t extends ka{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i,o){return n.addEventListener(r,i,o),()=>this.removeEventListener(n,r,i,o)}removeEventListener(n,r,i,o){return n.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||t)(G(qe))};static \u0275prov=B({token:t,factory:t.\u0275fac})}return t})(),nC=["alt","control","meta","shift"],OL={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},LL={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},iC=(()=>{class t extends ka{constructor(n){super(n)}supports(n){return t.parseEventName(n)!=null}addEventListener(n,r,i,o){let s=t.parseEventName(r),a=t.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Qn().onAndCancel(n,s.domEventName,a,o))}static parseEventName(n){let r=n.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=t._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),nC.forEach(l=>{let h=r.indexOf(l);h>-1&&(r.splice(h,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let u={};return u.domEventName=i,u.fullKey=s,u}static matchEventFullKeyCode(n,r){let i=OL[n.key]||n.key,o="";return r.indexOf("code.")>-1&&(i=n.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),nC.forEach(s=>{if(s!==i){let a=LL[s];a(n)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(n,r,i){return o=>{t.matchEventFullKeyCode(o,n)&&i.runGuarded(()=>r(o))}}static _normalizeKey(n){return n==="esc"?"escape":n}static \u0275fac=function(r){return new(r||t)(G(qe))};static \u0275prov=B({token:t,factory:t.\u0275fac})}return t})();function FL(t,e){return Db(F({rootComponent:t},VL(e)))}function VL(t){return{appProviders:[...HL,...t?.providers??[]],platformProviders:$L}}function jL(){Jl.makeCurrent()}function UL(){return new yn}function BL(){return yD(document),document}var $L=[{provide:Sr,useValue:fm},{provide:Lg,useValue:jL,multi:!0},{provide:qe,useFactory:BL}];var HL=[{provide:El,useValue:"root"},{provide:yn,useFactory:UL},{provide:Zl,useClass:rC,multi:!0,deps:[qe]},{provide:Zl,useClass:iC,multi:!0,deps:[qe]},Em,_m,vm,{provide:bo,useExisting:Em},{provide:xa,useClass:kL},[]];var oC=(()=>{class t{_doc;constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static \u0275fac=function(r){return new(r||t)(G(qe))};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var X="primary",Ya=Symbol("RouteTitle"),Cm=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function wi(t){return new Cm(t)}function fC(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=t[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function qL(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!In(t[n],e[n]))return!1;return!0}function In(t,e){let n=t?Sm(t):void 0,r=e?Sm(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!pC(t[i],e[i]))return!1;return!0}function Sm(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function pC(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,o)=>r[o]===i)}else return t===e}function gC(t){return t.length>0?t[t.length-1]:null}function Or(t){return lp(t)?t:ba(t)?Se(Promise.resolve(t)):q(t)}var WL={exact:yC,subset:vC},mC={exact:GL,subset:KL,ignored:()=>!0};function sC(t,e,n){return WL[n.paths](t.root,e.root,n.matrixParams)&&mC[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function GL(t,e){return In(t,e)}function yC(t,e,n){if(!Ii(t.segments,e.segments)||!td(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!yC(t.children[r],e.children[r],n))return!1;return!0}function KL(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>pC(t[n],e[n]))}function vC(t,e,n){return _C(t,e,e.segments,n)}function _C(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!Ii(i,n)||e.hasChildren()||!td(i,n,r))}else if(t.segments.length===n.length){if(!Ii(t.segments,n)||!td(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!vC(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),o=n.slice(t.segments.length);return!Ii(t.segments,i)||!td(t.segments,i,r)||!t.children[X]?!1:_C(t.children[X],e,o,r)}}function td(t,e,n){return e.every((r,i)=>mC[n](t[i].parameters,r.parameters))}var wn=class{root;queryParams;fragment;_queryParamMap;constructor(e=new pe([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=wi(this.queryParams),this._queryParamMap}toString(){return ZL.serialize(this)}},pe=class{segments;children;parent=null;constructor(e,n){this.segments=e,this.children=n,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return nd(this)}},Pr=class{path;parameters;_parameterMap;constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=wi(this.parameters),this._parameterMap}toString(){return EC(this)}};function QL(t,e){return Ii(t,e)&&t.every((n,r)=>In(n.parameters,e[r].parameters))}function Ii(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function YL(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===X&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==X&&(n=n.concat(e(i,r)))}),n}var Ti=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=B({token:t,factory:()=>new xr,providedIn:"root"})}return t})(),xr=class{parse(e){let n=new Rm(e);return new wn(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${Va(e.root,!0)}`,r=eF(e.queryParams),i=typeof e.fragment=="string"?`#${JL(e.fragment)}`:"";return`${n}${r}${i}`}},ZL=new xr;function nd(t){return t.segments.map(e=>EC(e)).join("/")}function Va(t,e){if(!t.hasChildren())return nd(t);if(e){let n=t.children[X]?Va(t.children[X],!1):"",r=[];return Object.entries(t.children).forEach(([i,o])=>{i!==X&&r.push(`${i}:${Va(o,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=YL(t,(r,i)=>i===X?[Va(t.children[X],!1)]:[`${i}:${Va(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[X]!=null?`${nd(t)}/${n[0]}`:`${nd(t)}/(${n.join("//")})`}}function IC(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Xl(t){return IC(t).replace(/%3B/gi,";")}function JL(t){return encodeURI(t)}function Am(t){return IC(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function rd(t){return decodeURIComponent(t)}function aC(t){return rd(t.replace(/\+/g,"%20"))}function EC(t){return`${Am(t.path)}${XL(t.parameters)}`}function XL(t){return Object.entries(t).map(([e,n])=>`;${Am(e)}=${Am(n)}`).join("")}function eF(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${Xl(n)}=${Xl(i)}`).join("&"):`${Xl(n)}=${Xl(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var tF=/^[^\/()?;#]+/;function wm(t){let e=t.match(tF);return e?e[0]:""}var nF=/^[^\/()?;=#]+/;function rF(t){let e=t.match(nF);return e?e[0]:""}var iF=/^[^=?&#]+/;function oF(t){let e=t.match(iF);return e?e[0]:""}var sF=/^[^&#]+/;function aF(t){let e=t.match(sF);return e?e[0]:""}var Rm=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new pe([],{}):new pe([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[X]=new pe(e,n)),r}parseSegment(){let e=wm(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new j(4009,!1);return this.capture(e),new Pr(rd(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=rF(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=wm(this.remaining);i&&(r=i,this.capture(r))}e[rd(n)]=rd(r)}parseQueryParam(e){let n=oF(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let s=aF(this.remaining);s&&(r=s,this.capture(r))}let i=aC(n),o=aC(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=wm(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new j(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=X);let s=this.parseChildren();n[o]=Object.keys(s).length===1?s[X]:new pe([],s),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new j(4011,!1)}};function wC(t){return t.segments.length>0?new pe([],{[X]:t}):t}function TC(t){let e={};for(let[r,i]of Object.entries(t.children)){let o=TC(i);if(r===X&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let n=new pe(t.segments,e);return cF(n)}function cF(t){if(t.numberOfChildren===1&&t.children[X]){let e=t.children[X];return new pe(t.segments.concat(e.segments),e.children)}return t}function Bo(t){return t instanceof wn}function DC(t,e,n=null,r=null){let i=bC(t);return CC(i,e,n,r)}function bC(t){let e;function n(o){let s={};for(let u of o.children){let l=n(u);s[u.outlet]=l}let a=new pe(o.url,s);return o===t&&(e=a),a}let r=n(t.root),i=wC(r);return e??i}function CC(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return Tm(i,i,i,n,r);let o=uF(e);if(o.toRoot())return Tm(i,i,new pe([],{}),n,r);let s=lF(o,i,t),a=s.processChildren?Ua(s.segmentGroup,s.index,o.commands):AC(s.segmentGroup,s.index,o.commands);return Tm(i,s.segmentGroup,a,n,r)}function od(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function $a(t){return typeof t=="object"&&t!=null&&t.outlets}function Tm(t,e,n,r,i){let o={};r&&Object.entries(r).forEach(([u,l])=>{o[u]=Array.isArray(l)?l.map(h=>`${h}`):`${l}`});let s;t===e?s=n:s=SC(t,e,n);let a=wC(TC(s));return new wn(a,o,i)}function SC(t,e,n){let r={};return Object.entries(t.children).forEach(([i,o])=>{o===e?r[i]=n:r[i]=SC(o,e,n)}),new pe(t.segments,r)}var sd=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&od(r[0]))throw new j(4003,!1);let i=r.find($a);if(i&&i!==gC(r))throw new j(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function uF(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new sd(!0,0,t);let e=0,n=!1,r=t.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([u,l])=>{a[u]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,u)=>{u==0&&a==="."||(u==0&&a===""?n=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new sd(n,e,r)}var jo=class{segmentGroup;processChildren;index;constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function lF(t,e,n){if(t.isAbsolute)return new jo(e,!0,0);if(!n)return new jo(e,!1,NaN);if(n.parent===null)return new jo(n,!0,0);let r=od(t.commands[0])?0:1,i=n.segments.length-1+r;return dF(n,i,t.numberOfDoubleDots)}function dF(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new j(4005,!1);i=r.segments.length}return new jo(r,!1,i-o)}function hF(t){return $a(t[0])?t[0].outlets:{[X]:t}}function AC(t,e,n){if(t??=new pe([],{}),t.segments.length===0&&t.hasChildren())return Ua(t,e,n);let r=fF(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let o=new pe(t.segments.slice(0,r.pathIndex),{});return o.children[X]=new pe(t.segments.slice(r.pathIndex),t.children),Ua(o,0,i)}else return r.match&&i.length===0?new pe(t.segments,{}):r.match&&!t.hasChildren()?Nm(t,e,n):r.match?Ua(t,0,i):Nm(t,e,n)}function Ua(t,e,n){if(n.length===0)return new pe(t.segments,{});{let r=hF(n),i={};if(Object.keys(r).some(o=>o!==X)&&t.children[X]&&t.numberOfChildren===1&&t.children[X].segments.length===0){let o=Ua(t.children[X],e,n);return new pe(t.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=AC(t.children[o],e,s))}),Object.entries(t.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new pe(t.segments,i)}}function fF(t,e,n){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;let s=t.segments[i],a=n[r];if($a(a))break;let u=`${a}`,l=r<n.length-1?n[r+1]:null;if(i>0&&u===void 0)break;if(u&&l&&typeof l=="object"&&l.outlets===void 0){if(!uC(u,l,s))return o;r+=2}else{if(!uC(u,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Nm(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let o=n[i];if($a(o)){let u=pF(o.outlets);return new pe(r,u)}if(i===0&&od(n[0])){let u=t.segments[e];r.push(new Pr(u.path,cC(n[0]))),i++;continue}let s=$a(o)?o.outlets[X]:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&od(a)?(r.push(new Pr(s,cC(a))),i+=2):(r.push(new Pr(s,{})),i++)}return new pe(r,{})}function pF(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=Nm(new pe([],{}),0,r))}),e}function cC(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function uC(t,e,n){return t==n.path&&In(e,n.parameters)}var id="imperative",ze=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(ze||{}),kt=class{id;url;constructor(e,n){this.id=e,this.url=n}},kr=class extends kt{type=ze.NavigationStart;navigationTrigger;restoredState;constructor(e,n,r="imperative",i=null){super(e,n),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},on=class extends kt{urlAfterRedirects;type=ze.NavigationEnd;constructor(e,n,r){super(e,n),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},St=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(St||{}),$o=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}($o||{}),En=class extends kt{reason;code;type=ze.NavigationCancel;constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Tn=class extends kt{reason;code;type=ze.NavigationSkipped;constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i}},Ho=class extends kt{error;target;type=ze.NavigationError;constructor(e,n,r,i){super(e,n),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Ha=class extends kt{urlAfterRedirects;state;type=ze.RoutesRecognized;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},ad=class extends kt{urlAfterRedirects;state;type=ze.GuardsCheckStart;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},cd=class extends kt{urlAfterRedirects;state;shouldActivate;type=ze.GuardsCheckEnd;constructor(e,n,r,i,o){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},ud=class extends kt{urlAfterRedirects;state;type=ze.ResolveStart;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},ld=class extends kt{urlAfterRedirects;state;type=ze.ResolveEnd;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},dd=class{route;type=ze.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},hd=class{route;type=ze.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},fd=class{snapshot;type=ze.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},pd=class{snapshot;type=ze.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},gd=class{snapshot;type=ze.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},md=class{snapshot;type=ze.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},zo=class{routerEvent;position;anchor;type=ze.Scroll;constructor(e,n,r){this.routerEvent=e,this.position=n,this.anchor=r}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},za=class{},qo=class{url;navigationBehaviorOptions;constructor(e,n){this.url=e,this.navigationBehaviorOptions=n}};function gF(t,e){return t.providers&&!t._injector&&(t._injector=Da(t.providers,e,`Route: ${t.path}`)),t._injector??e}function rn(t){return t.outlet||X}function mF(t,e){let n=t.filter(r=>rn(r)===e);return n.push(...t.filter(r=>rn(r)!==e)),n}function Za(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var yd=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return Za(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new Di(this.rootInjector)}},Di=(()=>{class t{rootInjector;contexts=new Map;constructor(n){this.rootInjector=n}onChildOutletCreated(n,r){let i=this.getOrCreateContext(n);i.outlet=r,this.contexts.set(n,i)}onChildOutletDestroyed(n){let r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new yd(this.rootInjector),this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}static \u0275fac=function(r){return new(r||t)(G(it))};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),vd=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=Mm(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=Mm(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=Pm(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Pm(e,this._root).map(n=>n.value)}};function Mm(t,e){if(t===e.value)return e;for(let n of e.children){let r=Mm(t,n);if(r)return r}return null}function Pm(t,e){if(t===e.value)return[e];for(let n of e.children){let r=Pm(t,n);if(r.length)return r.unshift(e),r}return[]}var xt=class{value;children;constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function Vo(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var qa=class extends vd{snapshot;constructor(e,n){super(e),this.snapshot=n,Um(this,e)}toString(){return this.snapshot.toString()}};function RC(t){let e=yF(t),n=new Ze([new Pr("",{})]),r=new Ze({}),i=new Ze({}),o=new Ze({}),s=new Ze(""),a=new Xn(n,r,o,s,i,X,t,e.root);return a.snapshot=e.root,new qa(new xt(a,[]),e)}function yF(t){let e={},n={},r={},i="",o=new Ei([],e,r,i,n,X,t,null,{});return new Wa("",new xt(o,[]))}var Xn=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,n,r,i,o,s,a,u){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(se(l=>l[Ya]))??q(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(se(e=>wi(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(se(e=>wi(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function _d(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:F(F({},e.params),t.params),data:F(F({},e.data),t.data),resolve:F(F(F(F({},t.data),e.data),i?.data),t._resolvedData)}:r={params:F({},t.params),data:F({},t.data),resolve:F(F({},t.data),t._resolvedData??{})},i&&MC(i)&&(r.resolve[Ya]=i.title),r}var Ei=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[Ya]}constructor(e,n,r,i,o,s,a,u,l){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=wi(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=wi(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},Wa=class extends vd{url;constructor(e,n){super(n),this.url=e,Um(this,n)}toString(){return NC(this._root)}};function Um(t,e){e.value._routerState=t,e.children.forEach(n=>Um(t,n))}function NC(t){let e=t.children.length>0?` { ${t.children.map(NC).join(", ")} } `:"";return`${t.value}${e}`}function Dm(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,In(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),In(e.params,n.params)||t.paramsSubject.next(n.params),qL(e.url,n.url)||t.urlSubject.next(n.url),In(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function xm(t,e){let n=In(t.params,e.params)&&QL(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||xm(t.parent,e.parent))}function MC(t){return typeof t.title=="string"||t.title===null}var PC=new U(""),Bm=(()=>{class t{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=X;activateEvents=new Tt;deactivateEvents=new Tt;attachEvents=new Tt;detachEvents=new Tt;routerOutletData=lD(void 0);parentContexts=x(Di);location=x(Ta);changeDetector=x(Ca);inputBinder=x(Ja,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(n){if(n.name){let{firstChange:r,previousValue:i}=n.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new j(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new j(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new j(4012,!1);this.location.detach();let n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){let n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new j(4013,!1);this._activatedRoute=n;let i=this.location,s=n.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new km(n,a,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:u,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||t)};static \u0275dir=Lo({type:t,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[Dl]})}return t})(),km=class{route;childContexts;parent;outletData;constructor(e,n,r,i){this.route=e,this.childContexts=n,this.parent=r,this.outletData=i}get(e,n){return e===Xn?this.route:e===Di?this.childContexts:e===PC?this.outletData:this.parent.get(e,n)}},Ja=new U(""),$m=(()=>{class t{outletDataSubscriptions=new Map;bindActivatedRouteToOutletComponent(n){this.unsubscribeFromRouteData(n),this.subscribeToRouteData(n)}unsubscribeFromRouteData(n){this.outletDataSubscriptions.get(n)?.unsubscribe(),this.outletDataSubscriptions.delete(n)}subscribeToRouteData(n){let{activatedRoute:r}=n,i=ea([r.queryParams,r.params,r.data]).pipe(Mt(([o,s,a],u)=>(a=F(F(F({},o),s),a),u===0?q(a):Promise.resolve(a)))).subscribe(o=>{if(!n.isActivated||!n.activatedComponentRef||n.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(n);return}let s=Sb(r.component);if(!s){this.unsubscribeFromRouteData(n);return}for(let{templateName:a}of s.inputs)n.activatedComponentRef.setInput(a,o[a])});this.outletDataSubscriptions.set(n,i)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=B({token:t,factory:t.\u0275fac})}return t})(),Hm=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275cmp=ib({type:t,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&rm(0,"router-outlet")},dependencies:[Bm],encapsulation:2})}return t})();function zm(t){let e=t.children&&t.children.map(zm),n=e?ve(F({},t),{children:e}):F({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==X&&(n.component=Hm),n}function vF(t,e,n){let r=Ga(t,e._root,n?n._root:void 0);return new qa(r,e)}function Ga(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=_F(t,e,n);return new xt(r,i)}else{if(t.shouldAttach(e.value)){let o=t.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>Ga(t,a)),s}}let r=IF(e.value),i=e.children.map(o=>Ga(t,o));return new xt(r,i)}}function _F(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return Ga(t,r,i);return Ga(t,r)})}function IF(t){return new Xn(new Ze(t.url),new Ze(t.params),new Ze(t.queryParams),new Ze(t.fragment),new Ze(t.data),t.outlet,t.component,t)}var Wo=class{redirectTo;navigationBehaviorOptions;constructor(e,n){this.redirectTo=e,this.navigationBehaviorOptions=n}},xC="ngNavigationCancelingError";function Id(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=Bo(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=kC(!1,St.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function kC(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[xC]=!0,n.cancellationCode=e,n}function EF(t){return OC(t)&&Bo(t.url)}function OC(t){return!!t&&t[xC]}var wF=(t,e,n,r)=>se(i=>(new Om(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),Om=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,n,r,i,o){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),Dm(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=Vo(n);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,n,s.children)}else this.deactivateChildRoutes(e,n,r);else o&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=Vo(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=Vo(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=Vo(n);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new md(o.value.snapshot))}),e.children.length&&this.forwardEvent(new pd(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(Dm(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,s.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),Dm(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},Ed=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Uo=class{component;route;constructor(e,n){this.component=e,this.route=n}};function TF(t,e,n){let r=t._root,i=e?e._root:null;return ja(r,i,n,[r.value])}function DF(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function Ko(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!sT(t)?t:e.get(t):r}function ja(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=Vo(e);return t.children.forEach(s=>{bF(s,o[s.value.outlet],n,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>Ba(a,n.getContext(s),i)),i}function bF(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let u=CF(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new Ed(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?ja(t,e,a?a.children:null,r,i):ja(t,e,n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Uo(a.outlet.component,s))}else s&&Ba(e,a,i),i.canActivateChecks.push(new Ed(r)),o.component?ja(t,null,a?a.children:null,r,i):ja(t,null,n,r,i);return i}function CF(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!Ii(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Ii(t.url,e.url)||!In(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!xm(t,e)||!In(t.queryParams,e.queryParams);case"paramsChange":default:return!xm(t,e)}}function Ba(t,e,n){let r=Vo(t),i=t.value;Object.entries(r).forEach(([o,s])=>{i.component?e?Ba(s,e.children.getContext(o),n):Ba(s,null,n):Ba(s,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new Uo(e.outlet.component,i)):n.canDeactivateChecks.push(new Uo(null,i)):n.canDeactivateChecks.push(new Uo(null,i))}function Xa(t){return typeof t=="function"}function SF(t){return typeof t=="boolean"}function AF(t){return t&&Xa(t.canLoad)}function RF(t){return t&&Xa(t.canActivate)}function NF(t){return t&&Xa(t.canActivateChild)}function MF(t){return t&&Xa(t.canDeactivate)}function PF(t){return t&&Xa(t.canMatch)}function LC(t){return t instanceof Un||t?.name==="EmptyError"}var ed=Symbol("INITIAL_VALUE");function Go(){return Mt(t=>ea(t.map(e=>e.pipe($n(1),ju(ed)))).pipe(se(e=>{for(let n of e)if(n!==!0){if(n===ed)return ed;if(n===!1||xF(n))return n}return!0}),Et(e=>e!==ed),$n(1)))}function xF(t){return Bo(t)||t instanceof Wo}function kF(t,e){return xe(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return s.length===0&&o.length===0?q(ve(F({},n),{guardsResult:!0})):OF(s,r,i,t).pipe(xe(a=>a&&SF(a)?LF(r,o,t,e):q(a)),se(a=>ve(F({},n),{guardsResult:a})))})}function OF(t,e,n,r){return Se(t).pipe(xe(i=>BF(i.component,i.route,n,e,r)),Hn(i=>i!==!0,!0))}function LF(t,e,n,r){return Se(e).pipe(Er(i=>ho(VF(i.route.parent,r),FF(i.route,r),UF(t,i.path,n),jF(t,i.route,n))),Hn(i=>i!==!0,!0))}function FF(t,e){return t!==null&&e&&e(new gd(t)),q(!0)}function VF(t,e){return t!==null&&e&&e(new fd(t)),q(!0)}function jF(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return q(!0);let i=r.map(o=>Lu(()=>{let s=Za(e)??n,a=Ko(o,s),u=RF(a)?a.canActivate(e,t):st(s,()=>a(e,t));return Or(u).pipe(Hn())}));return q(i).pipe(Go())}function UF(t,e,n){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>DF(s)).filter(s=>s!==null).map(s=>Lu(()=>{let a=s.guards.map(u=>{let l=Za(s.node)??n,h=Ko(u,l),p=NF(h)?h.canActivateChild(r,t):st(l,()=>h(r,t));return Or(p).pipe(Hn())});return q(a).pipe(Go())}));return q(o).pipe(Go())}function BF(t,e,n,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return q(!0);let s=o.map(a=>{let u=Za(e)??i,l=Ko(a,u),h=MF(l)?l.canDeactivate(t,e,n,r):st(u,()=>l(t,e,n,r));return Or(h).pipe(Hn())});return q(s).pipe(Go())}function $F(t,e,n,r){let i=e.canLoad;if(i===void 0||i.length===0)return q(!0);let o=i.map(s=>{let a=Ko(s,t),u=AF(a)?a.canLoad(e,n):st(t,()=>a(e,n));return Or(u)});return q(o).pipe(Go(),FC(r))}function FC(t){return mu(Je(e=>{if(typeof e!="boolean")throw Id(t,e)}),se(e=>e===!0))}function HF(t,e,n,r){let i=e.canMatch;if(!i||i.length===0)return q(!0);let o=i.map(s=>{let a=Ko(s,t),u=PF(a)?a.canMatch(e,n):st(t,()=>a(e,n));return Or(u)});return q(o).pipe(Go(),FC(r))}var Ka=class{segmentGroup;constructor(e){this.segmentGroup=e||null}},Qa=class extends Error{urlTree;constructor(e){super(),this.urlTree=e}};function Fo(t){return uo(new Ka(t))}function zF(t){return uo(new j(4e3,!1))}function qF(t){return uo(kC(!1,St.GuardRejected))}var Lm=class{urlSerializer;urlTree;constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return q(r);if(i.numberOfChildren>1||!i.children[X])return zF(`${e.redirectTo}`);i=i.children[X]}}applyRedirectCommands(e,n,r,i,o){if(typeof n!="string"){let a=n,{queryParams:u,fragment:l,routeConfig:h,url:p,outlet:m,params:y,data:w,title:R}=i,N=st(o,()=>a({params:y,data:w,queryParams:u,fragment:l,routeConfig:h,url:p,outlet:m,title:R}));if(N instanceof wn)throw new Qa(N);n=N}let s=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r);if(n[0]==="/")throw new Qa(s);return s}applyRedirectCreateUrlTree(e,n,r,i){let o=this.createSegmentGroup(e,n.root,r,i);return new wn(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=n[a]}else r[i]=o}),r}createSegmentGroup(e,n,r,i){let o=this.createSegments(e,n.segments,r,i),s={};return Object.entries(n.children).forEach(([a,u])=>{s[a]=this.createSegmentGroup(e,u,r,i)}),new pe(o,s)}createSegments(e,n,r,i){return n.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new j(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}},Fm={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function WF(t,e,n,r,i){let o=VC(t,e,n);return o.matched?(r=gF(e,r),HF(r,e,n,i).pipe(se(s=>s===!0?o:F({},Fm)))):q(o)}function VC(t,e,n){if(e.path==="**")return GF(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?F({},Fm):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||fC)(n,t,e);if(!i)return F({},Fm);let o={};Object.entries(i.posParams??{}).forEach(([a,u])=>{o[a]=u.path});let s=i.consumed.length>0?F(F({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function GF(t){return{matched:!0,parameters:t.length>0?gC(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function lC(t,e,n,r){return n.length>0&&YF(t,n,r)?{segmentGroup:new pe(e,QF(r,new pe(n,t.children))),slicedSegments:[]}:n.length===0&&ZF(t,n,r)?{segmentGroup:new pe(t.segments,KF(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new pe(t.segments,t.children),slicedSegments:n}}function KF(t,e,n,r){let i={};for(let o of n)if(Td(t,e,o)&&!r[rn(o)]){let s=new pe([],{});i[rn(o)]=s}return F(F({},r),i)}function QF(t,e){let n={};n[X]=e;for(let r of t)if(r.path===""&&rn(r)!==X){let i=new pe([],{});n[rn(r)]=i}return n}function YF(t,e,n){return n.some(r=>Td(t,e,r)&&rn(r)!==X)}function ZF(t,e,n){return n.some(r=>Td(t,e,r))}function Td(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function JF(t,e,n){return e.length===0&&!t.children[n]}var Vm=class{};function XF(t,e,n,r,i,o,s="emptyOnly"){return new jm(t,e,n,r,i,s,o).recognize()}var eV=31,jm=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,n,r,i,o,s,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new Lm(this.urlSerializer,this.urlTree)}noMatchError(e){return new j(4002,`'${e.segmentGroup}'`)}recognize(){let e=lC(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(se(({children:n,rootSnapshot:r})=>{let i=new xt(r,n),o=new Wa("",i),s=DC(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let n=new Ei([],Object.freeze({}),Object.freeze(F({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),X,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,X,n).pipe(se(r=>({children:r,rootSnapshot:n})),Bn(r=>{if(r instanceof Qa)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Ka?this.noMatchError(r):r}))}processSegmentGroup(e,n,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r,o):this.processSegment(e,n,r,r.segments,i,!0,o).pipe(se(s=>s instanceof xt?[s]:[]))}processChildren(e,n,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return Se(o).pipe(Er(s=>{let a=r.children[s],u=mF(n,s);return this.processSegmentGroup(e,u,a,s,i)}),Vu((s,a)=>(s.push(...a),s)),wr(null),dp(),xe(s=>{if(s===null)return Fo(r);let a=jC(s);return tV(a),q(a)}))}processSegment(e,n,r,i,o,s,a){return Se(n).pipe(Er(u=>this.processSegmentAgainstRoute(u._injector??e,n,u,r,i,o,s,a).pipe(Bn(l=>{if(l instanceof Ka)return q(null);throw l}))),Hn(u=>!!u),Bn(u=>{if(LC(u))return JF(r,i,o)?q(new Vm):Fo(r);throw u}))}processSegmentAgainstRoute(e,n,r,i,o,s,a,u){return rn(r)!==s&&(s===X||!Td(i,o,r))?Fo(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,u):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,o,s,u):Fo(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,o,s,a){let{matched:u,parameters:l,consumedSegments:h,positionalParamSegments:p,remainingSegments:m}=VC(n,i,o);if(!u)return Fo(n);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>eV&&(this.allowRedirects=!1));let y=new Ei(o,l,Object.freeze(F({},this.urlTree.queryParams)),this.urlTree.fragment,dC(i),rn(i),i.component??i._loadedComponent??null,i,hC(i)),w=_d(y,a,this.paramsInheritanceStrategy);y.params=Object.freeze(w.params),y.data=Object.freeze(w.data);let R=this.applyRedirects.applyRedirectCommands(h,i.redirectTo,p,y,e);return this.applyRedirects.lineralizeSegments(i,R).pipe(xe(N=>this.processSegment(e,r,n,N.concat(m),s,!1,a)))}matchSegmentAgainstRoute(e,n,r,i,o,s){let a=WF(n,r,i,e,this.urlSerializer);return r.path==="**"&&(n.children={}),a.pipe(Mt(u=>u.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(Mt(({routes:l})=>{let h=r._loadedInjector??e,{parameters:p,consumedSegments:m,remainingSegments:y}=u,w=new Ei(m,p,Object.freeze(F({},this.urlTree.queryParams)),this.urlTree.fragment,dC(r),rn(r),r.component??r._loadedComponent??null,r,hC(r)),R=_d(w,s,this.paramsInheritanceStrategy);w.params=Object.freeze(R.params),w.data=Object.freeze(R.data);let{segmentGroup:N,slicedSegments:O}=lC(n,m,y,l);if(O.length===0&&N.hasChildren())return this.processChildren(h,l,N,w).pipe(se(K=>new xt(w,K)));if(l.length===0&&O.length===0)return q(new xt(w,[]));let $=rn(r)===o;return this.processSegment(h,l,N,O,$?X:o,!0,w).pipe(se(K=>new xt(w,K instanceof xt?[K]:[])))}))):Fo(n)))}getChildConfig(e,n,r){return n.children?q({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?q({routes:n._loadedRoutes,injector:n._loadedInjector}):$F(e,n,r,this.urlSerializer).pipe(xe(i=>i?this.configLoader.loadChildren(e,n).pipe(Je(o=>{n._loadedRoutes=o.routes,n._loadedInjector=o.injector})):qF(n))):q({routes:[],injector:e})}};function tV(t){t.sort((e,n)=>e.value.outlet===X?-1:n.value.outlet===X?1:e.value.outlet.localeCompare(n.value.outlet))}function nV(t){let e=t.value.routeConfig;return e&&e.path===""}function jC(t){let e=[],n=new Set;for(let r of t){if(!nV(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=jC(r.children);e.push(new xt(r.value,i))}return e.filter(r=>!n.has(r))}function dC(t){return t.data||{}}function hC(t){return t.resolve||{}}function rV(t,e,n,r,i,o){return xe(s=>XF(t,e,n,r,s.extractedUrl,i,o).pipe(se(({state:a,tree:u})=>ve(F({},s),{targetSnapshot:a,urlAfterRedirects:u}))))}function iV(t,e){return xe(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return q(n);let o=new Set(i.map(u=>u.route)),s=new Set;for(let u of o)if(!s.has(u))for(let l of UC(u))s.add(l);let a=0;return Se(s).pipe(Er(u=>o.has(u)?oV(u,r,t,e):(u.data=_d(u,u.parent,t).resolve,q(void 0))),Je(()=>a++),fo(1),xe(u=>a===s.size?q(n):_t))})}function UC(t){let e=t.children.map(n=>UC(n)).flat();return[t,...e]}function oV(t,e,n,r){let i=t.routeConfig,o=t._resolve;return i?.title!==void 0&&!MC(i)&&(o[Ya]=i.title),sV(o,t,e,r).pipe(se(s=>(t._resolvedData=s,t.data=_d(t,t.parent,n).resolve,null)))}function sV(t,e,n,r){let i=Sm(t);if(i.length===0)return q({});let o={};return Se(i).pipe(xe(s=>aV(t[s],e,n,r).pipe(Hn(),Je(a=>{if(a instanceof Wo)throw Id(new xr,a);o[s]=a}))),fo(1),se(()=>o),Bn(s=>LC(s)?_t:uo(s)))}function aV(t,e,n,r){let i=Za(e)??r,o=Ko(t,i),s=o.resolve?o.resolve(e,n):st(i,()=>o(e,n));return Or(s)}function bm(t){return Mt(e=>{let n=t(e);return n?Se(n).pipe(se(()=>e)):q(e)})}var qm=(()=>{class t{buildTitle(n){let r,i=n.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===X);return r}getResolvedTitleForRoute(n){return n.data[Ya]}static \u0275fac=function(r){return new(r||t)};static \u0275prov=B({token:t,factory:()=>x(BC),providedIn:"root"})}return t})(),BC=(()=>{class t extends qm{title;constructor(n){super(),this.title=n}updateTitle(n){let r=this.buildTitle(n);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||t)(G(oC))};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),bi=new U("",{providedIn:"root",factory:()=>({})}),Ci=new U(""),Dd=(()=>{class t{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=x(Eb);loadComponent(n){if(this.componentLoaders.get(n))return this.componentLoaders.get(n);if(n._loadedComponent)return q(n._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(n);let r=Or(n.loadComponent()).pipe(se(HC),Je(o=>{this.onLoadEndListener&&this.onLoadEndListener(n),n._loadedComponent=o}),ta(()=>{this.componentLoaders.delete(n)})),i=new oo(r,()=>new Ye).pipe(io());return this.componentLoaders.set(n,i),i}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return q({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=$C(r,this.compiler,n,this.onLoadEndListener).pipe(ta(()=>{this.childrenLoaders.delete(r)})),s=new oo(o,()=>new Ye).pipe(io());return this.childrenLoaders.set(r,s),s}static \u0275fac=function(r){return new(r||t)};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function $C(t,e,n,r){return Or(t.loadChildren()).pipe(se(HC),xe(i=>i instanceof tm||Array.isArray(i)?q(i):Se(e.compileModuleAsync(i))),se(i=>{r&&r(t);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(n).injector,s=o.get(Ci,[],{optional:!0,self:!0}).flat()),{routes:s.map(zm),injector:o}}))}function cV(t){return t&&typeof t=="object"&&"default"in t}function HC(t){return cV(t)?t.default:t}var bd=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=B({token:t,factory:()=>x(uV),providedIn:"root"})}return t})(),uV=(()=>{class t{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}static \u0275fac=function(r){return new(r||t)};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Wm=new U(""),Gm=new U("");function zC(t,e,n){let r=t.get(Gm),i=t.get(qe);return t.get(fe).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(l=>setTimeout(l));let o,s=new Promise(l=>{o=l}),a=i.startViewTransition(()=>(o(),lV(t))),{onViewTransitionCreated:u}=r;return u&&st(t,()=>u({transition:a,from:e,to:n})),s})}function lV(t){return new Promise(e=>{jg({read:()=>setTimeout(e)},{injector:t})})}var Km=new U(""),Cd=(()=>{class t{currentNavigation=null;currentTransition=null;lastSuccessfulNavigation=null;events=new Ye;transitionAbortSubject=new Ye;configLoader=x(Dd);environmentInjector=x(it);destroyRef=x(Cr);urlSerializer=x(Ti);rootContexts=x(Di);location=x(Mr);inputBindingEnabled=x(Ja,{optional:!0})!==null;titleStrategy=x(qm);options=x(bi,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=x(bd);createViewTransition=x(Wm,{optional:!0});navigationErrorHandler=x(Km,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>q(void 0);rootComponentType=null;destroyed=!1;constructor(){let n=i=>this.events.next(new dd(i)),r=i=>this.events.next(new hd(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=n,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(n){let r=++this.navigationId;this.transitions?.next(ve(F({},n),{extractedUrl:this.urlHandlingStrategy.extract(n.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,id:r}))}setupNavigations(n){return this.transitions=new Ze(null),this.transitions.pipe(Et(r=>r!==null),Mt(r=>{let i=!1,o=!1;return q(r).pipe(Mt(s=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",St.SupersededByNewNavigation),_t;this.currentTransition=r,this.currentNavigation={id:s.id,initialUrl:s.rawUrl,extractedUrl:s.extractedUrl,targetBrowserUrl:typeof s.extras.browserUrl=="string"?this.urlSerializer.parse(s.extras.browserUrl):s.extras.browserUrl,trigger:s.source,extras:s.extras,previousNavigation:this.lastSuccessfulNavigation?ve(F({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let a=!n.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),u=s.extras.onSameUrlNavigation??n.onSameUrlNavigation;if(!a&&u!=="reload"){let l="";return this.events.next(new Tn(s.id,this.urlSerializer.serialize(s.rawUrl),l,$o.IgnoredSameUrlNavigation)),s.resolve(!1),_t}if(this.urlHandlingStrategy.shouldProcessUrl(s.rawUrl))return q(s).pipe(Mt(l=>(this.events.next(new kr(l.id,this.urlSerializer.serialize(l.extractedUrl),l.source,l.restoredState)),l.id!==this.navigationId?_t:Promise.resolve(l))),rV(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,this.paramsInheritanceStrategy),Je(l=>{r.targetSnapshot=l.targetSnapshot,r.urlAfterRedirects=l.urlAfterRedirects,this.currentNavigation=ve(F({},this.currentNavigation),{finalUrl:l.urlAfterRedirects});let h=new Ha(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}));if(a&&this.urlHandlingStrategy.shouldProcessUrl(s.currentRawUrl)){let{id:l,extractedUrl:h,source:p,restoredState:m,extras:y}=s,w=new kr(l,this.urlSerializer.serialize(h),p,m);this.events.next(w);let R=RC(this.rootComponentType).snapshot;return this.currentTransition=r=ve(F({},s),{targetSnapshot:R,urlAfterRedirects:h,extras:ve(F({},y),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=h,q(r)}else{let l="";return this.events.next(new Tn(s.id,this.urlSerializer.serialize(s.extractedUrl),l,$o.IgnoredByUrlHandlingStrategy)),s.resolve(!1),_t}}),Je(s=>{let a=new ad(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),se(s=>(this.currentTransition=r=ve(F({},s),{guards:TF(s.targetSnapshot,s.currentSnapshot,this.rootContexts)}),r)),kF(this.environmentInjector,s=>this.events.next(s)),Je(s=>{if(r.guardsResult=s.guardsResult,s.guardsResult&&typeof s.guardsResult!="boolean")throw Id(this.urlSerializer,s.guardsResult);let a=new cd(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot,!!s.guardsResult);this.events.next(a)}),Et(s=>s.guardsResult?!0:(this.cancelNavigationTransition(s,"",St.GuardRejected),!1)),bm(s=>{if(s.guards.canActivateChecks.length!==0)return q(s).pipe(Je(a=>{let u=new ud(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(u)}),Mt(a=>{let u=!1;return q(a).pipe(iV(this.paramsInheritanceStrategy,this.environmentInjector),Je({next:()=>u=!0,complete:()=>{u||this.cancelNavigationTransition(a,"",St.NoDataFromResolver)}}))}),Je(a=>{let u=new ld(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(u)}))}),bm(s=>{let a=u=>{let l=[];u.routeConfig?.loadComponent&&!u.routeConfig._loadedComponent&&l.push(this.configLoader.loadComponent(u.routeConfig).pipe(Je(h=>{u.component=h}),se(()=>{})));for(let h of u.children)l.push(...a(h));return l};return ea(a(s.targetSnapshot.root)).pipe(wr(null),$n(1))}),bm(()=>this.afterPreactivation()),Mt(()=>{let{currentSnapshot:s,targetSnapshot:a}=r,u=this.createViewTransition?.(this.environmentInjector,s.root,a.root);return u?Se(u).pipe(se(()=>r)):q(r)}),se(s=>{let a=vF(n.routeReuseStrategy,s.targetSnapshot,s.currentRouterState);return this.currentTransition=r=ve(F({},s),{targetRouterState:a}),this.currentNavigation.targetRouterState=a,r}),Je(()=>{this.events.next(new za)}),wF(this.rootContexts,n.routeReuseStrategy,s=>this.events.next(s),this.inputBindingEnabled),$n(1),Je({next:s=>{i=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new on(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects))),this.titleStrategy?.updateTitle(s.targetRouterState.snapshot),s.resolve(!0)},complete:()=>{i=!0}}),hp(this.transitionAbortSubject.pipe(Je(s=>{throw s}))),ta(()=>{!i&&!o&&this.cancelNavigationTransition(r,"",St.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation=null,this.currentTransition=null)}),Bn(s=>{if(this.destroyed)return r.resolve(!1),_t;if(o=!0,OC(s))this.events.next(new En(r.id,this.urlSerializer.serialize(r.extractedUrl),s.message,s.cancellationCode)),EF(s)?this.events.next(new qo(s.url,s.navigationBehaviorOptions)):r.resolve(!1);else{let a=new Ho(r.id,this.urlSerializer.serialize(r.extractedUrl),s,r.targetSnapshot??void 0);try{let u=st(this.environmentInjector,()=>this.navigationErrorHandler?.(a));if(u instanceof Wo){let{message:l,cancellationCode:h}=Id(this.urlSerializer,u);this.events.next(new En(r.id,this.urlSerializer.serialize(r.extractedUrl),l,h)),this.events.next(new qo(u.redirectTo,u.navigationBehaviorOptions))}else throw this.events.next(a),s}catch(u){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(u)}}return _t}))}))}cancelNavigationTransition(n,r,i){let o=new En(n.id,this.urlSerializer.serialize(n.extractedUrl),r,i);this.events.next(o),n.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let n=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return n.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||t)};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function dV(t){return t!==id}var qC=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=B({token:t,factory:()=>x(hV),providedIn:"root"})}return t})(),wd=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},hV=(()=>{class t extends wd{static \u0275fac=(()=>{let n;return function(i){return(n||(n=Ng(t)))(i||t)}})();static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),WC=(()=>{class t{urlSerializer=x(Ti);options=x(bi,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=x(Mr);urlHandlingStrategy=x(bd);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new wn;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:n,initialUrl:r,targetBrowserUrl:i}){let o=n!==void 0?this.urlHandlingStrategy.merge(n,r):r,s=i??o;return s instanceof wn?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:n,finalUrl:r,initialUrl:i}){r&&n?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=n):this.rawUrlTree=i}routerState=RC(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:n}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n??this.rawUrlTree)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=B({token:t,factory:()=>x(fV),providedIn:"root"})}return t})(),fV=(()=>{class t extends WC{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(n){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{n(r.url,r.state,"popstate")})})}handleRouterEvent(n,r){n instanceof kr?this.updateStateMemento():n instanceof Tn?this.commitTransition(r):n instanceof Ha?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):n instanceof za?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):n instanceof En&&(n.code===St.GuardRejected||n.code===St.NoDataFromResolver)?this.restoreHistory(r):n instanceof Ho?this.restoreHistory(r,!0):n instanceof on&&(this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId)}setBrowserUrl(n,{extras:r,id:i}){let{replaceUrl:o,state:s}=r;if(this.location.isCurrentPathEqualTo(n)||o){let a=this.browserPageId,u=F(F({},s),this.generateNgRouterState(i,a));this.location.replaceState(n,"",u)}else{let a=F(F({},s),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(n,"",a)}}restoreHistory(n,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===n.finalUrl&&o===0&&(this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return this.canceledNavigationResolution==="computed"?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}static \u0275fac=(()=>{let n;return function(i){return(n||(n=Ng(t)))(i||t)}})();static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Sd(t,e){t.events.pipe(Et(n=>n instanceof on||n instanceof En||n instanceof Ho||n instanceof Tn),se(n=>n instanceof on||n instanceof Tn?0:(n instanceof En?n.code===St.Redirect||n.code===St.SupersededByNewNavigation:!1)?2:1),Et(n=>n!==2),$n(1)).subscribe(()=>{e()})}var pV={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},gV={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},er=(()=>{class t{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=x(ub);stateManager=x(WC);options=x(bi,{optional:!0})||{};pendingTasks=x(_i);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=x(Cd);urlSerializer=x(Ti);location=x(Mr);urlHandlingStrategy=x(bd);_events=new Ye;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=x(qC);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=x(Ci,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!x(Ja,{optional:!0});constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:n=>{this.console.warn(n)}}),this.subscribeToNavigationEvents()}eventsSubscription=new Ne;subscribeToNavigationEvents(){let n=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof En&&r.code!==St.Redirect&&r.code!==St.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof on)this.navigated=!0;else if(r instanceof qo){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),u=F({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||dV(i.source)},s);this.scheduleNavigation(a,id,null,u,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}yV(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),id,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((n,r,i)=>{this.navigateToSyncWithBrowser(n,i,r)})}navigateToSyncWithBrowser(n,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let u=F({},i);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(o.state=u)}let a=this.parseUrl(n);this.scheduleNavigation(a,r,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(zm),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:u}=r,l=u?this.currentUrlTree.fragment:s,h=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":h=F(F({},this.currentUrlTree.queryParams),o);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=o||null}h!==null&&(h=this.removeEmptyProps(h));let p;try{let m=i?i.snapshot:this.routerState.snapshot.root;p=bC(m)}catch{(typeof n[0]!="string"||n[0][0]!=="/")&&(n=[]),p=this.currentUrlTree.root}return CC(p,n,h,l??null)}navigateByUrl(n,r={skipLocationChange:!1}){let i=Bo(n)?n:this.parseUrl(n),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,id,null,r)}navigate(n,r={skipLocationChange:!1}){return mV(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){try{return this.urlSerializer.parse(n)}catch{return this.urlSerializer.parse("/")}}isActive(n,r){let i;if(r===!0?i=F({},pV):r===!1?i=F({},gV):i=r,Bo(n))return sC(this.currentUrlTree,n,i);let o=this.parseUrl(n);return sC(this.currentUrlTree,o,i)}removeEmptyProps(n){return Object.entries(n).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(n,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,u,l;s?(a=s.resolve,u=s.reject,l=s.promise):l=new Promise((p,m)=>{a=p,u=m});let h=this.pendingTasks.add();return Sd(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:o,resolve:a,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(p=>Promise.reject(p))}static \u0275fac=function(r){return new(r||t)};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function mV(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new j(4008,!1)}function yV(t){return!(t instanceof za)&&!(t instanceof qo)}var ec=class{};var GC=(()=>{class t{router;injector;preloadingStrategy;loader;subscription;constructor(n,r,i,o){this.router=n,this.injector=r,this.preloadingStrategy=i,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(Et(n=>n instanceof on),Er(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(n,r){let i=[];for(let o of r){o.providers&&!o._injector&&(o._injector=Da(o.providers,n,`Route: ${o.path}`));let s=o._injector??n,a=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(a,o.children??o._loadedRoutes))}return Se(i).pipe(lo())}preloadConfig(n,r){return this.preloadingStrategy.preload(r,()=>{let i;r.loadChildren&&r.canLoad===void 0?i=this.loader.loadChildren(n,r):i=q(null);let o=i.pipe(xe(s=>s===null?q(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??n,s.routes))));if(r.loadComponent&&!r._loadedComponent){let s=this.loader.loadComponent(r);return Se([o,s]).pipe(lo())}else return o})}static \u0275fac=function(r){return new(r||t)(G(er),G(it),G(ec),G(Dd))};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),KC=new U(""),vV=(()=>{class t{urlSerializer;transitions;viewportScroller;zone;options;routerEventsSubscription;scrollEventsSubscription;lastId=0;lastSource="imperative";restoredId=0;store={};constructor(n,r,i,o,s={}){this.urlSerializer=n,this.transitions=r,this.viewportScroller=i,this.zone=o,this.options=s,s.scrollPositionRestoration||="disabled",s.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof kr?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=n.navigationTrigger,this.restoredId=n.restoredState?n.restoredState.navigationId:0):n instanceof on?(this.lastId=n.id,this.scheduleScrollEvent(n,this.urlSerializer.parse(n.urlAfterRedirects).fragment)):n instanceof Tn&&n.code===$o.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(n,this.urlSerializer.parse(n.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof zo&&(n.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(n.position):n.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(n.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(n,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new zo(n,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static \u0275fac=function(r){JD()};static \u0275prov=B({token:t,factory:t.\u0275fac})}return t})();function _V(t,...e){return _n([{provide:Ci,multi:!0,useValue:t},[],{provide:Xn,useFactory:QC,deps:[er]},{provide:Ll,multi:!0,useFactory:YC},e.map(n=>n.\u0275providers)])}function QC(t){return t.routerState.root}function tc(t,e){return{\u0275kind:t,\u0275providers:e}}function YC(){let t=x(He);return e=>{let n=t.get(mi);if(e!==n.components[0])return;let r=t.get(er),i=t.get(ZC);t.get(Ym)===1&&r.initialNavigation(),t.get(eS,null,ee.Optional)?.setUpPreloading(),t.get(KC,null,ee.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var ZC=new U("",{factory:()=>new Ye}),Ym=new U("",{providedIn:"root",factory:()=>1});function JC(){let t=[{provide:Ym,useValue:0},nm(()=>{let e=x(He);return e.get(sm,Promise.resolve()).then(()=>new Promise(r=>{let i=e.get(er),o=e.get(ZC);Sd(i,()=>{r(!0)}),e.get(Cd).afterPreactivation=()=>(r(!0),o.closed?q(void 0):o),i.initialNavigation()}))})];return tc(2,t)}function XC(){let t=[nm(()=>{x(er).setUpLocationChangeListener()}),{provide:Ym,useValue:2}];return tc(3,t)}var eS=new U("");function tS(t){return tc(0,[{provide:eS,useExisting:GC},{provide:ec,useExisting:t}])}function nS(){return tc(8,[$m,{provide:Ja,useExisting:$m}])}function rS(t){Ar("NgRouterViewTransitions");let e=[{provide:Wm,useValue:zC},{provide:Gm,useValue:F({skipNextTransition:!!t?.skipInitialTransition},t)}];return tc(9,e)}var iS=[Mr,{provide:Ti,useClass:xr},er,Di,{provide:Xn,useFactory:QC,deps:[er]},Dd,[]],IV=(()=>{class t{constructor(){}static forRoot(n,r){return{ngModule:t,providers:[iS,[],{provide:Ci,multi:!0,useValue:n},[],r?.errorHandler?{provide:Km,useValue:r.errorHandler}:[],{provide:bi,useValue:r||{}},r?.useHash?wV():TV(),EV(),r?.preloadingStrategy?tS(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?DV(r):[],r?.bindToComponentInputs?nS().\u0275providers:[],r?.enableViewTransitions?rS().\u0275providers:[],bV()]}}static forChild(n){return{ngModule:t,providers:[{provide:Ci,multi:!0,useValue:n}]}}static \u0275fac=function(r){return new(r||t)};static \u0275mod=Oo({type:t});static \u0275inj=No({})}return t})();function EV(){return{provide:KC,useFactory:()=>{let t=x(Yb),e=x(fe),n=x(bi),r=x(Cd),i=x(Ti);return n.scrollOffset&&t.setOffset(n.scrollOffset),new vV(i,r,t,e,n)}}}function wV(){return{provide:Yn,useClass:dm}}function TV(){return{provide:Yn,useClass:Ul}}function DV(t){return[t.initialNavigation==="disabled"?XC().\u0275providers:[],t.initialNavigation==="enabledBlocking"?JC().\u0275providers:[]]}var Qm=new U("");function bV(){return[{provide:Qm,useFactory:YC},{provide:Ll,multi:!0,useExisting:Qm}]}function SV(t,e){let n=!e?.manualCleanup;n&&!e?.injector&&wl(SV);let r=n?e?.injector?.get(Cr)??x(Cr):null,i=AV(e?.equal),o;e?.requireSync?o=kg({kind:0},{equal:i}):o=kg({kind:1,value:e?.initialValue},{equal:i});let s,a=t.subscribe({next:u=>o.set({kind:1,value:u}),error:u=>{if(e?.rejectErrors)throw u;o.set({kind:2,error:u})},complete:()=>{s?.()}});if(e?.requireSync&&o().kind===0)throw new j(601,!1);return s=r?.onDestroy(a.unsubscribe.bind(a)),Cb(()=>{let u=o();switch(u.kind){case 1:return u.value;case 2:throw u.error;case 0:throw new j(601,!1)}},{equal:e?.equal})}function AV(t=Object.is){return(e,n)=>e.kind===1&&n.kind===1&&t(e.value,n.value)}function Zm(t){t===void 0&&(wl(Zm),t=x(He));let e=t.get(Sl);return n=>new ie(r=>{let i=e.add(),o=!1;function s(){o||(i(),o=!0)}let a=n.subscribe({next:u=>{r.next(u),s()},complete:()=>{r.complete(),s()},error:u=>{r.error(u),s()}});return a.add(()=>{r.unsubscribe(),s()}),a})}var oS=()=>{};var cS=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},RV=function(t){let e=[],n=0,r=0;for(;n<t.length;){let i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=t[n++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=t[n++],s=t[n++],a=t[n++],u=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{let o=t[n++],s=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},Ad={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){let o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,l=u?t[i+2]:0,h=o>>2,p=(o&3)<<4|a>>4,m=(a&15)<<2|l>>6,y=l&63;u||(y=64,s||(m=64)),r.push(n[h],n[p],n[m],n[y])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(cS(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):RV(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){let o=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;let l=i<t.length?n[t.charAt(i)]:64;++i;let p=i<t.length?n[t.charAt(i)]:64;if(++i,o==null||a==null||l==null||p==null)throw new Xm;let m=o<<2|a>>4;if(r.push(m),l!==64){let y=a<<4&240|l>>2;if(r.push(y),p!==64){let w=l<<6&192|p;r.push(w)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},Xm=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},NV=function(t){let e=cS(t);return Ad.encodeByteArray(e,!0)},rc=function(t){return NV(t).replace(/\./g,"")},Rd=function(t){try{return Ad.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function ty(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var MV=()=>ty().__FIREBASE_DEFAULTS__,PV=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},xV=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&Rd(t[1]);return e&&JSON.parse(e)},Nd=()=>{try{return oS()||MV()||PV()||xV()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},ny=t=>{var e,n;return(n=(e=Nd())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},uS=t=>{let e=ny(t);if(!e)return;let n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},ry=()=>{var t;return(t=Nd())===null||t===void 0?void 0:t.config},iy=t=>{var e;return(e=Nd())===null||e===void 0?void 0:e[`_${t}`]};var Si=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};function Ai(t){return t.endsWith(".cloudworkstations.dev")}function Md(t){return E(this,null,function*(){return(yield fetch(t,{credentials:"include"})).ok})}function lS(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[rc(JSON.stringify(n)),rc(JSON.stringify(s)),""].join(".")}var nc={};function kV(){let t={prod:[],emulator:[]};for(let e of Object.keys(nc))nc[e]?t.emulator.push(e):t.prod.push(e);return t}function OV(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}var sS=!1;function Pd(t,e){if(typeof window>"u"||typeof document>"u"||!Ai(window.location.host)||nc[t]===e||nc[t]||sS)return;nc[t]=e;function n(m){return`__firebase__banner__${m}`}let r="__firebase__banner",o=kV().prod.length>0;function s(){let m=document.getElementById(r);m&&m.remove()}function a(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function u(m,y){m.setAttribute("width","24"),m.setAttribute("id",y),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function l(){let m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{sS=!0,s()},m}function h(m,y){m.setAttribute("id",y),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function p(){let m=OV(r),y=n("text"),w=document.getElementById(y)||document.createElement("span"),R=n("learnmore"),N=document.getElementById(R)||document.createElement("a"),O=n("preprendIcon"),$=document.getElementById(O)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){let K=m.element;a(K),h(N,R);let Ee=l();u($,O),K.append($,w,N,Ee),document.body.appendChild(K)}o?(w.innerText="Preview backend disconnected.",$.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):($.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,w.innerText="Preview backend running in this workspace."),w.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}function We(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function dS(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(We())}function LV(){var t;let e=(t=Nd())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function hS(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function fS(){let t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function pS(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function gS(){let t=We();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function mS(){return!LV()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ic(){try{return typeof indexedDB=="object"}catch{return!1}}function yS(){return new Promise((t,e)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}var FV="FirebaseError",Ot=class t extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=FV,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,sn.prototype.create)}},sn=class{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){let r=n[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?VV(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new Ot(i,a,r)}};function VV(t,e){return t.replace(jV,(n,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var jV=/\{\$([^}]+)}/g;function vS(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function an(t,e){if(t===e)return!0;let n=Object.keys(t),r=Object.keys(e);for(let i of n){if(!r.includes(i))return!1;let o=t[i],s=e[i];if(aS(o)&&aS(s)){if(!an(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!n.includes(i))return!1;return!0}function aS(t){return t!==null&&typeof t=="object"}function Qo(t){let e=[];for(let[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function _S(t,e){let n=new ey(t,e);return n.subscribe.bind(n)}var ey=class{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");UV(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Jm),i.error===void 0&&(i.error=Jm),i.complete===void 0&&(i.complete=Jm);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function UV(t,e){if(typeof t!="object"||t===null)return!1;for(let n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Jm(){}var x7=4*60*60*1e3;function Fe(t){return t&&t._delegate?t._delegate:t}var yt=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Ri="[DEFAULT]";var oy=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let r=new Si;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if($V(e))try{this.getOrInitializeService({instanceIdentifier:Ri})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=Ri){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return E(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=Ri){return this.instances.has(e)}getOptions(e=Ri){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[o,s]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(e,n){var r;let i=this.normalizeInstanceIdentifier(n),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);let s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){let r=this.onInitCallbacks.get(n);if(r)for(let i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:BV(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ri){return this.component?this.component.multipleInstances?e:Ri:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function BV(t){return t===Ri?void 0:t}function $V(t){return t.instantiationMode==="EAGER"}var xd=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new oy(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var HV=[],ce=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}(ce||{}),zV={debug:ce.DEBUG,verbose:ce.VERBOSE,info:ce.INFO,warn:ce.WARN,error:ce.ERROR,silent:ce.SILENT},qV=ce.INFO,WV={[ce.DEBUG]:"log",[ce.VERBOSE]:"log",[ce.INFO]:"info",[ce.WARN]:"warn",[ce.ERROR]:"error"},GV=(t,e,...n)=>{if(e<t.logLevel)return;let r=new Date().toISOString(),i=WV[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Dn=class{constructor(e){this.name=e,this._logLevel=qV,this._logHandler=GV,this._userLogHandler=null,HV.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ce))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?zV[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ce.DEBUG,...e),this._logHandler(this,ce.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ce.VERBOSE,...e),this._logHandler(this,ce.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ce.INFO,...e),this._logHandler(this,ce.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ce.WARN,...e),this._logHandler(this,ce.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ce.ERROR,...e),this._logHandler(this,ce.ERROR,...e)}};var KV=(t,e)=>e.some(n=>t instanceof n),IS,ES;function QV(){return IS||(IS=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function YV(){return ES||(ES=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var wS=new WeakMap,ay=new WeakMap,TS=new WeakMap,sy=new WeakMap,uy=new WeakMap;function ZV(t){let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",s)},o=()=>{n(bn(t.result)),i()},s=()=>{r(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",s)});return e.then(n=>{n instanceof IDBCursor&&wS.set(n,t)}).catch(()=>{}),uy.set(e,t),e}function JV(t){if(ay.has(t))return;let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",s),t.removeEventListener("abort",s)},o=()=>{n(),i()},s=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",s),t.addEventListener("abort",s)});ay.set(t,e)}var cy={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return ay.get(t);if(e==="objectStoreNames")return t.objectStoreNames||TS.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return bn(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function DS(t){cy=t(cy)}function XV(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let r=t.call(kd(this),e,...n);return TS.set(r,e.sort?e.sort():[e]),bn(r)}:YV().includes(t)?function(...e){return t.apply(kd(this),e),bn(wS.get(this))}:function(...e){return bn(t.apply(kd(this),e))}}function e2(t){return typeof t=="function"?XV(t):(t instanceof IDBTransaction&&JV(t),KV(t,QV())?new Proxy(t,cy):t)}function bn(t){if(t instanceof IDBRequest)return ZV(t);if(sy.has(t))return sy.get(t);let e=e2(t);return e!==t&&(sy.set(t,e),uy.set(e,t)),e}var kd=t=>uy.get(t);function CS(t,e,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(t,e),a=bn(s);return r&&s.addEventListener("upgradeneeded",u=>{r(bn(s.result),u.oldVersion,u.newVersion,bn(s.transaction),u)}),n&&s.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{o&&u.addEventListener("close",()=>o()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var t2=["get","getKey","getAll","getAllKeys","count"],n2=["put","add","delete","clear"],ly=new Map;function bS(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(ly.get(e))return ly.get(e);let n=e.replace(/FromIndex$/,""),r=e!==n,i=n2.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||t2.includes(n)))return;let o=function(s,...a){return E(this,null,function*(){let u=this.transaction(s,i?"readwrite":"readonly"),l=u.store;return r&&(l=l.index(a.shift())),(yield Promise.all([l[n](...a),i&&u.done]))[0]})};return ly.set(e,o),o}DS(t=>ve(F({},t),{get:(e,n,r)=>bS(e,n)||t.get(e,n,r),has:(e,n)=>!!bS(e,n)||t.has(e,n)}));var hy=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(r2(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function r2(t){let e=t.getComponent();return e?.type==="VERSION"}var fy="@firebase/app",SS="0.13.0";var tr=new Dn("@firebase/app"),i2="@firebase/app-compat",o2="@firebase/analytics-compat",s2="@firebase/analytics",a2="@firebase/app-check-compat",c2="@firebase/app-check",u2="@firebase/auth",l2="@firebase/auth-compat",d2="@firebase/database",h2="@firebase/data-connect",f2="@firebase/database-compat",p2="@firebase/functions",g2="@firebase/functions-compat",m2="@firebase/installations",y2="@firebase/installations-compat",v2="@firebase/messaging",_2="@firebase/messaging-compat",I2="@firebase/performance",E2="@firebase/performance-compat",w2="@firebase/remote-config",T2="@firebase/remote-config-compat",D2="@firebase/storage",b2="@firebase/storage-compat",C2="@firebase/firestore",S2="@firebase/ai",A2="@firebase/firestore-compat",R2="firebase",N2="11.8.0";var py="[DEFAULT]",M2={[fy]:"fire-core",[i2]:"fire-core-compat",[s2]:"fire-analytics",[o2]:"fire-analytics-compat",[c2]:"fire-app-check",[a2]:"fire-app-check-compat",[u2]:"fire-auth",[l2]:"fire-auth-compat",[d2]:"fire-rtdb",[h2]:"fire-data-connect",[f2]:"fire-rtdb-compat",[p2]:"fire-fn",[g2]:"fire-fn-compat",[m2]:"fire-iid",[y2]:"fire-iid-compat",[v2]:"fire-fcm",[_2]:"fire-fcm-compat",[I2]:"fire-perf",[E2]:"fire-perf-compat",[w2]:"fire-rc",[T2]:"fire-rc-compat",[D2]:"fire-gcs",[b2]:"fire-gcs-compat",[C2]:"fire-fst",[A2]:"fire-fst-compat",[S2]:"fire-vertex","fire-js":"fire-js",[R2]:"fire-js-all"};var oc=new Map,P2=new Map,gy=new Map;function AS(t,e){try{t.container.addComponent(e)}catch(n){tr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function cn(t){let e=t.name;if(gy.has(e))return tr.debug(`There were multiple attempts to register component ${e}.`),!1;gy.set(e,t);for(let n of oc.values())AS(n,t);for(let n of P2.values())AS(n,t);return!0}function Yo(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function At(t){return t==null?!1:t.settings!==void 0}var x2={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Lr=new sn("app","Firebase",x2);var my=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new yt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Lr.create("app-deleted",{appName:this._name})}};var Fr=N2;function _y(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let r=Object.assign({name:py,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw Lr.create("bad-app-name",{appName:String(i)});if(n||(n=ry()),!n)throw Lr.create("no-options");let o=oc.get(i);if(o){if(an(n,o.options)&&an(r,o.config))return o;throw Lr.create("duplicate-app",{appName:i})}let s=new xd(i);for(let u of gy.values())s.addComponent(u);let a=new my(n,r,s);return oc.set(i,a),a}function Ni(t=py){let e=oc.get(t);if(!e&&t===py&&ry())return _y();if(!e)throw Lr.create("no-app",{appName:t});return e}function Od(){return Array.from(oc.values())}function Me(t,e,n){var r;let i=(r=M2[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);let o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){let a=[`Unable to register library "${i}" with version "${e}":`];o&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),tr.warn(a.join(" "));return}cn(new yt(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var k2="firebase-heartbeat-database",O2=1,sc="firebase-heartbeat-store",dy=null;function PS(){return dy||(dy=CS(k2,O2,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(sc)}catch(n){console.warn(n)}}}}).catch(t=>{throw Lr.create("idb-open",{originalErrorMessage:t.message})})),dy}function L2(t){return E(this,null,function*(){try{let n=(yield PS()).transaction(sc),r=yield n.objectStore(sc).get(xS(t));return yield n.done,r}catch(e){if(e instanceof Ot)tr.warn(e.message);else{let n=Lr.create("idb-get",{originalErrorMessage:e?.message});tr.warn(n.message)}}})}function RS(t,e){return E(this,null,function*(){try{let r=(yield PS()).transaction(sc,"readwrite");yield r.objectStore(sc).put(e,xS(t)),yield r.done}catch(n){if(n instanceof Ot)tr.warn(n.message);else{let r=Lr.create("idb-set",{originalErrorMessage:n?.message});tr.warn(r.message)}}})}function xS(t){return`${t.name}!${t.options.appId}`}var F2=1024,V2=30,yy=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new vy(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return E(this,null,function*(){var e,n;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=NS();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats.length>V2){let s=U2(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){tr.warn(r)}})}getHeartbeatsHeader(){return E(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let n=NS(),{heartbeatsToSend:r,unsentEntries:i}=j2(this._heartbeatsCache.heartbeats),o=rc(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return tr.warn(n),""}})}};function NS(){return new Date().toISOString().substring(0,10)}function j2(t,e=F2){let n=[],r=t.slice();for(let i of t){let o=n.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),MS(n)>e){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),MS(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var vy=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return E(this,null,function*(){return ic()?yS().then(()=>!0).catch(()=>!1):!1})}read(){return E(this,null,function*(){if(yield this._canUseIndexedDBPromise){let n=yield L2(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return E(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return RS(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return E(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return RS(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function MS(t){return rc(JSON.stringify({version:2,heartbeats:t})).length}function U2(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}function B2(t){cn(new yt("platform-logger",e=>new hy(e),"PRIVATE")),cn(new yt("heartbeat",e=>new yy(e),"PRIVATE")),Me(fy,SS,t),Me(fy,SS,"esm2017"),Me("fire-js","")}B2("");var $2="firebase",H2="11.8.1";Me($2,H2,"app");var Vr=new Ro("ANGULARFIRE2_VERSION");function ac(t,e,n){if(e){if(e.length===1)return e[0];let o=e.filter(s=>s.app===n);if(o.length===1)return o[0]}return n.container.getProvider(t).getImmediate({optional:!0})}var Jo=(t,e)=>{let n=e?[e]:Od(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},Zo=function(t){return t[t.SILENT=0]="SILENT",t[t.WARN=1]="WARN",t[t.VERBOSE=2]="VERBOSE",t}(Zo||{}),kS=im()&&typeof Zone<"u"?Zo.WARN:Zo.SILENT;var Ld=class{zone;delegate;constructor(e,n=up){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){let i=this.zone,o=function(s){i?i.runGuarded(()=>{e.apply(this,[s])}):e.apply(this,[s])};return this.delegate.schedule(o,n,r)}},jr=(()=>{class t{outsideAngular;insideAngular;constructor(){let n=x(fe);this.outsideAngular=n.runOutsideAngular(()=>new Ld(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=n.run(()=>new Ld(typeof Zone>"u"?void 0:Zone.current,Xs))}static \u0275fac=function(r){return new(r||t)};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),OS=!1;function z2(t,e){!OS&&(kS>Zo.SILENT||im())&&(OS=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),kS>=e&&console.warn(`Firebase API called outside injection context: ${t.name}`)}function q2(t){let e=x(fe,{optional:!0});return e?e.runOutsideAngular(()=>t()):t()}function Mi(t){let e=x(fe,{optional:!0});return e?e.run(()=>t()):t()}var W2=(t,e,n)=>(...r)=>(e&&setTimeout(e,0),st(n,()=>Mi(()=>t.apply(void 0,r)))),vt=(t,e,n)=>(n||=e?Zo.WARN:Zo.VERBOSE,function(){let r,i=arguments,o,s,a;try{o=x(jr),s=x(Sl),a=x(it)}catch{return z2(t,n),t.apply(this,i)}for(let l=0;l<arguments.length;l++)typeof i[l]=="function"&&(e&&(r||=Mi(()=>s.add())),i[l]=W2(i[l],r,a));let u=q2(()=>t.apply(this,i));return e?u instanceof ie?u.pipe(Ir(o.outsideAngular),_r(o.insideAngular),Zm(a)):u instanceof Promise?Mi(()=>new Promise((l,h)=>{s.run(()=>u).then(p=>st(a,()=>Mi(()=>l(p))),p=>st(a,()=>Mi(()=>h(p))))})):typeof u=="function"&&r?function(){return setTimeout(r,0),u.apply(this,arguments)}:Mi(()=>u):u instanceof ie?u.pipe(Ir(o.outsideAngular),_r(o.insideAngular)):Mi(()=>u)});var nr=class{constructor(e){return e}},Pi=class{constructor(){return Od()}};function G2(t){return t&&t.length===1?t[0]:new nr(Ni())}var Iy=new U("angularfire2._apps"),K2={provide:nr,useFactory:G2,deps:[[new Ut,Iy]]},Q2={provide:Pi,deps:[[new Ut,Iy]]};function Y2(t){return(e,n)=>{let r=n.get(Sr);Me("angularfire",Vr.full,"core"),Me("angularfire",Vr.full,"app"),Me("angular",Ib.full,r.toString());let i=e.runOutsideAngular(()=>t(n));return new nr(i)}}function EK(t,...e){return _n([K2,Q2,{provide:Iy,useFactory:Y2(t),multi:!0,deps:[fe,He,jr,...e]}])}var wK=vt(_y,!0);function YS(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var ZS=YS,JS=new sn("auth","Firebase",YS());var $d=new Dn("@firebase/auth");function Z2(t,...e){$d.logLevel<=ce.WARN&&$d.warn(`Auth (${Fr}): ${t}`,...e)}function Vd(t,...e){$d.logLevel<=ce.ERROR&&$d.error(`Auth (${Fr}): ${t}`,...e)}function Sn(t,...e){throw Vy(t,...e)}function un(t,...e){return Vy(t,...e)}function Fy(t,e,n){let r=Object.assign(Object.assign({},ZS()),{[e]:n});return new sn("auth","Firebase",r).create(e,{appName:t.name})}function $r(t){return Fy(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function J2(t,e,n){let r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Sn(t,"argument-error"),Fy(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Vy(t,...e){if(typeof t!="string"){let n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return JS.create(t,...e)}function W(t,e,...n){if(!t)throw Vy(e,...n)}function rr(t){let e="INTERNAL ASSERTION FAILED: "+t;throw Vd(e),new Error(e)}function or(t,e){t||rr(e)}function Ty(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function X2(){return LS()==="http:"||LS()==="https:"}function LS(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}function ej(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(X2()||fS()||"connection"in navigator)?navigator.onLine:!0}function tj(){if(typeof navigator>"u")return null;let t=navigator;return t.languages&&t.languages[0]||t.language||null}var xi=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,or(n>e,"Short delay should be less than long delay!"),this.isMobile=dS()||pS()}get(){return ej()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function jy(t,e){or(t.emulator,"Emulator should always be set here");let{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var Hd=class{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;rr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;rr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;rr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var nj={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var rj=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],ij=new xi(3e4,6e4);function th(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}function es(o,s,a,u){return E(this,arguments,function*(t,e,n,r,i={}){return XS(t,i,()=>E(null,null,function*(){let l={},h={};r&&(e==="GET"?h=r:l={body:JSON.stringify(r)});let p=Qo(Object.assign({key:t.config.apiKey},h)).slice(1),m=yield t._getAdditionalHeaders();m["Content-Type"]="application/json",t.languageCode&&(m["X-Firebase-Locale"]=t.languageCode);let y=Object.assign({method:e,headers:m},l);return hS()||(y.referrerPolicy="no-referrer"),t.emulatorConfig&&Ai(t.emulatorConfig.host)&&(y.credentials="include"),Hd.fetch()(yield tA(t,t.config.apiHost,n,p),y)}))})}function XS(t,e,n){return E(this,null,function*(){t._canInitEmulator=!1;let r=Object.assign(Object.assign({},nj),e);try{let i=new Dy(t),o=yield Promise.race([n(),i.promise]);i.clearNetworkTimeout();let s=yield o.json();if("needConfirmation"in s)throw Fd(t,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let a=o.ok?s.errorMessage:s.error.message,[u,l]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Fd(t,"credential-already-in-use",s);if(u==="EMAIL_EXISTS")throw Fd(t,"email-already-in-use",s);if(u==="USER_DISABLED")throw Fd(t,"user-disabled",s);let h=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw Fy(t,h,l);Sn(t,h)}}catch(i){if(i instanceof Ot)throw i;Sn(t,"network-request-failed",{message:String(i)})}})}function eA(o,s,a,u){return E(this,arguments,function*(t,e,n,r,i={}){let l=yield es(t,e,n,r,i);return"mfaPendingCredential"in l&&Sn(t,"multi-factor-auth-required",{_serverResponse:l}),l})}function tA(t,e,n,r){return E(this,null,function*(){let i=`${e}${n}?${r}`,o=t,s=o.config.emulator?jy(t.config,i):`${t.config.apiScheme}://${i}`;return rj.includes(n)&&(yield o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(s).toString():s})}var Dy=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(un(this.auth,"network-request-failed")),ij.get())})}};function Fd(t,e,n){let r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=un(t,e,r);return i.customData._tokenResponse=n,i}function oj(t,e){return E(this,null,function*(){return es(t,"POST","/v1/accounts:delete",e)})}function zd(t,e){return E(this,null,function*(){return es(t,"POST","/v1/accounts:lookup",e)})}function cc(t){if(t)try{let e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function Uy(t,e=!1){return E(this,null,function*(){let n=Fe(t),r=yield n.getIdToken(e),i=By(r);W(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:cc(Ey(i.auth_time)),issuedAtTime:cc(Ey(i.iat)),expirationTime:cc(Ey(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}})}function Ey(t){return Number(t)*1e3}function By(t){let[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Vd("JWT malformed, contained fewer than 3 sections"),null;try{let i=Rd(n);return i?JSON.parse(i):(Vd("Failed to decode base64 JWT payload"),null)}catch(i){return Vd("Caught error parsing JWT payload as JSON",i?.toString()),null}}function FS(t){let e=By(t);return W(e,"internal-error"),W(typeof e.exp<"u","internal-error"),W(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function lc(t,e,n=!1){return E(this,null,function*(){if(n)return e;try{return yield e}catch(r){throw r instanceof Ot&&sj(r)&&t.auth.currentUser===t&&(yield t.auth.signOut()),r}})}function sj({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}var by=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(()=>E(this,null,function*(){yield this.iteration()}),n)}iteration(){return E(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var dc=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=cc(this.lastLoginAt),this.creationTime=cc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function qd(t){return E(this,null,function*(){var e;let n=t.auth,r=yield t.getIdToken(),i=yield lc(t,zd(n,{idToken:r}));W(i?.users.length,n,"internal-error");let o=i.users[0];t._notifyReloadListener(o);let s=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?nA(o.providerUserInfo):[],a=aj(t.providerData,s),u=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!a?.length,h=u?l:!1,p={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new dc(o.createdAt,o.lastLoginAt),isAnonymous:h};Object.assign(t,p)})}function $y(t){return E(this,null,function*(){let e=Fe(t);yield qd(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function aj(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function nA(t){return t.map(e=>{var{providerId:n}=e,r=wu(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function cj(t,e){return E(this,null,function*(){let n=yield XS(t,{},()=>E(null,null,function*(){let r=Qo({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=t.config,s=yield tA(t,i,"/v1/token",`key=${o}`),a=yield t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",Hd.fetch()(s,{method:"POST",headers:a,body:r})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})}function uj(t,e){return E(this,null,function*(){return es(t,"POST","/v2/accounts:revokeToken",th(t,e))})}var uc=class t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){W(e.idToken,"internal-error"),W(typeof e.idToken<"u","internal-error"),W(typeof e.refreshToken<"u","internal-error");let n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):FS(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){W(e.length!==0,"internal-error");let n=FS(e);this.updateTokensAndExpiration(e,null,n)}getToken(e,n=!1){return E(this,null,function*(){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(W(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,n){return E(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:o}=yield cj(e,n);this.updateTokensAndExpiration(r,i,Number(o))})}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){let{refreshToken:r,accessToken:i,expirationTime:o}=n,s=new t;return r&&(W(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(W(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(W(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new t,this.toJSON())}_performRefresh(){return rr("not implemented")}};function Ur(t,e){W(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}var Br=class t{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,o=wu(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new by(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new dc(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(e){return E(this,null,function*(){let n=yield lc(this,this.stsTokenManager.getToken(this.auth,e));return W(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n})}getIdTokenResult(e){return Uy(this,e)}reload(){return $y(this)}_assign(e){this!==e&&(W(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let n=new t(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){W(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,n=!1){return E(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&(yield qd(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return E(this,null,function*(){if(At(this.auth.app))return Promise.reject($r(this.auth));let e=yield this.getIdToken();return yield lc(this,oj(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,o,s,a,u,l,h;let p=(r=n.displayName)!==null&&r!==void 0?r:void 0,m=(i=n.email)!==null&&i!==void 0?i:void 0,y=(o=n.phoneNumber)!==null&&o!==void 0?o:void 0,w=(s=n.photoURL)!==null&&s!==void 0?s:void 0,R=(a=n.tenantId)!==null&&a!==void 0?a:void 0,N=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,O=(l=n.createdAt)!==null&&l!==void 0?l:void 0,$=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:K,emailVerified:Ee,isAnonymous:dt,providerData:me,stsTokenManager:D}=n;W(K&&D,e,"internal-error");let v=uc.fromJSON(this.name,D);W(typeof K=="string",e,"internal-error"),Ur(p,e.name),Ur(m,e.name),W(typeof Ee=="boolean",e,"internal-error"),W(typeof dt=="boolean",e,"internal-error"),Ur(y,e.name),Ur(w,e.name),Ur(R,e.name),Ur(N,e.name),Ur(O,e.name),Ur($,e.name);let I=new t({uid:K,auth:e,email:m,emailVerified:Ee,displayName:p,isAnonymous:dt,photoURL:w,phoneNumber:y,tenantId:R,stsTokenManager:v,createdAt:O,lastLoginAt:$});return me&&Array.isArray(me)&&(I.providerData=me.map(T=>Object.assign({},T))),N&&(I._redirectEventId=N),I}static _fromIdTokenResponse(e,n,r=!1){return E(this,null,function*(){let i=new uc;i.updateFromServerResponse(n);let o=new t({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield qd(o),o})}static _fromGetAccountInfoResponse(e,n,r){return E(this,null,function*(){let i=n.users[0];W(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?nA(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,a=new uc;a.updateFromIdToken(r);let u=new t({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new dc(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(u,l),u})}};var VS=new Map;function ir(t){or(t instanceof Function,"Expected a class definition");let e=VS.get(t);return e?(or(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,VS.set(t,e),e)}var lj=(()=>{class t{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return E(this,null,function*(){return!0})}_set(n,r){return E(this,null,function*(){this.storage[n]=r})}_get(n){return E(this,null,function*(){let r=this.storage[n];return r===void 0?null:r})}_remove(n){return E(this,null,function*(){delete this.storage[n]})}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})(),Cy=lj;function jd(t,e,n){return`firebase:${t}:${e}:${n}`}var Wd=class t{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=jd(this.userKey,i.apiKey,o),this.fullPersistenceKey=jd("persistence",i.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return E(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let n=yield zd(this.auth,{idToken:e}).catch(()=>{});return n?Br._fromGetAccountInfoResponse(this.auth,n,e):null}return Br._fromJSON(this.auth,e)})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return E(this,null,function*(){if(this.persistence===e)return;let n=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n,r="authUser"){return E(this,null,function*(){if(!n.length)return new t(ir(Cy),e,r);let i=(yield Promise.all(n.map(l=>E(null,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),o=i[0]||ir(Cy),s=jd(r,e.config.apiKey,e.name),a=null;for(let l of n)try{let h=yield l._get(s);if(h){let p;if(typeof h=="string"){let m=yield zd(e,{idToken:h}).catch(()=>{});if(!m)break;p=yield Br._fromGetAccountInfoResponse(e,m,h)}else p=Br._fromJSON(e,h);l!==o&&(a=p),o=l;break}}catch{}let u=i.filter(l=>l._shouldAllowMigration);return!o._shouldAllowMigration||!u.length?new t(o,e,r):(o=u[0],a&&(yield o._set(s,a.toJSON())),yield Promise.all(n.map(l=>E(null,null,function*(){if(l!==o)try{yield l._remove(s)}catch{}}))),new t(o,e,r))})}};function jS(t){let e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(sA(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(rA(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(cA(e))return"Blackberry";if(uA(e))return"Webos";if(iA(e))return"Safari";if((e.includes("chrome/")||oA(e))&&!e.includes("edge/"))return"Chrome";if(aA(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function rA(t=We()){return/firefox\//i.test(t)}function iA(t=We()){let e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function oA(t=We()){return/crios\//i.test(t)}function sA(t=We()){return/iemobile/i.test(t)}function aA(t=We()){return/android/i.test(t)}function cA(t=We()){return/blackberry/i.test(t)}function uA(t=We()){return/webos/i.test(t)}function Hy(t=We()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function dj(t=We()){var e;return Hy(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function hj(){return gS()&&document.documentMode===10}function lA(t=We()){return Hy(t)||aA(t)||uA(t)||cA(t)||/windows phone/i.test(t)||sA(t)}function dA(t,e=[]){let n;switch(t){case"Browser":n=jS(We());break;case"Worker":n=`${jS(We())}-${t}`;break;default:n=t}let r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Fr}/${r}`}var Sy=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){let r=o=>new Promise((s,a)=>{try{let u=e(o);s(u)}catch(u){a(u)}});r.onAbort=n,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return E(this,null,function*(){if(this.auth.currentUser===e)return;let n=[];try{for(let r of this.queue)yield r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(let i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function fj(n){return E(this,arguments,function*(t,e={}){return es(t,"GET","/v2/passwordPolicy",th(t,e))})}var pj=6,Ay=class{constructor(e){var n,r,i,o;let s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=s.minPasswordLength)!==null&&n!==void 0?n:pj,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,o,s,a;let u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(o=u.containsUppercaseLetter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(s=u.containsNumericCharacter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(e,n){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var Ry=class{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Gd(this),this.idTokenSubscription=new Gd(this),this.beforeStateQueue=new Sy(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=JS,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=ir(n)),this._initializationPromise=this.queue(()=>E(this,null,function*(){var r,i,o;if(!this._deleted&&(this.persistenceManager=yield Wd.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(n),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return E(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return E(this,null,function*(){try{let n=yield zd(this,{idToken:e}),r=yield Br._fromGetAccountInfoResponse(this,n,e);yield this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return E(this,null,function*(){var n;if(At(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,o=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let s=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i?._redirectEventId,u=yield this.tryRedirectSignIn(e);(!s||s===a)&&u?.user&&(i=u.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{yield this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return W(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return E(this,null,function*(){let n=null;try{n=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return n})}reloadAndSetCurrentUserOrClear(e){return E(this,null,function*(){try{yield qd(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=tj()}_delete(){return E(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return E(this,null,function*(){if(At(this.app))return Promise.reject($r(this));let n=e?Fe(e):null;return n&&W(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))})}_updateCurrentUser(e,n=!1){return E(this,null,function*(){if(!this._deleted)return e&&W(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>E(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return E(this,null,function*(){return At(this.app)?Promise.reject($r(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return At(this.app)?Promise.reject($r(this)):this.queue(()=>E(this,null,function*(){yield this.assertedPersistence.setPersistence(ir(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return E(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return E(this,null,function*(){let e=yield fj(this),n=new Ay(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n})}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new sn("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},n)}})}revokeAccessToken(e){return E(this,null,function*(){if(this.currentUser){let n=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),yield uj(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,n){return E(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return E(this,null,function*(){if(!this.redirectPersistenceManager){let n=e&&ir(e)||this._popupRedirectResolver;W(n,this,"argument-error"),this.redirectPersistenceManager=yield Wd.create(this,[ir(n._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return E(this,null,function*(){var n,r;return this._isInitialized&&(yield this.queue(()=>E(this,null,function*(){}))),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return E(this,null,function*(){if(e===this.currentUser)return this.queue(()=>E(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};let o=typeof n=="function"?n:n.next.bind(n),s=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(W(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof n=="function"){let u=e.addObserver(n,r,i);return()=>{s=!0,u()}}else{let u=e.addObserver(n);return()=>{s=!0,u()}}}directlySetCurrentUser(e){return E(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return W(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=dA(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return E(this,null,function*(){var e;let n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(n["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n})}_getAppCheckToken(){return E(this,null,function*(){var e;if(At(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let n=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return n?.error&&Z2(`Error while retrieving App Check token: ${n.error}`),n?.token})}};function gc(t){return Fe(t)}var Gd=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=_S(n=>this.observer=n)}get next(){return W(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var zy={loadJS(){return E(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function gj(t){zy=t}function mj(t){return zy.loadJS(t)}function yj(){return zy.gapiScript}function hA(t){return`__${t}${Math.floor(Math.random()*1e6)}`}function qy(t,e){let n=Yo(t,"auth");if(n.isInitialized()){let i=n.getImmediate(),o=n.getOptions();if(an(o,e??{}))return i;Sn(i,"already-initialized")}return n.initialize({options:e})}function vj(t,e){let n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(ir);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function Wy(t,e,n){let r=gc(t);W(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!n?.disableWarnings,o=fA(e),{host:s,port:a}=_j(e),u=a===null?"":`:${a}`,l={url:`${o}//${s}${u}/`},h=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){W(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),W(an(l,r.config.emulator)&&an(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=l,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,Ai(s)?(Md(`${o}//${s}${u}`),Pd("Auth",!0)):i||Ij()}function fA(t){let e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function _j(t){let e=fA(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};let r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let o=i[1];return{host:o,port:US(r.substr(o.length+1))}}else{let[o,s]=r.split(":");return{host:o,port:US(s)}}}function US(t){if(!t)return null;let e=Number(t);return isNaN(e)?null:e}function Ij(){function t(){let e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}var hc=class{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return rr("not implemented")}_getIdTokenResponse(e){return rr("not implemented")}_linkToIdToken(e,n){return rr("not implemented")}_getReauthenticationResolver(e){return rr("not implemented")}};function Xo(t,e){return E(this,null,function*(){return eA(t,"POST","/v1/accounts:signInWithIdp",th(t,e))})}var Ej="http://localhost",Kd=class t extends hc{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){let n=new t(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Sn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){let n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,o=wu(n,["providerId","signInMethod"]);if(!r||!i)return null;let s=new t(r,i);return s.idToken=o.idToken||void 0,s.accessToken=o.accessToken||void 0,s.secret=o.secret,s.nonce=o.nonce,s.pendingToken=o.pendingToken||null,s}_getIdTokenResponse(e){let n=this.buildRequest();return Xo(e,n)}_linkToIdToken(e,n){let r=this.buildRequest();return r.idToken=n,Xo(e,r)}_getReauthenticationResolver(e){let n=this.buildRequest();return n.autoCreate=!1,Xo(e,n)}buildRequest(){let e={requestUri:Ej,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{let n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Qo(n)}return e}};var fc=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var Qd=class extends fc{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var wj=(()=>{class t extends Qd{constructor(){super("google.com"),this.addScope("profile")}static credential(n,r){return Kd._fromParams({providerId:t.PROVIDER_ID,signInMethod:t.GOOGLE_SIGN_IN_METHOD,idToken:n,accessToken:r})}static credentialFromResult(n){return t.credentialFromTaggedObject(n)}static credentialFromError(n){return t.credentialFromTaggedObject(n.customData||{})}static credentialFromTaggedObject({_tokenResponse:n}){if(!n)return null;let{oauthIdToken:r,oauthAccessToken:i}=n;if(!r&&!i)return null;try{return t.credential(r,i)}catch{return null}}}t.GOOGLE_SIGN_IN_METHOD="google.com",t.PROVIDER_ID="google.com";return t})();function Tj(t,e){return E(this,null,function*(){return eA(t,"POST","/v1/accounts:signUp",th(t,e))})}var ki=class t{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,n,r,i=!1){return E(this,null,function*(){let o=yield Br._fromIdTokenResponse(e,r,i),s=BS(r);return new t({user:o,providerId:s,_tokenResponse:r,operationType:n})})}static _forOperation(e,n,r){return E(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=BS(r);return new t({user:e,providerId:i,_tokenResponse:r,operationType:n})})}};function BS(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}function pA(t){return E(this,null,function*(){var e;if(At(t.app))return Promise.reject($r(t));let n=gc(t);if(yield n._initializationPromise,!((e=n.currentUser)===null||e===void 0)&&e.isAnonymous)return new ki({user:n.currentUser,providerId:null,operationType:"signIn"});let r=yield Tj(n,{returnSecureToken:!0}),i=yield ki._fromIdTokenResponse(n,"signIn",r,!0);return yield n._updateCurrentUser(i.user),i})}var Ny=class t extends Ot{constructor(e,n,r,i){var o;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,t.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new t(e,n,r,i)}};function gA(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Ny._fromErrorAndOperation(t,o,e,r):o})}function Dj(t,e,n=!1){return E(this,null,function*(){let r=yield lc(t,e._linkToIdToken(t.auth,yield t.getIdToken()),n);return ki._forOperation(t,"link",r)})}function bj(t,e,n=!1){return E(this,null,function*(){let{auth:r}=t;if(At(r.app))return Promise.reject($r(r));let i="reauthenticate";try{let o=yield lc(t,gA(r,i,e,t),n);W(o.idToken,r,"internal-error");let s=By(o.idToken);W(s,r,"internal-error");let{sub:a}=s;return W(t.uid===a,r,"user-mismatch"),ki._forOperation(t,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&Sn(r,"user-mismatch"),o}})}function Cj(t,e,n=!1){return E(this,null,function*(){if(At(t.app))return Promise.reject($r(t));let r="signIn",i=yield gA(t,r,e),o=yield ki._fromIdTokenResponse(t,r,i);return n||(yield t._updateCurrentUser(o.user)),o})}function Gy(t,e,n,r){return Fe(t).onIdTokenChanged(e,n,r)}function Ky(t,e,n){return Fe(t).beforeAuthStateChanged(e,n)}function Qy(t,e,n,r){return Fe(t).onAuthStateChanged(e,n,r)}var Yd="__sak";var Zd=class{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Yd,"1"),this.storage.removeItem(Yd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){let n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var Sj=1e3,Aj=10,Rj=(()=>{class t extends Zd{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(n,r)=>this.onStorageEvent(n,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=lA(),this._shouldAllowMigration=!0}forAllChangedKeys(n){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),o=this.localCache[r];i!==o&&n(r,o,i)}}onStorageEvent(n,r=!1){if(!n.key){this.forAllChangedKeys((a,u,l)=>{this.notifyListeners(a,l)});return}let i=n.key;r?this.detachListener():this.stopPolling();let o=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);hj()&&s!==n.newValue&&n.newValue!==n.oldValue?setTimeout(o,Aj):o()}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((n,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:n,oldValue:r,newValue:i}),!0)})},Sj)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(n,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[n]||(this.listeners[n]=new Set,this.localCache[n]=this.storage.getItem(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(n,r){return E(this,null,function*(){yield yr(t.prototype,this,"_set").call(this,n,r),this.localCache[n]=JSON.stringify(r)})}_get(n){return E(this,null,function*(){let r=yield yr(t.prototype,this,"_get").call(this,n);return this.localCache[n]=JSON.stringify(r),r})}_remove(n){return E(this,null,function*(){yield yr(t.prototype,this,"_remove").call(this,n),delete this.localCache[n]})}}return t.type="LOCAL",t})(),mA=Rj;var Nj=(()=>{class t extends Zd{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(n,r){}_removeListener(n,r){}}return t.type="SESSION",t})(),Yy=Nj;function Mj(t){return Promise.all(t.map(e=>E(null,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(n){return{fulfilled:!1,reason:n}}})))}var Pj=(()=>{class t{constructor(n){this.eventTarget=n,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(n){let r=this.receivers.find(o=>o.isListeningto(n));if(r)return r;let i=new t(n);return this.receivers.push(i),i}isListeningto(n){return this.eventTarget===n}handleEvent(n){return E(this,null,function*(){let r=n,{eventId:i,eventType:o,data:s}=r.data,a=this.handlersMap[o];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:o});let u=Array.from(a).map(h=>E(this,null,function*(){return h(r.origin,s)})),l=yield Mj(u);r.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:l})})}_subscribe(n,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[n]||(this.handlersMap[n]=new Set),this.handlersMap[n].add(r)}_unsubscribe(n,r){this.handlersMap[n]&&r&&this.handlersMap[n].delete(r),(!r||this.handlersMap[n].size===0)&&delete this.handlersMap[n],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}t.receivers=[];return t})();function Zy(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}var My=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,n,r=50){return E(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((a,u)=>{let l=Zy("",20);i.port1.start();let h=setTimeout(()=>{u(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(p){let m=p;if(m.data.eventId===l)switch(m.data.status){case"ack":clearTimeout(h),o=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),a(m.data.response);break;default:clearTimeout(h),clearTimeout(o),u(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:n},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})})}};function Cn(){return window}function xj(t){Cn().location.href=t}function yA(){return typeof Cn().WorkerGlobalScope<"u"&&typeof Cn().importScripts=="function"}function kj(){return E(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function Oj(){var t;return((t=navigator?.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function Lj(){return yA()?self:null}var vA="firebaseLocalStorageDb",Fj=1,Jd="firebaseLocalStorage",_A="fbase_key",Oi=class{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}};function nh(t,e){return t.transaction([Jd],e?"readwrite":"readonly").objectStore(Jd)}function Vj(){let t=indexedDB.deleteDatabase(vA);return new Oi(t).toPromise()}function Py(){let t=indexedDB.open(vA,Fj);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{let r=t.result;try{r.createObjectStore(Jd,{keyPath:_A})}catch(i){n(i)}}),t.addEventListener("success",()=>E(null,null,function*(){let r=t.result;r.objectStoreNames.contains(Jd)?e(r):(r.close(),yield Vj(),e(yield Py()))}))})}function $S(t,e,n){return E(this,null,function*(){let r=nh(t,!0).put({[_A]:e,value:n});return new Oi(r).toPromise()})}function jj(t,e){return E(this,null,function*(){let n=nh(t,!1).get(e),r=yield new Oi(n).toPromise();return r===void 0?null:r.value})}function HS(t,e){let n=nh(t,!0).delete(e);return new Oi(n).toPromise()}var Uj=800,Bj=3,$j=(()=>{class t{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return E(this,null,function*(){return this.db?this.db:(this.db=yield Py(),this.db)})}_withRetries(n){return E(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield n(i)}catch(i){if(r++>Bj)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return E(this,null,function*(){return yA()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return E(this,null,function*(){this.receiver=Pj._getInstance(Lj()),this.receiver._subscribe("keyChanged",(n,r)=>E(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(n,r)=>E(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return E(this,null,function*(){var n,r;if(this.activeServiceWorker=yield kj(),!this.activeServiceWorker)return;this.sender=new My(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((n=i[0])===null||n===void 0)&&n.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(n){return E(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||Oj()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:n},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return E(this,null,function*(){try{if(!indexedDB)return!1;let n=yield Py();return yield $S(n,Yd,"1"),yield HS(n,Yd),!0}catch{}return!1})}_withPendingWrite(n){return E(this,null,function*(){this.pendingWrites++;try{yield n()}finally{this.pendingWrites--}})}_set(n,r){return E(this,null,function*(){return this._withPendingWrite(()=>E(this,null,function*(){return yield this._withRetries(i=>$S(i,n,r)),this.localCache[n]=r,this.notifyServiceWorker(n)}))})}_get(n){return E(this,null,function*(){let r=yield this._withRetries(i=>jj(i,n));return this.localCache[n]=r,r})}_remove(n){return E(this,null,function*(){return this._withPendingWrite(()=>E(this,null,function*(){return yield this._withRetries(r=>HS(r,n)),delete this.localCache[n],this.notifyServiceWorker(n)}))})}_poll(){return E(this,null,function*(){let n=yield this._withRetries(o=>{let s=nh(o,!1).getAll();return new Oi(s).toPromise()});if(!n)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(n.length!==0)for(let{fbase_key:o,value:s}of n)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(s)&&(this.notifyListeners(o,s),r.push(o));for(let o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),r.push(o));return r})}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let o of Array.from(i))o(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>E(this,null,function*(){return this._poll()}),Uj)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(n,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[n]||(this.listeners[n]=new Set,this._get(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return t.type="LOCAL",t})(),IA=$j;var PK=hA("rcb"),xK=new xi(3e4,6e4);function EA(t,e){return e?ir(e):(W(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}var pc=class extends hc{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Xo(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Xo(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Xo(e,this._buildIdpRequest())}_buildIdpRequest(e){let n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}};function Hj(t){return Cj(t.auth,new pc(t),t.bypassAuthState)}function zj(t){let{auth:e,user:n}=t;return W(n,e,"internal-error"),bj(n,new pc(t),t.bypassAuthState)}function qj(t){return E(this,null,function*(){let{auth:e,user:n}=t;return W(n,e,"internal-error"),Dj(n,new pc(t),t.bypassAuthState)})}var Xd=class{constructor(e,n,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise((e,n)=>E(this,null,function*(){this.pendingPromise={resolve:e,reject:n};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return E(this,null,function*(){let{urlResponse:n,sessionId:r,postBody:i,tenantId:o,error:s,type:a}=e;if(s){this.reject(s);return}let u={auth:this.auth,requestUri:n,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(u))}catch(l){this.reject(l)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Hj;case"linkViaPopup":case"linkViaRedirect":return qj;case"reauthViaPopup":case"reauthViaRedirect":return zj;default:Sn(this.auth,"internal-error")}}resolve(e){or(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){or(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var Wj=new xi(2e3,1e4);function wA(t,e,n){return E(this,null,function*(){if(At(t.app))return Promise.reject(un(t,"operation-not-supported-in-this-environment"));let r=gc(t);J2(t,e,fc);let i=EA(r,n);return new Gj(r,"signInViaPopup",e,i).executeNotNull()})}var Gj=(()=>{class t extends Xd{constructor(n,r,i,o,s){super(n,r,o,s),this.provider=i,this.authWindow=null,this.pollId=null,t.currentPopupAction&&t.currentPopupAction.cancel(),t.currentPopupAction=this}executeNotNull(){return E(this,null,function*(){let n=yield this.execute();return W(n,this.auth,"internal-error"),n})}onExecution(){return E(this,null,function*(){or(this.filter.length===1,"Popup operations only handle one event");let n=Zy();this.authWindow=yield this.resolver._openPopup(this.auth,this.provider,this.filter[0],n),this.authWindow.associatedEvent=n,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(un(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()})}get eventId(){var n;return((n=this.authWindow)===null||n===void 0?void 0:n.associatedEvent)||null}cancel(){this.reject(un(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,t.currentPopupAction=null}pollUserCancellation(){let n=()=>{var r,i;if(!((i=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(un(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(n,Wj.get())};n()}}t.currentPopupAction=null;return t})(),Kj="pendingRedirect",Ud=new Map,xy=class t extends Xd{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}execute(){return E(this,null,function*(){let e=Ud.get(this.auth._key());if(!e){try{let r=(yield Qj(this.resolver,this.auth))?yield yr(t.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Ud.set(this.auth._key(),e)}return this.bypassAuthState||Ud.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return E(this,null,function*(){if(e.type==="signInViaRedirect")return yr(t.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let n=yield this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,yr(t.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return E(this,null,function*(){})}cleanUp(){}};function Qj(t,e){return E(this,null,function*(){let n=Jj(e),r=Zj(t);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(n))==="true";return yield r._remove(n),i})}function Yj(t,e){Ud.set(t._key(),e)}function Zj(t){return ir(t._redirectPersistence)}function Jj(t){return jd(Kj,t.config.apiKey,t.name)}function Xj(t,e,n=!1){return E(this,null,function*(){if(At(t.app))return Promise.reject($r(t));let r=gc(t),i=EA(r,e),s=yield new xy(r,i,n).execute();return s&&!n&&(delete s.user._redirectEventId,yield r._persistUserIfCurrent(s.user),yield r._setRedirectUser(null,e)),s})}var eU=10*60*1e3,ky=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!tU(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!TA(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(un(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){let r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=eU&&this.cachedEventUids.clear(),this.cachedEventUids.has(zS(e))}saveEventToCache(e){this.cachedEventUids.add(zS(e)),this.lastProcessedEventTime=Date.now()}};function zS(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function TA({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function tU(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return TA(t);default:return!1}}function nU(n){return E(this,arguments,function*(t,e={}){return es(t,"GET","/v1/projects",e)})}var rU=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,iU=/^https?/;function oU(t){return E(this,null,function*(){if(t.config.emulator)return;let{authorizedDomains:e}=yield nU(t);for(let n of e)try{if(sU(n))return}catch{}Sn(t,"unauthorized-domain")})}function sU(t){let e=Ty(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){let s=new URL(t);return s.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&s.hostname===r}if(!iU.test(n))return!1;if(rU.test(t))return r===t;let i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var aU=new xi(3e4,6e4);function qS(){let t=Cn().___jsl;if(t?.H){for(let e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function cU(t){return new Promise((e,n)=>{var r,i,o;function s(){qS(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{qS(),n(un(t,"network-request-failed"))},timeout:aU.get()})}if(!((i=(r=Cn().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=Cn().gapi)===null||o===void 0)&&o.load)s();else{let a=hA("iframefcb");return Cn()[a]=()=>{gapi.load?s():n(un(t,"network-request-failed"))},mj(`${yj()}?onload=${a}`).catch(u=>n(u))}}).catch(e=>{throw Bd=null,e})}var Bd=null;function uU(t){return Bd=Bd||cU(t),Bd}var lU=new xi(5e3,15e3),dU="__/auth/iframe",hU="emulator/auth/iframe",fU={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},pU=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function gU(t){let e=t.config;W(e.authDomain,t,"auth-domain-config-required");let n=e.emulator?jy(e,hU):`https://${t.config.authDomain}/${dU}`,r={apiKey:e.apiKey,appName:t.name,v:Fr},i=pU.get(t.config.apiHost);i&&(r.eid=i);let o=t._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${Qo(r).slice(1)}`}function mU(t){return E(this,null,function*(){let e=yield uU(t),n=Cn().gapi;return W(n,t,"internal-error"),e.open({where:document.body,url:gU(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:fU,dontclear:!0},r=>new Promise((i,o)=>E(null,null,function*(){yield r.restyle({setHideOnLeave:!1});let s=un(t,"network-request-failed"),a=Cn().setTimeout(()=>{o(s)},lU.get());function u(){Cn().clearTimeout(a),i(r)}r.ping(u).then(u,()=>{o(s)})})))})}var yU={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},vU=500,_U=600,IU="_blank",EU="http://localhost",eh=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function wU(t,e,n,r=vU,i=_U){let o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",u=Object.assign(Object.assign({},yU),{width:r.toString(),height:i.toString(),top:o,left:s}),l=We().toLowerCase();n&&(a=oA(l)?IU:n),rA(l)&&(e=e||EU,u.scrollbars="yes");let h=Object.entries(u).reduce((m,[y,w])=>`${m}${y}=${w},`,"");if(dj(l)&&a!=="_self")return TU(e||"",a),new eh(null);let p=window.open(e||"",a,h);W(p,t,"popup-blocked");try{p.focus()}catch{}return new eh(p)}function TU(t,e){let n=document.createElement("a");n.href=t,n.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var DU="__/auth/handler",bU="emulator/auth/handler",CU=encodeURIComponent("fac");function WS(t,e,n,r,i,o){return E(this,null,function*(){W(t.config.authDomain,t,"auth-domain-config-required"),W(t.config.apiKey,t,"invalid-api-key");let s={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Fr,eventId:i};if(e instanceof fc){e.setDefaultLanguage(t.languageCode),s.providerId=e.providerId||"",vS(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(let[h,p]of Object.entries(o||{}))s[h]=p}if(e instanceof Qd){let h=e.getScopes().filter(p=>p!=="");h.length>0&&(s.scopes=h.join(","))}t.tenantId&&(s.tid=t.tenantId);let a=s;for(let h of Object.keys(a))a[h]===void 0&&delete a[h];let u=yield t._getAppCheckToken(),l=u?`#${CU}=${encodeURIComponent(u)}`:"";return`${SU(t)}?${Qo(a).slice(1)}${l}`})}function SU({config:t}){return t.emulator?jy(t,bU):`https://${t.authDomain}/${DU}`}var wy="webStorageSupport",Oy=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Yy,this._completeRedirectFn=Xj,this._overrideRedirectResult=Yj}_openPopup(e,n,r,i){return E(this,null,function*(){var o;or((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");let s=yield WS(e,n,r,Ty(),i);return wU(e,s,Zy())})}_openRedirect(e,n,r,i){return E(this,null,function*(){yield this._originValidation(e);let o=yield WS(e,n,r,Ty(),i);return xj(o),new Promise(()=>{})})}_initialize(e){let n=e._key();if(this.eventManagers[n]){let{manager:i,promise:o}=this.eventManagers[n];return i?Promise.resolve(i):(or(o,"If manager is not set, promise should be"),o)}let r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}initAndGetManager(e){return E(this,null,function*(){let n=yield mU(e),r=new ky(e);return n.register("authEvent",i=>(W(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r})}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(wy,{type:wy},i=>{var o;let s=(o=i?.[0])===null||o===void 0?void 0:o[wy];s!==void 0&&n(!!s),Sn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=oU(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return lA()||iA()||Hy()}},DA=Oy;var GS="@firebase/auth",KS="1.10.6";var Ly=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return E(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){W(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function AU(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function RU(t){cn(new yt("auth",(e,{options:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;W(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let u={apiKey:s,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:dA(t)},l=new Ry(r,i,o,u);return vj(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),cn(new yt("auth-internal",e=>{let n=gc(e.getProvider("auth").getImmediate());return(r=>new Ly(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Me(GS,KS,AU(t)),Me(GS,KS,"esm2017")}var NU=5*60,MU=iy("authIdTokenMaxAge")||NU,QS=null,PU=t=>e=>E(null,null,function*(){let n=e&&(yield e.getIdTokenResult()),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>MU)return;let i=n?.token;QS!==i&&(QS=i,yield fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function Jy(t=Ni()){let e=Yo(t,"auth");if(e.isInitialized())return e.getImmediate();let n=qy(t,{popupRedirectResolver:DA,persistence:[IA,mA,Yy]}),r=iy("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let o=new URL(r,location.origin);if(location.origin===o.origin){let s=PU(o.toString());Ky(n,s,()=>s(n.currentUser)),Gy(n,a=>s(a))}}let i=ny("auth");return i&&Wy(n,`http://${i}`),n}function xU(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}gj({loadJS(t){return new Promise((e,n)=>{let r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{let o=un("internal-error");o.customData=i,n(o)},r.type="text/javascript",r.charset="UTF-8",xU().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});RU("Browser");var TB=new Map,DB={activated:!1,tokenObservers:[]},bB={initialized:!1,enabled:!1};function ln(t){return TB.get(t)||Object.assign({},DB)}function AA(){return bB}var CB="https://content-firebaseappcheck.googleapis.com/v1";var SB="exchangeDebugToken",bA={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},_Q=24*60*60*1e3;var tv=class{constructor(e,n,r,i,o){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return E(this,null,function*(){this.stop();try{this.pending=new Si,this.pending.promise.catch(n=>{}),yield AB(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new Si,this.pending.promise.catch(n=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}};function AB(t){return new Promise(e=>{setTimeout(e,t)})}var RB={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},Hr=new sn("appCheck","AppCheck",RB);function RA(t){if(!ln(t).activated)throw Hr.create("use-before-activation",{appName:t.name})}function NA(r,i){return E(this,arguments,function*({url:t,body:e},n){let o={"Content-Type":"application/json"},s=n.getImmediate({optional:!0});if(s){let y=yield s.getHeartbeatsHeader();y&&(o["X-Firebase-Client"]=y)}let a={method:"POST",body:JSON.stringify(e),headers:o},u;try{u=yield fetch(t,a)}catch(y){throw Hr.create("fetch-network-error",{originalErrorMessage:y?.message})}if(u.status!==200)throw Hr.create("fetch-status-error",{httpStatus:u.status});let l;try{l=yield u.json()}catch(y){throw Hr.create("fetch-parse-error",{originalErrorMessage:y?.message})}let h=l.ttl.match(/^([\d.]+)(s)$/);if(!h||!h[2]||isNaN(Number(h[1])))throw Hr.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${l.ttl}`});let p=Number(h[1])*1e3,m=Date.now();return{token:l.token,expireTimeMillis:m+p,issuedAtTimeMillis:m}})}function MA(t,e){let{projectId:n,appId:r,apiKey:i}=t.options;return{url:`${CB}/projects/${n}/apps/${r}:${SB}?key=${i}`,body:{debug_token:e}}}var NB="firebase-app-check-database",MB=1,nv="firebase-app-check-store";var rh=null;function PB(){return rh||(rh=new Promise((t,e)=>{try{let n=indexedDB.open(NB,MB);n.onsuccess=r=>{t(r.target.result)},n.onerror=r=>{var i;e(Hr.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},n.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(nv,{keyPath:"compositeKey"})}}}catch(n){e(Hr.create("storage-open",{originalErrorMessage:n?.message}))}}),rh)}function xB(t,e){return kB(OB(t),e)}function kB(t,e){return E(this,null,function*(){let r=(yield PB()).transaction(nv,"readwrite"),o=r.objectStore(nv).put({compositeKey:t,value:e});return new Promise((s,a)=>{o.onsuccess=u=>{s()},r.onerror=u=>{var l;a(Hr.create("storage-set",{originalErrorMessage:(l=u.target.error)===null||l===void 0?void 0:l.message}))}})})}function OB(t){return`${t.options.appId}-${t.name}`}var mc=new Dn("@firebase/app-check");function Xy(t,e){return ic()?xB(t,e).catch(n=>{mc.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}function PA(){return AA().enabled}function xA(){return E(this,null,function*(){let t=AA();if(t.enabled&&t.token)return t.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var LB={error:"UNKNOWN_ERROR"};function FB(t){return Ad.encodeString(JSON.stringify(t),!1)}function rv(t,e=!1,n=!1){return E(this,null,function*(){let r=t.app;RA(r);let i=ln(r),o=i.token,s;if(o&&!yc(o)&&(i.token=void 0,o=void 0),!o){let l=yield i.cachedTokenPromise;l&&(yc(l)?o=l:yield Xy(r,void 0))}if(!e&&o&&yc(o))return{token:o.token};let a=!1;if(PA())try{i.exchangeTokenPromise||(i.exchangeTokenPromise=NA(MA(r,yield xA()),t.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),a=!0);let l=yield i.exchangeTokenPromise;return yield Xy(r,l),i.token=l,{token:l.token}}catch(l){return l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?mc.warn(l.message):n&&mc.error(l),ev(l)}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),a=!0),o=yield ln(r).exchangeTokenPromise}catch(l){l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?mc.warn(l.message):n&&mc.error(l),s=l}let u;return o?s?yc(o)?u={token:o.token,internalError:s}:u=ev(s):(u={token:o.token},i.token=o,yield Xy(r,o)):u=ev(s),a&&BB(r,u),u})}function VB(t){return E(this,null,function*(){let e=t.app;RA(e);let{provider:n}=ln(e);if(PA()){let r=yield xA(),{token:i}=yield NA(MA(e,r),t.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield n.getToken();return{token:r}}})}function jB(t,e,n,r){let{app:i}=t,o=ln(i),s={next:n,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&yc(o.token)){let a=o.token;Promise.resolve().then(()=>{n({token:a.token}),CA(t)}).catch(()=>{})}o.cachedTokenPromise.then(()=>CA(t))}function kA(t,e){let n=ln(t),r=n.tokenObservers.filter(i=>i.next!==e);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function CA(t){let{app:e}=t,n=ln(e),r=n.tokenRefresher;r||(r=UB(t),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function UB(t){let{app:e}=t;return new tv(()=>E(null,null,function*(){let n=ln(e),r;if(n.token?r=yield rv(t,!0):r=yield rv(t),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let n=ln(e);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5,i=n.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},bA.RETRIAL_MIN_WAIT,bA.RETRIAL_MAX_WAIT)}function BB(t,e){let n=ln(t).tokenObservers;for(let r of n)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function yc(t){return t.expireTimeMillis-Date.now()>0}function ev(t){return{token:FB(LB),error:t}}var iv=class{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){let{tokenObservers:e}=ln(this.app);for(let n of e)kA(this.app,n.next);return Promise.resolve()}};function $B(t,e){return new iv(t,e)}function HB(t){return{getToken:e=>rv(t,e),getLimitedUseToken:()=>VB(t),addTokenListener:e=>jB(t,"INTERNAL",e),removeTokenListener:e=>kA(t.app,e)}}var zB="@firebase/app-check",qB="0.10.0";var WB="app-check",SA="app-check-internal";function GB(){cn(new yt(WB,t=>{let e=t.getProvider("app").getImmediate(),n=t.getProvider("heartbeat");return $B(e,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(SA).initialize()})),cn(new yt(SA,t=>{let e=t.getProvider("app-check").getImmediate();return HB(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Me(zB,qB)}GB();var KB="app-check";var ts=class{constructor(){return Jo(KB)}};var QB=["localhost","0.0.0.0","127.0.0.1"],PQ=typeof window<"u"&&QB.includes(window.location.hostname);var OA="auth",vc=class{constructor(e){return e}},_c=class{constructor(){return Jo(OA)}};var ov=new U("angularfire2.auth-instances");function YB(t,e){let n=ac(OA,t,e);return n&&new vc(n)}function ZB(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new vc(r)}}var JB={provide:_c,deps:[[new Ut,ov]]},XB={provide:vc,useFactory:YB,deps:[[new Ut,ov],nr]};function $Q(t,...e){return Me("angularfire",Vr.full,"auth"),_n([XB,JB,{provide:ov,useFactory:ZB(t),multi:!0,deps:[fe,He,jr,Pi,[new Ut,ts],...e]}])}var HQ=vt(Jy,!0);var zQ=vt(Qy,!0);var LA=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},FA={};var sr,sv;(function(){var t;function e(D,v){function I(){}I.prototype=v.prototype,D.D=v.prototype,D.prototype=new I,D.prototype.constructor=D,D.C=function(T,b,S){for(var _=Array(arguments.length-2),Ln=2;Ln<arguments.length;Ln++)_[Ln-2]=arguments[Ln];return v.prototype[b].apply(T,_)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(D,v,I){I||(I=0);var T=Array(16);if(typeof v=="string")for(var b=0;16>b;++b)T[b]=v.charCodeAt(I++)|v.charCodeAt(I++)<<8|v.charCodeAt(I++)<<16|v.charCodeAt(I++)<<24;else for(b=0;16>b;++b)T[b]=v[I++]|v[I++]<<8|v[I++]<<16|v[I++]<<24;v=D.g[0],I=D.g[1],b=D.g[2];var S=D.g[3],_=v+(S^I&(b^S))+T[0]+3614090360&4294967295;v=I+(_<<7&4294967295|_>>>25),_=S+(b^v&(I^b))+T[1]+3905402710&4294967295,S=v+(_<<12&4294967295|_>>>20),_=b+(I^S&(v^I))+T[2]+606105819&4294967295,b=S+(_<<17&4294967295|_>>>15),_=I+(v^b&(S^v))+T[3]+3250441966&4294967295,I=b+(_<<22&4294967295|_>>>10),_=v+(S^I&(b^S))+T[4]+4118548399&4294967295,v=I+(_<<7&4294967295|_>>>25),_=S+(b^v&(I^b))+T[5]+1200080426&4294967295,S=v+(_<<12&4294967295|_>>>20),_=b+(I^S&(v^I))+T[6]+2821735955&4294967295,b=S+(_<<17&4294967295|_>>>15),_=I+(v^b&(S^v))+T[7]+4249261313&4294967295,I=b+(_<<22&4294967295|_>>>10),_=v+(S^I&(b^S))+T[8]+1770035416&4294967295,v=I+(_<<7&4294967295|_>>>25),_=S+(b^v&(I^b))+T[9]+2336552879&4294967295,S=v+(_<<12&4294967295|_>>>20),_=b+(I^S&(v^I))+T[10]+4294925233&4294967295,b=S+(_<<17&4294967295|_>>>15),_=I+(v^b&(S^v))+T[11]+2304563134&4294967295,I=b+(_<<22&4294967295|_>>>10),_=v+(S^I&(b^S))+T[12]+1804603682&4294967295,v=I+(_<<7&4294967295|_>>>25),_=S+(b^v&(I^b))+T[13]+4254626195&4294967295,S=v+(_<<12&4294967295|_>>>20),_=b+(I^S&(v^I))+T[14]+2792965006&4294967295,b=S+(_<<17&4294967295|_>>>15),_=I+(v^b&(S^v))+T[15]+1236535329&4294967295,I=b+(_<<22&4294967295|_>>>10),_=v+(b^S&(I^b))+T[1]+4129170786&4294967295,v=I+(_<<5&4294967295|_>>>27),_=S+(I^b&(v^I))+T[6]+3225465664&4294967295,S=v+(_<<9&4294967295|_>>>23),_=b+(v^I&(S^v))+T[11]+643717713&4294967295,b=S+(_<<14&4294967295|_>>>18),_=I+(S^v&(b^S))+T[0]+3921069994&4294967295,I=b+(_<<20&4294967295|_>>>12),_=v+(b^S&(I^b))+T[5]+3593408605&4294967295,v=I+(_<<5&4294967295|_>>>27),_=S+(I^b&(v^I))+T[10]+38016083&4294967295,S=v+(_<<9&4294967295|_>>>23),_=b+(v^I&(S^v))+T[15]+3634488961&4294967295,b=S+(_<<14&4294967295|_>>>18),_=I+(S^v&(b^S))+T[4]+3889429448&4294967295,I=b+(_<<20&4294967295|_>>>12),_=v+(b^S&(I^b))+T[9]+568446438&4294967295,v=I+(_<<5&4294967295|_>>>27),_=S+(I^b&(v^I))+T[14]+3275163606&4294967295,S=v+(_<<9&4294967295|_>>>23),_=b+(v^I&(S^v))+T[3]+4107603335&4294967295,b=S+(_<<14&4294967295|_>>>18),_=I+(S^v&(b^S))+T[8]+1163531501&4294967295,I=b+(_<<20&4294967295|_>>>12),_=v+(b^S&(I^b))+T[13]+2850285829&4294967295,v=I+(_<<5&4294967295|_>>>27),_=S+(I^b&(v^I))+T[2]+4243563512&4294967295,S=v+(_<<9&4294967295|_>>>23),_=b+(v^I&(S^v))+T[7]+1735328473&4294967295,b=S+(_<<14&4294967295|_>>>18),_=I+(S^v&(b^S))+T[12]+2368359562&4294967295,I=b+(_<<20&4294967295|_>>>12),_=v+(I^b^S)+T[5]+4294588738&4294967295,v=I+(_<<4&4294967295|_>>>28),_=S+(v^I^b)+T[8]+2272392833&4294967295,S=v+(_<<11&4294967295|_>>>21),_=b+(S^v^I)+T[11]+1839030562&4294967295,b=S+(_<<16&4294967295|_>>>16),_=I+(b^S^v)+T[14]+4259657740&4294967295,I=b+(_<<23&4294967295|_>>>9),_=v+(I^b^S)+T[1]+2763975236&4294967295,v=I+(_<<4&4294967295|_>>>28),_=S+(v^I^b)+T[4]+1272893353&4294967295,S=v+(_<<11&4294967295|_>>>21),_=b+(S^v^I)+T[7]+4139469664&4294967295,b=S+(_<<16&4294967295|_>>>16),_=I+(b^S^v)+T[10]+3200236656&4294967295,I=b+(_<<23&4294967295|_>>>9),_=v+(I^b^S)+T[13]+681279174&4294967295,v=I+(_<<4&4294967295|_>>>28),_=S+(v^I^b)+T[0]+3936430074&4294967295,S=v+(_<<11&4294967295|_>>>21),_=b+(S^v^I)+T[3]+3572445317&4294967295,b=S+(_<<16&4294967295|_>>>16),_=I+(b^S^v)+T[6]+76029189&4294967295,I=b+(_<<23&4294967295|_>>>9),_=v+(I^b^S)+T[9]+3654602809&4294967295,v=I+(_<<4&4294967295|_>>>28),_=S+(v^I^b)+T[12]+3873151461&4294967295,S=v+(_<<11&4294967295|_>>>21),_=b+(S^v^I)+T[15]+530742520&4294967295,b=S+(_<<16&4294967295|_>>>16),_=I+(b^S^v)+T[2]+3299628645&4294967295,I=b+(_<<23&4294967295|_>>>9),_=v+(b^(I|~S))+T[0]+4096336452&4294967295,v=I+(_<<6&4294967295|_>>>26),_=S+(I^(v|~b))+T[7]+1126891415&4294967295,S=v+(_<<10&4294967295|_>>>22),_=b+(v^(S|~I))+T[14]+2878612391&4294967295,b=S+(_<<15&4294967295|_>>>17),_=I+(S^(b|~v))+T[5]+4237533241&4294967295,I=b+(_<<21&4294967295|_>>>11),_=v+(b^(I|~S))+T[12]+1700485571&4294967295,v=I+(_<<6&4294967295|_>>>26),_=S+(I^(v|~b))+T[3]+2399980690&4294967295,S=v+(_<<10&4294967295|_>>>22),_=b+(v^(S|~I))+T[10]+4293915773&4294967295,b=S+(_<<15&4294967295|_>>>17),_=I+(S^(b|~v))+T[1]+2240044497&4294967295,I=b+(_<<21&4294967295|_>>>11),_=v+(b^(I|~S))+T[8]+1873313359&4294967295,v=I+(_<<6&4294967295|_>>>26),_=S+(I^(v|~b))+T[15]+4264355552&4294967295,S=v+(_<<10&4294967295|_>>>22),_=b+(v^(S|~I))+T[6]+2734768916&4294967295,b=S+(_<<15&4294967295|_>>>17),_=I+(S^(b|~v))+T[13]+1309151649&4294967295,I=b+(_<<21&4294967295|_>>>11),_=v+(b^(I|~S))+T[4]+4149444226&4294967295,v=I+(_<<6&4294967295|_>>>26),_=S+(I^(v|~b))+T[11]+3174756917&4294967295,S=v+(_<<10&4294967295|_>>>22),_=b+(v^(S|~I))+T[2]+718787259&4294967295,b=S+(_<<15&4294967295|_>>>17),_=I+(S^(b|~v))+T[9]+3951481745&4294967295,D.g[0]=D.g[0]+v&4294967295,D.g[1]=D.g[1]+(b+(_<<21&4294967295|_>>>11))&4294967295,D.g[2]=D.g[2]+b&4294967295,D.g[3]=D.g[3]+S&4294967295}r.prototype.u=function(D,v){v===void 0&&(v=D.length);for(var I=v-this.blockSize,T=this.B,b=this.h,S=0;S<v;){if(b==0)for(;S<=I;)i(this,D,S),S+=this.blockSize;if(typeof D=="string"){for(;S<v;)if(T[b++]=D.charCodeAt(S++),b==this.blockSize){i(this,T),b=0;break}}else for(;S<v;)if(T[b++]=D[S++],b==this.blockSize){i(this,T),b=0;break}}this.h=b,this.o+=v},r.prototype.v=function(){var D=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);D[0]=128;for(var v=1;v<D.length-8;++v)D[v]=0;var I=8*this.o;for(v=D.length-8;v<D.length;++v)D[v]=I&255,I/=256;for(this.u(D),D=Array(16),v=I=0;4>v;++v)for(var T=0;32>T;T+=8)D[I++]=this.g[v]>>>T&255;return D};function o(D,v){var I=a;return Object.prototype.hasOwnProperty.call(I,D)?I[D]:I[D]=v(D)}function s(D,v){this.h=v;for(var I=[],T=!0,b=D.length-1;0<=b;b--){var S=D[b]|0;T&&S==v||(I[b]=S,T=!1)}this.g=I}var a={};function u(D){return-128<=D&&128>D?o(D,function(v){return new s([v|0],0>v?-1:0)}):new s([D|0],0>D?-1:0)}function l(D){if(isNaN(D)||!isFinite(D))return p;if(0>D)return N(l(-D));for(var v=[],I=1,T=0;D>=I;T++)v[T]=D/I|0,I*=4294967296;return new s(v,0)}function h(D,v){if(D.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(D.charAt(0)=="-")return N(h(D.substring(1),v));if(0<=D.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=l(Math.pow(v,8)),T=p,b=0;b<D.length;b+=8){var S=Math.min(8,D.length-b),_=parseInt(D.substring(b,b+S),v);8>S?(S=l(Math.pow(v,S)),T=T.j(S).add(l(_))):(T=T.j(I),T=T.add(l(_)))}return T}var p=u(0),m=u(1),y=u(16777216);t=s.prototype,t.m=function(){if(R(this))return-N(this).m();for(var D=0,v=1,I=0;I<this.g.length;I++){var T=this.i(I);D+=(0<=T?T:4294967296+T)*v,v*=4294967296}return D},t.toString=function(D){if(D=D||10,2>D||36<D)throw Error("radix out of range: "+D);if(w(this))return"0";if(R(this))return"-"+N(this).toString(D);for(var v=l(Math.pow(D,6)),I=this,T="";;){var b=Ee(I,v).g;I=O(I,b.j(v));var S=((0<I.g.length?I.g[0]:I.h)>>>0).toString(D);if(I=b,w(I))return S+T;for(;6>S.length;)S="0"+S;T=S+T}},t.i=function(D){return 0>D?0:D<this.g.length?this.g[D]:this.h};function w(D){if(D.h!=0)return!1;for(var v=0;v<D.g.length;v++)if(D.g[v]!=0)return!1;return!0}function R(D){return D.h==-1}t.l=function(D){return D=O(this,D),R(D)?-1:w(D)?0:1};function N(D){for(var v=D.g.length,I=[],T=0;T<v;T++)I[T]=~D.g[T];return new s(I,~D.h).add(m)}t.abs=function(){return R(this)?N(this):this},t.add=function(D){for(var v=Math.max(this.g.length,D.g.length),I=[],T=0,b=0;b<=v;b++){var S=T+(this.i(b)&65535)+(D.i(b)&65535),_=(S>>>16)+(this.i(b)>>>16)+(D.i(b)>>>16);T=_>>>16,S&=65535,_&=65535,I[b]=_<<16|S}return new s(I,I[I.length-1]&-2147483648?-1:0)};function O(D,v){return D.add(N(v))}t.j=function(D){if(w(this)||w(D))return p;if(R(this))return R(D)?N(this).j(N(D)):N(N(this).j(D));if(R(D))return N(this.j(N(D)));if(0>this.l(y)&&0>D.l(y))return l(this.m()*D.m());for(var v=this.g.length+D.g.length,I=[],T=0;T<2*v;T++)I[T]=0;for(T=0;T<this.g.length;T++)for(var b=0;b<D.g.length;b++){var S=this.i(T)>>>16,_=this.i(T)&65535,Ln=D.i(b)>>>16,Ss=D.i(b)&65535;I[2*T+2*b]+=_*Ss,$(I,2*T+2*b),I[2*T+2*b+1]+=S*Ss,$(I,2*T+2*b+1),I[2*T+2*b+1]+=_*Ln,$(I,2*T+2*b+1),I[2*T+2*b+2]+=S*Ln,$(I,2*T+2*b+2)}for(T=0;T<v;T++)I[T]=I[2*T+1]<<16|I[2*T];for(T=v;T<2*v;T++)I[T]=0;return new s(I,0)};function $(D,v){for(;(D[v]&65535)!=D[v];)D[v+1]+=D[v]>>>16,D[v]&=65535,v++}function K(D,v){this.g=D,this.h=v}function Ee(D,v){if(w(v))throw Error("division by zero");if(w(D))return new K(p,p);if(R(D))return v=Ee(N(D),v),new K(N(v.g),N(v.h));if(R(v))return v=Ee(D,N(v)),new K(N(v.g),v.h);if(30<D.g.length){if(R(D)||R(v))throw Error("slowDivide_ only works with positive integers.");for(var I=m,T=v;0>=T.l(D);)I=dt(I),T=dt(T);var b=me(I,1),S=me(T,1);for(T=me(T,2),I=me(I,2);!w(T);){var _=S.add(T);0>=_.l(D)&&(b=b.add(I),S=_),T=me(T,1),I=me(I,1)}return v=O(D,b.j(v)),new K(b,v)}for(b=p;0<=D.l(v);){for(I=Math.max(1,Math.floor(D.m()/v.m())),T=Math.ceil(Math.log(I)/Math.LN2),T=48>=T?1:Math.pow(2,T-48),S=l(I),_=S.j(v);R(_)||0<_.l(D);)I-=T,S=l(I),_=S.j(v);w(S)&&(S=m),b=b.add(S),D=O(D,_)}return new K(b,D)}t.A=function(D){return Ee(this,D).h},t.and=function(D){for(var v=Math.max(this.g.length,D.g.length),I=[],T=0;T<v;T++)I[T]=this.i(T)&D.i(T);return new s(I,this.h&D.h)},t.or=function(D){for(var v=Math.max(this.g.length,D.g.length),I=[],T=0;T<v;T++)I[T]=this.i(T)|D.i(T);return new s(I,this.h|D.h)},t.xor=function(D){for(var v=Math.max(this.g.length,D.g.length),I=[],T=0;T<v;T++)I[T]=this.i(T)^D.i(T);return new s(I,this.h^D.h)};function dt(D){for(var v=D.g.length+1,I=[],T=0;T<v;T++)I[T]=D.i(T)<<1|D.i(T-1)>>>31;return new s(I,D.h)}function me(D,v){var I=v>>5;v%=32;for(var T=D.g.length-I,b=[],S=0;S<T;S++)b[S]=0<v?D.i(S+I)>>>v|D.i(S+I+1)<<32-v:D.i(S+I);return new s(b,D.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,sv=FA.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=h,sr=FA.Integer=s}).apply(typeof LA<"u"?LA:typeof self<"u"?self:typeof window<"u"?window:{});var ih=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ar={};var av,e$,ns,cv,Ic,oh,uv,lv,dv;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,d,f){return c==Array.prototype||c==Object.prototype||(c[d]=f.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof ih=="object"&&ih];for(var d=0;d<c.length;++d){var f=c[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function i(c,d){if(d)e:{var f=r;c=c.split(".");for(var g=0;g<c.length-1;g++){var C=c[g];if(!(C in f))break e;f=f[C]}c=c[c.length-1],g=f[c],d=d(g),d!=g&&d!=null&&e(f,c,{configurable:!0,writable:!0,value:d})}}function o(c,d){c instanceof String&&(c+="");var f=0,g=!1,C={next:function(){if(!g&&f<c.length){var A=f++;return{value:d(A,c[A]),done:!1}}return g=!0,{done:!0,value:void 0}}};return C[Symbol.iterator]=function(){return C},C}i("Array.prototype.values",function(c){return c||function(){return o(this,function(d,f){return f})}});var s=s||{},a=this||self;function u(c){var d=typeof c;return d=d!="object"?d:c?Array.isArray(c)?"array":d:"null",d=="array"||d=="object"&&typeof c.length=="number"}function l(c){var d=typeof c;return d=="object"&&c!=null||d=="function"}function h(c,d,f){return c.call.apply(c.bind,arguments)}function p(c,d,f){if(!c)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var C=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(C,g),c.apply(d,C)}}return function(){return c.apply(d,arguments)}}function m(c,d,f){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,m.apply(null,arguments)}function y(c,d){var f=Array.prototype.slice.call(arguments,1);return function(){var g=f.slice();return g.push.apply(g,arguments),c.apply(this,g)}}function w(c,d){function f(){}f.prototype=d.prototype,c.aa=d.prototype,c.prototype=new f,c.prototype.constructor=c,c.Qb=function(g,C,A){for(var k=Array(arguments.length-2),we=2;we<arguments.length;we++)k[we-2]=arguments[we];return d.prototype[C].apply(g,k)}}function R(c){let d=c.length;if(0<d){let f=Array(d);for(let g=0;g<d;g++)f[g]=c[g];return f}return[]}function N(c,d){for(let f=1;f<arguments.length;f++){let g=arguments[f];if(u(g)){let C=c.length||0,A=g.length||0;c.length=C+A;for(let k=0;k<A;k++)c[C+k]=g[k]}else c.push(g)}}class O{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function $(c){return/^[\s\xa0]*$/.test(c)}function K(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function Ee(c){return Ee[" "](c),c}Ee[" "]=function(){};var dt=K().indexOf("Gecko")!=-1&&!(K().toLowerCase().indexOf("webkit")!=-1&&K().indexOf("Edge")==-1)&&!(K().indexOf("Trident")!=-1||K().indexOf("MSIE")!=-1)&&K().indexOf("Edge")==-1;function me(c,d,f){for(let g in c)d.call(f,c[g],g,c)}function D(c,d){for(let f in c)d.call(void 0,c[f],f,c)}function v(c){let d={};for(let f in c)d[f]=c[f];return d}let I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function T(c,d){let f,g;for(let C=1;C<arguments.length;C++){g=arguments[C];for(f in g)c[f]=g[f];for(let A=0;A<I.length;A++)f=I[A],Object.prototype.hasOwnProperty.call(g,f)&&(c[f]=g[f])}}function b(c){var d=1;c=c.split(":");let f=[];for(;0<d&&c.length;)f.push(c.shift()),d--;return c.length&&f.push(c.join(":")),f}function S(c){a.setTimeout(()=>{throw c},0)}function _(){var c=lf;let d=null;return c.g&&(d=c.g,c.g=c.g.next,c.g||(c.h=null),d.next=null),d}class Ln{constructor(){this.h=this.g=null}add(d,f){let g=Ss.get();g.set(d,f),this.h?this.h.next=g:this.g=g,this.h=g}}var Ss=new O(()=>new gN,c=>c.reset());class gN{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let As,Rs=!1,lf=new Ln,xI=()=>{let c=a.Promise.resolve(void 0);As=()=>{c.then(mN)}};var mN=()=>{for(var c;c=_();){try{c.h.call(c.g)}catch(f){S(f)}var d=Ss;d.j(c),100>d.h&&(d.h++,c.next=d.g,d.g=c)}Rs=!1};function fr(){this.s=this.s,this.C=this.C}fr.prototype.s=!1,fr.prototype.ma=function(){this.s||(this.s=!0,this.N())},fr.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function et(c,d){this.type=c,this.g=this.target=d,this.defaultPrevented=!1}et.prototype.h=function(){this.defaultPrevented=!0};var yN=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,d=Object.defineProperty({},"passive",{get:function(){c=!0}});try{let f=()=>{};a.addEventListener("test",f,d),a.removeEventListener("test",f,d)}catch{}return c}();function Ns(c,d){if(et.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var f=this.type=c.type,g=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=d,d=c.relatedTarget){if(dt){e:{try{Ee(d.nodeName);var C=!0;break e}catch{}C=!1}C||(d=null)}}else f=="mouseover"?d=c.fromElement:f=="mouseout"&&(d=c.toElement);this.relatedTarget=d,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:vN[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Ns.aa.h.call(this)}}w(Ns,et);var vN={2:"touch",3:"pen",4:"mouse"};Ns.prototype.h=function(){Ns.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Ms="closure_listenable_"+(1e6*Math.random()|0),_N=0;function IN(c,d,f,g,C){this.listener=c,this.proxy=null,this.src=d,this.type=f,this.capture=!!g,this.ha=C,this.key=++_N,this.da=this.fa=!1}function $c(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Hc(c){this.src=c,this.g={},this.h=0}Hc.prototype.add=function(c,d,f,g,C){var A=c.toString();c=this.g[A],c||(c=this.g[A]=[],this.h++);var k=hf(c,d,g,C);return-1<k?(d=c[k],f||(d.fa=!1)):(d=new IN(d,this.src,A,!!g,C),d.fa=f,c.push(d)),d};function df(c,d){var f=d.type;if(f in c.g){var g=c.g[f],C=Array.prototype.indexOf.call(g,d,void 0),A;(A=0<=C)&&Array.prototype.splice.call(g,C,1),A&&($c(d),c.g[f].length==0&&(delete c.g[f],c.h--))}}function hf(c,d,f,g){for(var C=0;C<c.length;++C){var A=c[C];if(!A.da&&A.listener==d&&A.capture==!!f&&A.ha==g)return C}return-1}var ff="closure_lm_"+(1e6*Math.random()|0),pf={};function kI(c,d,f,g,C){if(g&&g.once)return LI(c,d,f,g,C);if(Array.isArray(d)){for(var A=0;A<d.length;A++)kI(c,d[A],f,g,C);return null}return f=vf(f),c&&c[Ms]?c.K(d,f,l(g)?!!g.capture:!!g,C):OI(c,d,f,!1,g,C)}function OI(c,d,f,g,C,A){if(!d)throw Error("Invalid event type");var k=l(C)?!!C.capture:!!C,we=mf(c);if(we||(c[ff]=we=new Hc(c)),f=we.add(d,f,g,k,A),f.proxy)return f;if(g=EN(),f.proxy=g,g.src=c,g.listener=f,c.addEventListener)yN||(C=k),C===void 0&&(C=!1),c.addEventListener(d.toString(),g,C);else if(c.attachEvent)c.attachEvent(VI(d.toString()),g);else if(c.addListener&&c.removeListener)c.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return f}function EN(){function c(f){return d.call(c.src,c.listener,f)}let d=wN;return c}function LI(c,d,f,g,C){if(Array.isArray(d)){for(var A=0;A<d.length;A++)LI(c,d[A],f,g,C);return null}return f=vf(f),c&&c[Ms]?c.L(d,f,l(g)?!!g.capture:!!g,C):OI(c,d,f,!0,g,C)}function FI(c,d,f,g,C){if(Array.isArray(d))for(var A=0;A<d.length;A++)FI(c,d[A],f,g,C);else g=l(g)?!!g.capture:!!g,f=vf(f),c&&c[Ms]?(c=c.i,d=String(d).toString(),d in c.g&&(A=c.g[d],f=hf(A,f,g,C),-1<f&&($c(A[f]),Array.prototype.splice.call(A,f,1),A.length==0&&(delete c.g[d],c.h--)))):c&&(c=mf(c))&&(d=c.g[d.toString()],c=-1,d&&(c=hf(d,f,g,C)),(f=-1<c?d[c]:null)&&gf(f))}function gf(c){if(typeof c!="number"&&c&&!c.da){var d=c.src;if(d&&d[Ms])df(d.i,c);else{var f=c.type,g=c.proxy;d.removeEventListener?d.removeEventListener(f,g,c.capture):d.detachEvent?d.detachEvent(VI(f),g):d.addListener&&d.removeListener&&d.removeListener(g),(f=mf(d))?(df(f,c),f.h==0&&(f.src=null,d[ff]=null)):$c(c)}}}function VI(c){return c in pf?pf[c]:pf[c]="on"+c}function wN(c,d){if(c.da)c=!0;else{d=new Ns(d,this);var f=c.listener,g=c.ha||c.src;c.fa&&gf(c),c=f.call(g,d)}return c}function mf(c){return c=c[ff],c instanceof Hc?c:null}var yf="__closure_events_fn_"+(1e9*Math.random()>>>0);function vf(c){return typeof c=="function"?c:(c[yf]||(c[yf]=function(d){return c.handleEvent(d)}),c[yf])}function tt(){fr.call(this),this.i=new Hc(this),this.M=this,this.F=null}w(tt,fr),tt.prototype[Ms]=!0,tt.prototype.removeEventListener=function(c,d,f,g){FI(this,c,d,f,g)};function ht(c,d){var f,g=c.F;if(g)for(f=[];g;g=g.F)f.push(g);if(c=c.M,g=d.type||d,typeof d=="string")d=new et(d,c);else if(d instanceof et)d.target=d.target||c;else{var C=d;d=new et(g,c),T(d,C)}if(C=!0,f)for(var A=f.length-1;0<=A;A--){var k=d.g=f[A];C=zc(k,g,!0,d)&&C}if(k=d.g=c,C=zc(k,g,!0,d)&&C,C=zc(k,g,!1,d)&&C,f)for(A=0;A<f.length;A++)k=d.g=f[A],C=zc(k,g,!1,d)&&C}tt.prototype.N=function(){if(tt.aa.N.call(this),this.i){var c=this.i,d;for(d in c.g){for(var f=c.g[d],g=0;g<f.length;g++)$c(f[g]);delete c.g[d],c.h--}}this.F=null},tt.prototype.K=function(c,d,f,g){return this.i.add(String(c),d,!1,f,g)},tt.prototype.L=function(c,d,f,g){return this.i.add(String(c),d,!0,f,g)};function zc(c,d,f,g){if(d=c.i.g[String(d)],!d)return!0;d=d.concat();for(var C=!0,A=0;A<d.length;++A){var k=d[A];if(k&&!k.da&&k.capture==f){var we=k.listener,Qe=k.ha||k.src;k.fa&&df(c.i,k),C=we.call(Qe,g)!==!1&&C}}return C&&!g.defaultPrevented}function jI(c,d,f){if(typeof c=="function")f&&(c=m(c,f));else if(c&&typeof c.handleEvent=="function")c=m(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(c,d||0)}function UI(c){c.g=jI(()=>{c.g=null,c.i&&(c.i=!1,UI(c))},c.l);let d=c.h;c.h=null,c.m.apply(null,d)}class TN extends fr{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:UI(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ps(c){fr.call(this),this.h=c,this.g={}}w(Ps,fr);var BI=[];function $I(c){me(c.g,function(d,f){this.g.hasOwnProperty(f)&&gf(d)},c),c.g={}}Ps.prototype.N=function(){Ps.aa.N.call(this),$I(this)},Ps.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var _f=a.JSON.stringify,DN=a.JSON.parse,bN=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function If(){}If.prototype.h=null;function HI(c){return c.h||(c.h=c.i())}function zI(){}var xs={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ef(){et.call(this,"d")}w(Ef,et);function wf(){et.call(this,"c")}w(wf,et);var Zr={},qI=null;function qc(){return qI=qI||new tt}Zr.La="serverreachability";function WI(c){et.call(this,Zr.La,c)}w(WI,et);function ks(c){let d=qc();ht(d,new WI(d))}Zr.STAT_EVENT="statevent";function GI(c,d){et.call(this,Zr.STAT_EVENT,c),this.stat=d}w(GI,et);function ft(c){let d=qc();ht(d,new GI(d,c))}Zr.Ma="timingevent";function KI(c,d){et.call(this,Zr.Ma,c),this.size=d}w(KI,et);function Os(c,d){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},d)}function Ls(){this.g=!0}Ls.prototype.xa=function(){this.g=!1};function CN(c,d,f,g,C,A){c.info(function(){if(c.g)if(A)for(var k="",we=A.split("&"),Qe=0;Qe<we.length;Qe++){var he=we[Qe].split("=");if(1<he.length){var nt=he[0];he=he[1];var rt=nt.split("_");k=2<=rt.length&&rt[1]=="type"?k+(nt+"="+he+"&"):k+(nt+"=redacted&")}}else k=null;else k=A;return"XMLHTTP REQ ("+g+") [attempt "+C+"]: "+d+`
`+f+`
`+k})}function SN(c,d,f,g,C,A,k){c.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+C+"]: "+d+`
`+f+`
`+A+" "+k})}function Qi(c,d,f,g){c.info(function(){return"XMLHTTP TEXT ("+d+"): "+RN(c,f)+(g?" "+g:"")})}function AN(c,d){c.info(function(){return"TIMEOUT: "+d})}Ls.prototype.info=function(){};function RN(c,d){if(!c.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(c=0;c<f.length;c++)if(Array.isArray(f[c])){var g=f[c];if(!(2>g.length)){var C=g[1];if(Array.isArray(C)&&!(1>C.length)){var A=C[0];if(A!="noop"&&A!="stop"&&A!="close")for(var k=1;k<C.length;k++)C[k]=""}}}}return _f(f)}catch{return d}}var Wc={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},QI={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Tf;function Gc(){}w(Gc,If),Gc.prototype.g=function(){return new XMLHttpRequest},Gc.prototype.i=function(){return{}},Tf=new Gc;function pr(c,d,f,g){this.j=c,this.i=d,this.l=f,this.R=g||1,this.U=new Ps(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new YI}function YI(){this.i=null,this.g="",this.h=!1}var ZI={},Df={};function bf(c,d,f){c.L=1,c.v=Zc(Fn(d)),c.m=f,c.P=!0,JI(c,null)}function JI(c,d){c.F=Date.now(),Kc(c),c.A=Fn(c.v);var f=c.A,g=c.R;Array.isArray(g)||(g=[String(g)]),hE(f.i,"t",g),c.C=0,f=c.j.J,c.h=new YI,c.g=NE(c.j,f?d:null,!c.m),0<c.O&&(c.M=new TN(m(c.Y,c,c.g),c.O)),d=c.U,f=c.g,g=c.ca;var C="readystatechange";Array.isArray(C)||(C&&(BI[0]=C.toString()),C=BI);for(var A=0;A<C.length;A++){var k=kI(f,C[A],g||d.handleEvent,!1,d.h||d);if(!k)break;d.g[k.key]=k}d=c.H?v(c.H):{},c.m?(c.u||(c.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,d)):(c.u="GET",c.g.ea(c.A,c.u,null,d)),ks(),CN(c.i,c.u,c.A,c.l,c.R,c.m)}pr.prototype.ca=function(c){c=c.target;let d=this.M;d&&Vn(c)==3?d.j():this.Y(c)},pr.prototype.Y=function(c){try{if(c==this.g)e:{let rt=Vn(this.g);var d=this.g.Ba();let Ji=this.g.Z();if(!(3>rt)&&(rt!=3||this.g&&(this.h.h||this.g.oa()||_E(this.g)))){this.J||rt!=4||d==7||(d==8||0>=Ji?ks(3):ks(2)),Cf(this);var f=this.g.Z();this.X=f;t:if(XI(this)){var g=_E(this.g);c="";var C=g.length,A=Vn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Jr(this),Fs(this);var k="";break t}this.h.i=new a.TextDecoder}for(d=0;d<C;d++)this.h.h=!0,c+=this.h.i.decode(g[d],{stream:!(A&&d==C-1)});g.length=0,this.h.g+=c,this.C=0,k=this.h.g}else k=this.g.oa();if(this.o=f==200,SN(this.i,this.u,this.A,this.l,this.R,rt,f),this.o){if(this.T&&!this.K){t:{if(this.g){var we,Qe=this.g;if((we=Qe.g?Qe.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!$(we)){var he=we;break t}}he=null}if(f=he)Qi(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Sf(this,f);else{this.o=!1,this.s=3,ft(12),Jr(this),Fs(this);break e}}if(this.P){f=!0;let Kt;for(;!this.J&&this.C<k.length;)if(Kt=NN(this,k),Kt==Df){rt==4&&(this.s=4,ft(14),f=!1),Qi(this.i,this.l,null,"[Incomplete Response]");break}else if(Kt==ZI){this.s=4,ft(15),Qi(this.i,this.l,k,"[Invalid Chunk]"),f=!1;break}else Qi(this.i,this.l,Kt,null),Sf(this,Kt);if(XI(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),rt!=4||k.length!=0||this.h.h||(this.s=1,ft(16),f=!1),this.o=this.o&&f,!f)Qi(this.i,this.l,k,"[Invalid Chunked Response]"),Jr(this),Fs(this);else if(0<k.length&&!this.W){this.W=!0;var nt=this.j;nt.g==this&&nt.ba&&!nt.M&&(nt.j.info("Great, no buffering proxy detected. Bytes received: "+k.length),xf(nt),nt.M=!0,ft(11))}}else Qi(this.i,this.l,k,null),Sf(this,k);rt==4&&Jr(this),this.o&&!this.J&&(rt==4?CE(this.j,this):(this.o=!1,Kc(this)))}else GN(this.g),f==400&&0<k.indexOf("Unknown SID")?(this.s=3,ft(12)):(this.s=0,ft(13)),Jr(this),Fs(this)}}}catch{}finally{}};function XI(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function NN(c,d){var f=c.C,g=d.indexOf(`
`,f);return g==-1?Df:(f=Number(d.substring(f,g)),isNaN(f)?ZI:(g+=1,g+f>d.length?Df:(d=d.slice(g,g+f),c.C=g+f,d)))}pr.prototype.cancel=function(){this.J=!0,Jr(this)};function Kc(c){c.S=Date.now()+c.I,eE(c,c.I)}function eE(c,d){if(c.B!=null)throw Error("WatchDog timer not null");c.B=Os(m(c.ba,c),d)}function Cf(c){c.B&&(a.clearTimeout(c.B),c.B=null)}pr.prototype.ba=function(){this.B=null;let c=Date.now();0<=c-this.S?(AN(this.i,this.A),this.L!=2&&(ks(),ft(17)),Jr(this),this.s=2,Fs(this)):eE(this,this.S-c)};function Fs(c){c.j.G==0||c.J||CE(c.j,c)}function Jr(c){Cf(c);var d=c.M;d&&typeof d.ma=="function"&&d.ma(),c.M=null,$I(c.U),c.g&&(d=c.g,c.g=null,d.abort(),d.ma())}function Sf(c,d){try{var f=c.j;if(f.G!=0&&(f.g==c||Af(f.h,c))){if(!c.K&&Af(f.h,c)&&f.G==3){try{var g=f.Da.g.parse(d)}catch{g=null}if(Array.isArray(g)&&g.length==3){var C=g;if(C[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<c.F)nu(f),eu(f);else break e;Pf(f),ft(18)}}else f.za=C[1],0<f.za-f.T&&37500>C[2]&&f.F&&f.v==0&&!f.C&&(f.C=Os(m(f.Za,f),6e3));if(1>=rE(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else ei(f,11)}else if((c.K||f.g==c)&&nu(f),!$(d))for(C=f.Da.g.parse(d),d=0;d<C.length;d++){let he=C[d];if(f.T=he[0],he=he[1],f.G==2)if(he[0]=="c"){f.K=he[1],f.ia=he[2];let nt=he[3];nt!=null&&(f.la=nt,f.j.info("VER="+f.la));let rt=he[4];rt!=null&&(f.Aa=rt,f.j.info("SVER="+f.Aa));let Ji=he[5];Ji!=null&&typeof Ji=="number"&&0<Ji&&(g=1.5*Ji,f.L=g,f.j.info("backChannelRequestTimeoutMs_="+g)),g=f;let Kt=c.g;if(Kt){let iu=Kt.g?Kt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(iu){var A=g.h;A.g||iu.indexOf("spdy")==-1&&iu.indexOf("quic")==-1&&iu.indexOf("h2")==-1||(A.j=A.l,A.g=new Set,A.h&&(Rf(A,A.h),A.h=null))}if(g.D){let kf=Kt.g?Kt.g.getResponseHeader("X-HTTP-Session-Id"):null;kf&&(g.ya=kf,be(g.I,g.D,kf))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-c.F,f.j.info("Handshake RTT: "+f.R+"ms")),g=f;var k=c;if(g.qa=RE(g,g.J?g.ia:null,g.W),k.K){iE(g.h,k);var we=k,Qe=g.L;Qe&&(we.I=Qe),we.B&&(Cf(we),Kc(we)),g.g=k}else DE(g);0<f.i.length&&tu(f)}else he[0]!="stop"&&he[0]!="close"||ei(f,7);else f.G==3&&(he[0]=="stop"||he[0]=="close"?he[0]=="stop"?ei(f,7):Mf(f):he[0]!="noop"&&f.l&&f.l.ta(he),f.v=0)}}ks(4)}catch{}}var MN=class{constructor(c,d){this.g=c,this.map=d}};function tE(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function nE(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function rE(c){return c.h?1:c.g?c.g.size:0}function Af(c,d){return c.h?c.h==d:c.g?c.g.has(d):!1}function Rf(c,d){c.g?c.g.add(d):c.h=d}function iE(c,d){c.h&&c.h==d?c.h=null:c.g&&c.g.has(d)&&c.g.delete(d)}tE.prototype.cancel=function(){if(this.i=oE(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let c of this.g.values())c.cancel();this.g.clear()}};function oE(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let d=c.i;for(let f of c.g.values())d=d.concat(f.D);return d}return R(c.i)}function PN(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(u(c)){for(var d=[],f=c.length,g=0;g<f;g++)d.push(c[g]);return d}d=[],f=0;for(g in c)d[f++]=c[g];return d}function xN(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(u(c)||typeof c=="string"){var d=[];c=c.length;for(var f=0;f<c;f++)d.push(f);return d}d=[],f=0;for(let g in c)d[f++]=g;return d}}}function sE(c,d){if(c.forEach&&typeof c.forEach=="function")c.forEach(d,void 0);else if(u(c)||typeof c=="string")Array.prototype.forEach.call(c,d,void 0);else for(var f=xN(c),g=PN(c),C=g.length,A=0;A<C;A++)d.call(void 0,g[A],f&&f[A],c)}var aE=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function kN(c,d){if(c){c=c.split("&");for(var f=0;f<c.length;f++){var g=c[f].indexOf("="),C=null;if(0<=g){var A=c[f].substring(0,g);C=c[f].substring(g+1)}else A=c[f];d(A,C?decodeURIComponent(C.replace(/\+/g," ")):"")}}}function Xr(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof Xr){this.h=c.h,Qc(this,c.j),this.o=c.o,this.g=c.g,Yc(this,c.s),this.l=c.l;var d=c.i,f=new Us;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),cE(this,f),this.m=c.m}else c&&(d=String(c).match(aE))?(this.h=!1,Qc(this,d[1]||"",!0),this.o=Vs(d[2]||""),this.g=Vs(d[3]||"",!0),Yc(this,d[4]),this.l=Vs(d[5]||"",!0),cE(this,d[6]||"",!0),this.m=Vs(d[7]||"")):(this.h=!1,this.i=new Us(null,this.h))}Xr.prototype.toString=function(){var c=[],d=this.j;d&&c.push(js(d,uE,!0),":");var f=this.g;return(f||d=="file")&&(c.push("//"),(d=this.o)&&c.push(js(d,uE,!0),"@"),c.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&c.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&c.push("/"),c.push(js(f,f.charAt(0)=="/"?FN:LN,!0))),(f=this.i.toString())&&c.push("?",f),(f=this.m)&&c.push("#",js(f,jN)),c.join("")};function Fn(c){return new Xr(c)}function Qc(c,d,f){c.j=f?Vs(d,!0):d,c.j&&(c.j=c.j.replace(/:$/,""))}function Yc(c,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);c.s=d}else c.s=null}function cE(c,d,f){d instanceof Us?(c.i=d,UN(c.i,c.h)):(f||(d=js(d,VN)),c.i=new Us(d,c.h))}function be(c,d,f){c.i.set(d,f)}function Zc(c){return be(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Vs(c,d){return c?d?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function js(c,d,f){return typeof c=="string"?(c=encodeURI(c).replace(d,ON),f&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function ON(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var uE=/[#\/\?@]/g,LN=/[#\?:]/g,FN=/[#\?]/g,VN=/[#\?@]/g,jN=/#/g;function Us(c,d){this.h=this.g=null,this.i=c||null,this.j=!!d}function gr(c){c.g||(c.g=new Map,c.h=0,c.i&&kN(c.i,function(d,f){c.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}t=Us.prototype,t.add=function(c,d){gr(this),this.i=null,c=Yi(this,c);var f=this.g.get(c);return f||this.g.set(c,f=[]),f.push(d),this.h+=1,this};function lE(c,d){gr(c),d=Yi(c,d),c.g.has(d)&&(c.i=null,c.h-=c.g.get(d).length,c.g.delete(d))}function dE(c,d){return gr(c),d=Yi(c,d),c.g.has(d)}t.forEach=function(c,d){gr(this),this.g.forEach(function(f,g){f.forEach(function(C){c.call(d,C,g,this)},this)},this)},t.na=function(){gr(this);let c=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let g=0;g<d.length;g++){let C=c[g];for(let A=0;A<C.length;A++)f.push(d[g])}return f},t.V=function(c){gr(this);let d=[];if(typeof c=="string")dE(this,c)&&(d=d.concat(this.g.get(Yi(this,c))));else{c=Array.from(this.g.values());for(let f=0;f<c.length;f++)d=d.concat(c[f])}return d},t.set=function(c,d){return gr(this),this.i=null,c=Yi(this,c),dE(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[d]),this.h+=1,this},t.get=function(c,d){return c?(c=this.V(c),0<c.length?String(c[0]):d):d};function hE(c,d,f){lE(c,d),0<f.length&&(c.i=null,c.g.set(Yi(c,d),R(f)),c.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";let c=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var g=d[f];let A=encodeURIComponent(String(g)),k=this.V(g);for(g=0;g<k.length;g++){var C=A;k[g]!==""&&(C+="="+encodeURIComponent(String(k[g]))),c.push(C)}}return this.i=c.join("&")};function Yi(c,d){return d=String(d),c.j&&(d=d.toLowerCase()),d}function UN(c,d){d&&!c.j&&(gr(c),c.i=null,c.g.forEach(function(f,g){var C=g.toLowerCase();g!=C&&(lE(this,g),hE(this,C,f))},c)),c.j=d}function BN(c,d){let f=new Ls;if(a.Image){let g=new Image;g.onload=y(mr,f,"TestLoadImage: loaded",!0,d,g),g.onerror=y(mr,f,"TestLoadImage: error",!1,d,g),g.onabort=y(mr,f,"TestLoadImage: abort",!1,d,g),g.ontimeout=y(mr,f,"TestLoadImage: timeout",!1,d,g),a.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=c}else d(!1)}function $N(c,d){let f=new Ls,g=new AbortController,C=setTimeout(()=>{g.abort(),mr(f,"TestPingServer: timeout",!1,d)},1e4);fetch(c,{signal:g.signal}).then(A=>{clearTimeout(C),A.ok?mr(f,"TestPingServer: ok",!0,d):mr(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(C),mr(f,"TestPingServer: error",!1,d)})}function mr(c,d,f,g,C){try{C&&(C.onload=null,C.onerror=null,C.onabort=null,C.ontimeout=null),g(f)}catch{}}function HN(){this.g=new bN}function zN(c,d,f){let g=f||"";try{sE(c,function(C,A){let k=C;l(C)&&(k=_f(C)),d.push(g+A+"="+encodeURIComponent(k))})}catch(C){throw d.push(g+"type="+encodeURIComponent("_badmap")),C}}function Bs(c){this.l=c.Ub||null,this.j=c.eb||!1}w(Bs,If),Bs.prototype.g=function(){return new Jc(this.l,this.j)},Bs.prototype.i=function(c){return function(){return c}}({});function Jc(c,d){tt.call(this),this.D=c,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}w(Jc,tt),t=Jc.prototype,t.open=function(c,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=d,this.readyState=1,Hs(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(d.body=c),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,$s(this)),this.readyState=0},t.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Hs(this)),this.g&&(this.readyState=3,Hs(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;fE(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function fE(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}t.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var d=c.value?c.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!c.done}))&&(this.response=this.responseText+=d)}c.done?$s(this):Hs(this),this.readyState==3&&fE(this)}},t.Ra=function(c){this.g&&(this.response=this.responseText=c,$s(this))},t.Qa=function(c){this.g&&(this.response=c,$s(this))},t.ga=function(){this.g&&$s(this)};function $s(c){c.readyState=4,c.l=null,c.j=null,c.v=null,Hs(c)}t.setRequestHeader=function(c,d){this.u.append(c,d)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";let c=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,c.push(f[0]+": "+f[1]),f=d.next();return c.join(`\r
`)};function Hs(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Jc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function pE(c){let d="";return me(c,function(f,g){d+=g,d+=":",d+=f,d+=`\r
`}),d}function Nf(c,d,f){e:{for(g in f){var g=!1;break e}g=!0}g||(f=pE(f),typeof c=="string"?f!=null&&encodeURIComponent(String(f)):be(c,d,f))}function Re(c){tt.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}w(Re,tt);var qN=/^https?$/i,WN=["POST","PUT"];t=Re.prototype,t.Ha=function(c){this.J=c},t.ea=function(c,d,f,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);d=d?d.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Tf.g(),this.v=this.o?HI(this.o):HI(Tf),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(d,String(c),!0),this.B=!1}catch(A){gE(this,A);return}if(c=f||"",f=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var C in g)f.set(C,g[C]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(let A of g.keys())f.set(A,g.get(A));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(f.keys()).find(A=>A.toLowerCase()=="content-type"),C=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(WN,d,void 0))||g||C||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[A,k]of f)this.g.setRequestHeader(A,k);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{vE(this),this.u=!0,this.g.send(c),this.u=!1}catch(A){gE(this,A)}};function gE(c,d){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=d,c.m=5,mE(c),Xc(c)}function mE(c){c.A||(c.A=!0,ht(c,"complete"),ht(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,ht(this,"complete"),ht(this,"abort"),Xc(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Xc(this,!0)),Re.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?yE(this):this.bb())},t.bb=function(){yE(this)};function yE(c){if(c.h&&typeof s<"u"&&(!c.v[1]||Vn(c)!=4||c.Z()!=2)){if(c.u&&Vn(c)==4)jI(c.Ea,0,c);else if(ht(c,"readystatechange"),Vn(c)==4){c.h=!1;try{let k=c.Z();e:switch(k){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var g;if(g=k===0){var C=String(c.D).match(aE)[1]||null;!C&&a.self&&a.self.location&&(C=a.self.location.protocol.slice(0,-1)),g=!qN.test(C?C.toLowerCase():"")}f=g}if(f)ht(c,"complete"),ht(c,"success");else{c.m=6;try{var A=2<Vn(c)?c.g.statusText:""}catch{A=""}c.l=A+" ["+c.Z()+"]",mE(c)}}finally{Xc(c)}}}}function Xc(c,d){if(c.g){vE(c);let f=c.g,g=c.v[0]?()=>{}:null;c.g=null,c.v=null,d||ht(c,"ready");try{f.onreadystatechange=g}catch{}}}function vE(c){c.I&&(a.clearTimeout(c.I),c.I=null)}t.isActive=function(){return!!this.g};function Vn(c){return c.g?c.g.readyState:0}t.Z=function(){try{return 2<Vn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(c){if(this.g){var d=this.g.responseText;return c&&d.indexOf(c)==0&&(d=d.substring(c.length)),DN(d)}};function _E(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function GN(c){let d={};c=(c.g&&2<=Vn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<c.length;g++){if($(c[g]))continue;var f=b(c[g]);let C=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let A=d[C]||[];d[C]=A,A.push(f)}D(d,function(g){return g.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function zs(c,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[c]||d}function IE(c){this.Aa=0,this.i=[],this.j=new Ls,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=zs("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=zs("baseRetryDelayMs",5e3,c),this.cb=zs("retryDelaySeedMs",1e4,c),this.Wa=zs("forwardChannelMaxRetries",2,c),this.wa=zs("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new tE(c&&c.concurrentRequestLimit),this.Da=new HN,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=IE.prototype,t.la=8,t.G=1,t.connect=function(c,d,f,g){ft(0),this.W=c,this.H=d||{},f&&g!==void 0&&(this.H.OSID=f,this.H.OAID=g),this.F=this.X,this.I=RE(this,null,this.W),tu(this)};function Mf(c){if(EE(c),c.G==3){var d=c.U++,f=Fn(c.I);if(be(f,"SID",c.K),be(f,"RID",d),be(f,"TYPE","terminate"),qs(c,f),d=new pr(c,c.j,d),d.L=2,d.v=Zc(Fn(f)),f=!1,a.navigator&&a.navigator.sendBeacon)try{f=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&a.Image&&(new Image().src=d.v,f=!0),f||(d.g=NE(d.j,null),d.g.ea(d.v)),d.F=Date.now(),Kc(d)}AE(c)}function eu(c){c.g&&(xf(c),c.g.cancel(),c.g=null)}function EE(c){eu(c),c.u&&(a.clearTimeout(c.u),c.u=null),nu(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function tu(c){if(!nE(c.h)&&!c.s){c.s=!0;var d=c.Ga;As||xI(),Rs||(As(),Rs=!0),lf.add(d,c),c.B=0}}function KN(c,d){return rE(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=d.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=Os(m(c.Ga,c,d),SE(c,c.B)),c.B++,!0)}t.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;let C=new pr(this,this.j,c),A=this.o;if(this.S&&(A?(A=v(A),T(A,this.S)):A=this.S),this.m!==null||this.O||(C.H=A,A=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var g=this.i[f];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(d+=g,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=TE(this,C,d),f=Fn(this.I),be(f,"RID",c),be(f,"CVER",22),this.D&&be(f,"X-HTTP-Session-Id",this.D),qs(this,f),A&&(this.O?d="headers="+encodeURIComponent(String(pE(A)))+"&"+d:this.m&&Nf(f,this.m,A)),Rf(this.h,C),this.Ua&&be(f,"TYPE","init"),this.P?(be(f,"$req",d),be(f,"SID","null"),C.T=!0,bf(C,f,null)):bf(C,f,d),this.G=2}}else this.G==3&&(c?wE(this,c):this.i.length==0||nE(this.h)||wE(this))};function wE(c,d){var f;d?f=d.l:f=c.U++;let g=Fn(c.I);be(g,"SID",c.K),be(g,"RID",f),be(g,"AID",c.T),qs(c,g),c.m&&c.o&&Nf(g,c.m,c.o),f=new pr(c,c.j,f,c.B+1),c.m===null&&(f.H=c.o),d&&(c.i=d.D.concat(c.i)),d=TE(c,f,1e3),f.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),Rf(c.h,f),bf(f,g,d)}function qs(c,d){c.H&&me(c.H,function(f,g){be(d,g,f)}),c.l&&sE({},function(f,g){be(d,g,f)})}function TE(c,d,f){f=Math.min(c.i.length,f);var g=c.l?m(c.l.Na,c.l,c):null;e:{var C=c.i;let A=-1;for(;;){let k=["count="+f];A==-1?0<f?(A=C[0].g,k.push("ofs="+A)):A=0:k.push("ofs="+A);let we=!0;for(let Qe=0;Qe<f;Qe++){let he=C[Qe].g,nt=C[Qe].map;if(he-=A,0>he)A=Math.max(0,C[Qe].g-100),we=!1;else try{zN(nt,k,"req"+he+"_")}catch{g&&g(nt)}}if(we){g=k.join("&");break e}}}return c=c.i.splice(0,f),d.D=c,g}function DE(c){if(!c.g&&!c.u){c.Y=1;var d=c.Fa;As||xI(),Rs||(As(),Rs=!0),lf.add(d,c),c.v=0}}function Pf(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=Os(m(c.Fa,c),SE(c,c.v)),c.v++,!0)}t.Fa=function(){if(this.u=null,bE(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=Os(m(this.ab,this),c)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ft(10),eu(this),bE(this))};function xf(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function bE(c){c.g=new pr(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var d=Fn(c.qa);be(d,"RID","rpc"),be(d,"SID",c.K),be(d,"AID",c.T),be(d,"CI",c.F?"0":"1"),!c.F&&c.ja&&be(d,"TO",c.ja),be(d,"TYPE","xmlhttp"),qs(c,d),c.m&&c.o&&Nf(d,c.m,c.o),c.L&&(c.g.I=c.L);var f=c.g;c=c.ia,f.L=1,f.v=Zc(Fn(d)),f.m=null,f.P=!0,JI(f,c)}t.Za=function(){this.C!=null&&(this.C=null,eu(this),Pf(this),ft(19))};function nu(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function CE(c,d){var f=null;if(c.g==d){nu(c),xf(c),c.g=null;var g=2}else if(Af(c.h,d))f=d.D,iE(c.h,d),g=1;else return;if(c.G!=0){if(d.o)if(g==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var C=c.B;g=qc(),ht(g,new KI(g,f)),tu(c)}else DE(c);else if(C=d.s,C==3||C==0&&0<d.X||!(g==1&&KN(c,d)||g==2&&Pf(c)))switch(f&&0<f.length&&(d=c.h,d.i=d.i.concat(f)),C){case 1:ei(c,5);break;case 4:ei(c,10);break;case 3:ei(c,6);break;default:ei(c,2)}}}function SE(c,d){let f=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(f*=2),f*d}function ei(c,d){if(c.j.info("Error code "+d),d==2){var f=m(c.fb,c),g=c.Xa;let C=!g;g=new Xr(g||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Qc(g,"https"),Zc(g),C?BN(g.toString(),f):$N(g.toString(),f)}else ft(2);c.G=0,c.l&&c.l.sa(d),AE(c),EE(c)}t.fb=function(c){c?(this.j.info("Successfully pinged google.com"),ft(2)):(this.j.info("Failed to ping google.com"),ft(1))};function AE(c){if(c.G=0,c.ka=[],c.l){let d=oE(c.h);(d.length!=0||c.i.length!=0)&&(N(c.ka,d),N(c.ka,c.i),c.h.i.length=0,R(c.i),c.i.length=0),c.l.ra()}}function RE(c,d,f){var g=f instanceof Xr?Fn(f):new Xr(f);if(g.g!="")d&&(g.g=d+"."+g.g),Yc(g,g.s);else{var C=a.location;g=C.protocol,d=d?d+"."+C.hostname:C.hostname,C=+C.port;var A=new Xr(null);g&&Qc(A,g),d&&(A.g=d),C&&Yc(A,C),f&&(A.l=f),g=A}return f=c.D,d=c.ya,f&&d&&be(g,f,d),be(g,"VER",c.la),qs(c,g),g}function NE(c,d,f){if(d&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=c.Ca&&!c.pa?new Re(new Bs({eb:f})):new Re(c.pa),d.Ha(c.J),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function ME(){}t=ME.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function ru(){}ru.prototype.g=function(c,d){return new Rt(c,d)};function Rt(c,d){tt.call(this),this.g=new IE(d),this.l=c,this.h=d&&d.messageUrlParams||null,c=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(c?c["X-WebChannel-Content-Type"]=d.messageContentType:c={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(c?c["X-WebChannel-Client-Profile"]=d.va:c={"X-WebChannel-Client-Profile":d.va}),this.g.S=c,(c=d&&d.Sb)&&!$(c)&&(this.g.m=c),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!$(d)&&(this.g.D=d,c=this.h,c!==null&&d in c&&(c=this.h,d in c&&delete c[d])),this.j=new Zi(this)}w(Rt,tt),Rt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Rt.prototype.close=function(){Mf(this.g)},Rt.prototype.o=function(c){var d=this.g;if(typeof c=="string"){var f={};f.__data__=c,c=f}else this.u&&(f={},f.__data__=_f(c),c=f);d.i.push(new MN(d.Ya++,c)),d.G==3&&tu(d)},Rt.prototype.N=function(){this.g.l=null,delete this.j,Mf(this.g),delete this.g,Rt.aa.N.call(this)};function PE(c){Ef.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var d=c.__sm__;if(d){e:{for(let f in d){c=f;break e}c=void 0}(this.i=c)&&(c=this.i,d=d!==null&&c in d?d[c]:void 0),this.data=d}else this.data=c}w(PE,Ef);function xE(){wf.call(this),this.status=1}w(xE,wf);function Zi(c){this.g=c}w(Zi,ME),Zi.prototype.ua=function(){ht(this.g,"a")},Zi.prototype.ta=function(c){ht(this.g,new PE(c))},Zi.prototype.sa=function(c){ht(this.g,new xE)},Zi.prototype.ra=function(){ht(this.g,"b")},ru.prototype.createWebChannel=ru.prototype.g,Rt.prototype.send=Rt.prototype.o,Rt.prototype.open=Rt.prototype.m,Rt.prototype.close=Rt.prototype.close,dv=ar.createWebChannelTransport=function(){return new ru},lv=ar.getStatEventTarget=function(){return qc()},uv=ar.Event=Zr,oh=ar.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Wc.NO_ERROR=0,Wc.TIMEOUT=8,Wc.HTTP_ERROR=6,Ic=ar.ErrorCode=Wc,QI.COMPLETE="complete",cv=ar.EventType=QI,zI.EventType=xs,xs.OPEN="a",xs.CLOSE="b",xs.ERROR="c",xs.MESSAGE="d",tt.prototype.listen=tt.prototype.K,ns=ar.WebChannel=zI,e$=ar.FetchXmlHttpFactory=Bs,Re.prototype.listenOnce=Re.prototype.L,Re.prototype.getLastError=Re.prototype.Ka,Re.prototype.getLastErrorCode=Re.prototype.Ba,Re.prototype.getStatus=Re.prototype.Z,Re.prototype.getResponseJson=Re.prototype.Oa,Re.prototype.getResponseText=Re.prototype.oa,Re.prototype.send=Re.prototype.ea,Re.prototype.setWithCredentials=Re.prototype.Ha,av=ar.XhrIo=Re}).apply(typeof ih<"u"?ih:typeof self<"u"?self:typeof window<"u"?window:{});var VA="@firebase/firestore",jA="4.7.16";var Ge=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Ge.UNAUTHENTICATED=new Ge(null),Ge.GOOGLE_CREDENTIALS=new Ge("google-credentials-uid"),Ge.FIRST_PARTY=new Ge("first-party-uid"),Ge.MOCK_USER=new Ge("mock-user");var ws="11.8.1";var ji=new Dn("@firebase/firestore");function rs(){return ji.logLevel}function V(t,...e){if(ji.logLevel<=ce.DEBUG){let n=e.map(rI);ji.debug(`Firestore (${ws}): ${t}`,...n)}}function cr(t,...e){if(ji.logLevel<=ce.ERROR){let n=e.map(rI);ji.error(`Firestore (${ws}): ${t}`,...n)}}function ls(t,...e){if(ji.logLevel<=ce.WARN){let n=e.map(rI);ji.warn(`Firestore (${ws}): ${t}`,...n)}}function rI(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}function z(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,M0(t,r,n)}function M0(t,e,n){let r=`FIRESTORE (${ws}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw cr(r),new Error(r)}function ge(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||M0(e,i,r)}function Q(t,e){return t}var M={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},L=class extends Ot{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var An=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var hh=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},mv=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Ge.UNAUTHENTICATED))}shutdown(){}},yv=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},vv=class{constructor(e){this.t=e,this.currentUser=Ge.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ge(this.o===void 0,42304);let r=this.i,i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve(),o=new An;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new An,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let u=o;e.enqueueRetryable(()=>E(this,null,function*(){yield u.promise,yield i(this.currentUser)}))},a=u=>{V("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?a(u):(V("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new An)}},0),s()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(V("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ge(typeof r.accessToken=="string",31837,{l:r}),new hh(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return ge(e===null||typeof e=="string",2055,{h:e}),new Ge(e)}},_v=class{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Ge.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},Iv=class{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new _v(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Ge.FIRST_PARTY))}shutdown(){}invalidateToken(){}},fh=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Ev=class{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,At(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){ge(this.o===void 0,3512);let r=o=>{o.error!=null&&V("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.m;return this.m=o.token,V("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{V("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.V.getImmediate({optional:!0});o?i(o):V("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new fh(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ge(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new fh(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function t$(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}function P0(){return new TextEncoder}var ph=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=t$(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+=e.charAt(i[o]%62))}return r}};function re(t,e){return t<e?-1:t>e?1:0}function wv(t,e){let n=0;for(;n<t.length&&n<e.length;){let r=t.codePointAt(n),i=e.codePointAt(n);if(r!==i){if(r<128&&i<128)return re(r,i);{let o=P0(),s=n$(o.encode(UA(t,n)),o.encode(UA(e,n)));return s!==0?s:re(r,i)}}n+=r>65535?2:1}return re(t.length,e.length)}function UA(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function n$(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return re(t[n],e[n]);return re(t.length,e.length)}function ds(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}var BA=-62135596800,$A=1e6,Xe=class t{static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*$A);return new t(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new L(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new L(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<BA)throw new L(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new L(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/$A}_compareTo(e){return this.seconds===e.seconds?re(this.nanoseconds,e.nanoseconds):re(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds-BA;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var J=class t{static fromTimestamp(e){return new t(e)}static min(){return new t(new Xe(0,0))}static max(){return new t(new Xe(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var HA="__name__",gh=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&z(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&z(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let o=t.compareSegments(e.get(i),n.get(i));if(o!==0)return o}return re(e.length,n.length)}static compareSegments(e,n){let r=t.isNumericId(e),i=t.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?t.extractNumericId(e).compare(t.extractNumericId(n)):wv(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return sr.fromString(e.substring(4,e.length-2))}},Ae=class t extends gh{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new L(M.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new t(n)}static emptyPath(){return new t([])}},r$=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Ft=class t extends gh{construct(e,n,r){return new t(e,n,r)}static isValidIdentifier(e){return r$.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===HA}static keyField(){return new t([HA])}static fromServerFormat(e){let n=[],r="",i=0,o=()=>{if(r.length===0)throw new L(M.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new L(M.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new L(M.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new L(M.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var H=class t{constructor(e){this.path=e}static fromPath(e){return new t(Ae.fromString(e))}static fromName(e){return new t(Ae.fromString(e).popFirst(5))}static empty(){return new t(Ae.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ae.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ae.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new Ae(e.slice()))}};var Cc=-1,Tv=class{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}};Tv.UNKNOWN_ID=-1;function i$(t,e){let n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=J.fromTimestamp(r===1e9?new Xe(n+1,0):new Xe(n,r));return new Ui(i,H.empty(),e)}function o$(t){return new Ui(t.readTime,t.key,Cc)}var Ui=class t{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new t(J.min(),H.empty(),Cc)}static max(){return new t(J.max(),H.empty(),Cc)}};function s$(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=H.comparator(t.documentKey,e.documentKey),n!==0?n:re(t.largestBatchId,e.largestBatchId))}var a$="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Dv=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Ts(t){return E(this,null,function*(){if(t.code!==M.FAILED_PRECONDITION||t.message!==a$)throw t;V("LocalStore","Unexpectedly lost primary lease")})}var P=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&z(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,r)=>{n(e)})}static reject(e){return new t((n,r)=>{r(e)})}static waitFor(e){return new t((n,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&n()},u=>r(u))}),s=!0,o===i&&n()})}static or(e){let n=t.resolve(!1);for(let r of e)n=n.next(i=>i?t.resolve(i):r());return n}static forEach(e,n){let r=[];return e.forEach((i,o)=>{r.push(n.call(this,i,o))}),this.waitFor(r)}static mapArray(e,n){return new t((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let u=0;u<o;u++){let l=u;n(e[l]).next(h=>{s[l]=h,++a,a===o&&r(s)},h=>i(h))}})}static doWhile(e,n){return new t((r,i)=>{let o=()=>{e()===!0?n().next(()=>{o()},i):r()};o()})}};function c$(t){let e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ds(t){return t.name==="IndexedDbTransactionError"}var iI=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.ue(i),this.ce=i=>r.writeSequenceNumber(i))}ue(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.ce&&this.ce(n),n}}t.le=-1;return t})(),oI=-1;function Zh(t){return t==null}function Sc(t){return t===0&&1/t==-1/0}function u$(t){return typeof t=="number"&&Number.isInteger(t)&&!Sc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var x0="";function l$(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=zA(e)),e=d$(t.get(n),e);return zA(e)}function d$(t,e){let n=e,r=t.length;for(let i=0;i<r;i++){let o=t.charAt(i);switch(o){case"\0":n+="";break;case x0:n+="";break;default:n+=o}}return n}function zA(t){return t+x0+""}var h$="remoteDocuments",k0="owner";var O0="mutationQueues";var L0="mutations";var F0="documentMutations",f$="remoteDocumentsV14";var V0="remoteDocumentGlobal";var j0="targets";var U0="targetDocuments";var B0="targetGlobal",$0="collectionParents";var H0="clientMetadata";var z0="bundles";var q0="namedQueries";var p$="indexConfiguration";var g$="indexState";var m$="indexEntries";var W0="documentOverlays";var y$="globals";var v$=[O0,L0,F0,h$,j0,k0,B0,U0,H0,V0,$0,z0,q0],oY=[...v$,W0],_$=[O0,L0,F0,f$,j0,k0,B0,U0,H0,V0,$0,z0,q0,W0],I$=_$,E$=[...I$,p$,g$,m$];var sY=[...E$,y$];function qA(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Yr(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function G0(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Pe=class t{constructor(e,n){this.comparator=e,this.root=n||Rn.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Rn.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Rn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new as(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new as(this.root,e,this.comparator,!1)}getReverseIterator(){return new as(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new as(this.root,e,this.comparator,!0)}},as=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Rn=class t{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??t.EMPTY,this.right=o??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new t(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):o===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw z(43730,{key:this.key,value:this.value});if(this.right.isRed())throw z(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw z(27949);return e+(this.isRed()?0:1)}};Rn.EMPTY=null,Rn.RED=!0,Rn.BLACK=!1;Rn.EMPTY=new class{constructor(){this.size=0}get key(){throw z(57766)}get value(){throw z(16141)}get color(){throw z(16727)}get left(){throw z(29726)}get right(){throw z(36894)}copy(e,n,r,i,o){return this}insert(e,n,r){return new Rn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Ke=class t{constructor(e){this.comparator=e,this.data=new Pe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new mh(this.data.getIterator())}getIteratorFrom(e){return new mh(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},mh=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Wt=class t{constructor(e){this.fields=e,e.sort(Ft.comparator)}static empty(){return new t([])}unionWith(e){let n=new Ke(Ft.comparator);for(let r of this.fields)n=n.add(r);for(let r of e)n=n.add(r);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ds(this.fields,e.fields,(n,r)=>n.isEqual(r))}};var yh=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var lt=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new yh("Invalid base64 string: "+o):o}}(e);return new t(n)}static fromUint8Array(e){let n=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return re(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};lt.EMPTY_BYTE_STRING=new lt("");var w$=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ur(t){if(ge(!!t,39018),typeof t=="string"){let e=0,n=w$.exec(t);if(ge(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ce(t.seconds),nanos:Ce(t.nanos)}}function Ce(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function lr(t){return typeof t=="string"?lt.fromBase64String(t):lt.fromUint8Array(t)}var K0="server_timestamp",Q0="__type__",Y0="__previous_value__",Z0="__local_write_time__";function sI(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{})[Q0])===null||n===void 0?void 0:n.stringValue)===K0}function Jh(t){let e=t.mapValue.fields[Y0];return sI(e)?Jh(e):e}function Ac(t){let e=ur(t.mapValue.fields[Z0].timestampValue);return new Xe(e.seconds,e.nanos)}var bv=class{constructor(e,n,r,i,o,s,a,u,l,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l,this.isUsingEmulator=h}},vh="(default)",_h=class t{constructor(e,n){this.projectId=e,this.database=n||vh}static empty(){return new t("","")}get isDefaultDatabase(){return this.database===vh}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var aI="__type__",J0="__max__",sh={mapValue:{fields:{__type__:{stringValue:J0}}}},cI="__vector__",hs="value";function qr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?sI(t)?4:eR(t)?9007199254740991:X0(t)?10:11:z(28295,{value:t})}function xn(t,e){if(t===e)return!0;let n=qr(t);if(n!==qr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ac(t).isEqual(Ac(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=ur(i.timestampValue),a=ur(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,o){return lr(i.bytesValue).isEqual(lr(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,o){return Ce(i.geoPointValue.latitude)===Ce(o.geoPointValue.latitude)&&Ce(i.geoPointValue.longitude)===Ce(o.geoPointValue.longitude)}(t,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return Ce(i.integerValue)===Ce(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=Ce(i.doubleValue),a=Ce(o.doubleValue);return s===a?Sc(s)===Sc(a):isNaN(s)&&isNaN(a)}return!1}(t,e);case 9:return ds(t.arrayValue.values||[],e.arrayValue.values||[],xn);case 10:case 11:return function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(qA(s)!==qA(a))return!1;for(let u in s)if(s.hasOwnProperty(u)&&(a[u]===void 0||!xn(s[u],a[u])))return!1;return!0}(t,e);default:return z(52216,{left:t})}}function Rc(t,e){return(t.values||[]).find(n=>xn(n,e))!==void 0}function fs(t,e){if(t===e)return 0;let n=qr(t),r=qr(e);if(n!==r)return re(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return re(t.booleanValue,e.booleanValue);case 2:return function(o,s){let a=Ce(o.integerValue||o.doubleValue),u=Ce(s.integerValue||s.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(t,e);case 3:return WA(t.timestampValue,e.timestampValue);case 4:return WA(Ac(t),Ac(e));case 5:return wv(t.stringValue,e.stringValue);case 6:return function(o,s){let a=lr(o),u=lr(s);return a.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(o,s){let a=o.split("/"),u=s.split("/");for(let l=0;l<a.length&&l<u.length;l++){let h=re(a[l],u[l]);if(h!==0)return h}return re(a.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,s){let a=re(Ce(o.latitude),Ce(s.latitude));return a!==0?a:re(Ce(o.longitude),Ce(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return GA(t.arrayValue,e.arrayValue);case 10:return function(o,s){var a,u,l,h;let p=o.fields||{},m=s.fields||{},y=(a=p[hs])===null||a===void 0?void 0:a.arrayValue,w=(u=m[hs])===null||u===void 0?void 0:u.arrayValue,R=re(((l=y?.values)===null||l===void 0?void 0:l.length)||0,((h=w?.values)===null||h===void 0?void 0:h.length)||0);return R!==0?R:GA(y,w)}(t.mapValue,e.mapValue);case 11:return function(o,s){if(o===sh.mapValue&&s===sh.mapValue)return 0;if(o===sh.mapValue)return 1;if(s===sh.mapValue)return-1;let a=o.fields||{},u=Object.keys(a),l=s.fields||{},h=Object.keys(l);u.sort(),h.sort();for(let p=0;p<u.length&&p<h.length;++p){let m=wv(u[p],h[p]);if(m!==0)return m;let y=fs(a[u[p]],l[h[p]]);if(y!==0)return y}return re(u.length,h.length)}(t.mapValue,e.mapValue);default:throw z(23264,{Pe:n})}}function WA(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return re(t,e);let n=ur(t),r=ur(e),i=re(n.seconds,r.seconds);return i!==0?i:re(n.nanos,r.nanos)}function GA(t,e){let n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){let o=fs(n[i],r[i]);if(o)return o}return re(n.length,r.length)}function ps(t){return Cv(t)}function Cv(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){let r=ur(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return lr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return H.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(let o of n.values||[])i?i=!1:r+=",",r+=Cv(o);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){let r=Object.keys(n.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${Cv(n.fields[s])}`;return i+"}"}(t.mapValue):z(61005,{value:t})}function uh(t){switch(qr(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=Jh(t);return e?16+uh(e):16;case 5:return 2*t.stringValue.length;case 6:return lr(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,o)=>i+uh(o),0)}(t.arrayValue);case 10:case 11:return function(r){let i=0;return Yr(r.fields,(o,s)=>{i+=o.length+uh(s)}),i}(t.mapValue);default:throw z(13486,{value:t})}}function KA(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Sv(t){return!!t&&"integerValue"in t}function uI(t){return!!t&&"arrayValue"in t}function QA(t){return!!t&&"nullValue"in t}function YA(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function lh(t){return!!t&&"mapValue"in t}function X0(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{})[aI])===null||n===void 0?void 0:n.stringValue)===cI}function wc(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return Yr(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=wc(r)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=wc(t.arrayValue.values[n]);return e}return Object.assign({},t)}function eR(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===J0}var cY={mapValue:{fields:{[aI]:{stringValue:cI},[hs]:{arrayValue:{}}}}};var Lt=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!lh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=wc(n)}setAll(e){let n=Ft.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!n.isImmediateParentOf(a)){let u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}s?r[a.lastSegment()]=wc(s):i.push(a.lastSegment())});let o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){let n=this.field(e.popLast());lh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return xn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];lh(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Yr(n,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new t(wc(this.value))}};function tR(t){let e=[];return Yr(t.fields,(n,r)=>{let i=new Ft([n]);if(lh(r)){let o=tR(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new Wt(e)}var dn=class t{constructor(e,n,r,i,o,s,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new t(e,0,J.min(),J.min(),J.min(),Lt.empty(),0)}static newFoundDocument(e,n,r,i){return new t(e,1,n,J.min(),r,i,0)}static newNoDocument(e,n){return new t(e,2,n,J.min(),J.min(),Lt.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,J.min(),J.min(),Lt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(J.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Lt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Lt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=J.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var gs=class{constructor(e,n){this.position=e,this.inclusive=n}};function ZA(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){let o=e[i],s=t.position[i];if(o.field.isKeyField()?r=H.comparator(H.fromName(s.referenceValue),n.key):r=fs(s,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function JA(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!xn(t.position[n],e.position[n]))return!1;return!0}var Bi=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function T$(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var Ih=class{},Ue=class t extends Ih{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new Rv(e,n,r):n==="array-contains"?new Pv(e,r):n==="in"?new xv(e,r):n==="not-in"?new kv(e,r):n==="array-contains-any"?new Ov(e,r):new t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new Nv(e,r):new Mv(e,r)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(fs(n,this.value)):n!==null&&qr(this.value)===qr(n)&&this.matchesComparison(fs(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return z(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},hn=class t extends Ih{constructor(e,n){super(),this.filters=e,this.op=n,this.Te=null}static create(e,n){return new t(e,n)}matches(e){return nR(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}};function nR(t){return t.op==="and"}function rR(t){return D$(t)&&nR(t)}function D$(t){for(let e of t.filters)if(e instanceof hn)return!1;return!0}function Av(t){if(t instanceof Ue)return t.field.canonicalString()+t.op.toString()+ps(t.value);if(rR(t))return t.filters.map(e=>Av(e)).join(",");{let e=t.filters.map(n=>Av(n)).join(",");return`${t.op}(${e})`}}function iR(t,e){return t instanceof Ue?function(r,i){return i instanceof Ue&&r.op===i.op&&r.field.isEqual(i.field)&&xn(r.value,i.value)}(t,e):t instanceof hn?function(r,i){return i instanceof hn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&iR(s,i.filters[a]),!0):!1}(t,e):void z(19439)}function oR(t){return t instanceof Ue?function(n){return`${n.field.canonicalString()} ${n.op} ${ps(n.value)}`}(t):t instanceof hn?function(n){return n.op.toString()+" {"+n.getFilters().map(oR).join(" ,")+"}"}(t):"Filter"}var Rv=class extends Ue{constructor(e,n,r){super(e,n,r),this.key=H.fromName(r.referenceValue)}matches(e){let n=H.comparator(e.key,this.key);return this.matchesComparison(n)}},Nv=class extends Ue{constructor(e,n){super(e,"in",n),this.keys=sR("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},Mv=class extends Ue{constructor(e,n){super(e,"not-in",n),this.keys=sR("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function sR(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>H.fromName(r.referenceValue))}var Pv=class extends Ue{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return uI(n)&&Rc(n.arrayValue,this.value)}},xv=class extends Ue{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&Rc(this.value.arrayValue,n)}},kv=class extends Ue{constructor(e,n){super(e,"not-in",n)}matches(e){if(Rc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Rc(this.value.arrayValue,n)}},Ov=class extends Ue{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!uI(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Rc(this.value.arrayValue,r))}};var Lv=class{constructor(e,n=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.Ie=null}};function XA(t,e=null,n=[],r=[],i=null,o=null,s=null){return new Lv(t,e,n,r,i,o,s)}function lI(t){let e=Q(t);if(e.Ie===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Av(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),Zh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>ps(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>ps(r)).join(",")),e.Ie=n}return e.Ie}function dI(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!T$(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!iR(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!JA(t.startAt,e.startAt)&&JA(t.endAt,e.endAt)}function Fv(t){return H.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}var Wr=class{constructor(e,n=null,r=[],i=[],o=null,s="F",a=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=u,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}};function b$(t,e,n,r,i,o,s,a){return new Wr(t,e,n,r,i,o,s,a)}function Xh(t){return new Wr(t)}function e0(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function aR(t){return t.collectionGroup!==null}function Tc(t){let e=Q(t);if(e.Ee===null){e.Ee=[];let n=new Set;for(let o of e.explicitOrderBy)e.Ee.push(o),n.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new Ke(Ft.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.Ee.push(new Bi(o,r))}),n.has(Ft.keyField().canonicalString())||e.Ee.push(new Bi(Ft.keyField(),r))}return e.Ee}function Nn(t){let e=Q(t);return e.de||(e.de=C$(e,Tc(t))),e.de}function C$(t,e){if(t.limitType==="F")return XA(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new Bi(i.field,o)});let n=t.endAt?new gs(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new gs(t.startAt.position,t.startAt.inclusive):null;return XA(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Vv(t,e){let n=t.filters.concat([e]);return new Wr(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function jv(t,e,n){return new Wr(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function ef(t,e){return dI(Nn(t),Nn(e))&&t.limitType===e.limitType}function cR(t){return`${lI(Nn(t))}|lt:${t.limitType}`}function is(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>oR(i)).join(", ")}]`),Zh(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>ps(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>ps(i)).join(",")),`Target(${r})`}(Nn(t))}; limitType=${t.limitType})`}function tf(t,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):H.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(t,e)&&function(r,i){for(let o of Tc(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(t,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(s,a,u){let l=ZA(s,a,u);return s.inclusive?l<=0:l<0}(r.startAt,Tc(r),i)||r.endAt&&!function(s,a,u){let l=ZA(s,a,u);return s.inclusive?l>=0:l>0}(r.endAt,Tc(r),i))}(t,e)}function S$(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function uR(t){return(e,n)=>{let r=!1;for(let i of Tc(t)){let o=A$(i,e,n);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function A$(t,e,n){let r=t.field.isKeyField()?H.comparator(e.key,n.key):function(o,s,a){let u=s.data.field(o),l=a.data.field(o);return u!==null&&l!==null?fs(u,l):z(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return z(19790,{direction:t.dir})}}var dr=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Yr(this.inner,(n,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return G0(this.inner)}size(){return this.innerSize}};var R$=new Pe(H.comparator);function hr(){return R$}var lR=new Pe(H.comparator);function Ec(...t){let e=lR;for(let n of t)e=e.insert(n.key,n);return e}function dR(t){let e=lR;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Li(){return Dc()}function hR(){return Dc()}function Dc(){return new dr(t=>t.toString(),(t,e)=>t.isEqual(e))}var N$=new Pe(H.comparator),M$=new Ke(H.comparator);function le(...t){let e=M$;for(let n of t)e=e.add(n);return e}var P$=new Ke(re);function x$(){return P$}function hI(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Sc(e)?"-0":e}}function fR(t){return{integerValue:""+t}}function k$(t,e){return u$(e)?fR(e):hI(t,e)}var ms=class{constructor(){this._=void 0}};function O$(t,e,n){return t instanceof $i?function(i,o){let s={fields:{[Q0]:{stringValue:K0},[Z0]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&sI(o)&&(o=Jh(o)),o&&(s.fields[Y0]=o),{mapValue:s}}(n,e):t instanceof Gr?gR(t,e):t instanceof Hi?mR(t,e):function(i,o){let s=pR(i,o),a=t0(s)+t0(i.Re);return Sv(s)&&Sv(i.Re)?fR(a):hI(i.serializer,a)}(t,e)}function L$(t,e,n){return t instanceof Gr?gR(t,e):t instanceof Hi?mR(t,e):n}function pR(t,e){return t instanceof ys?function(r){return Sv(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var $i=class extends ms{},Gr=class extends ms{constructor(e){super(),this.elements=e}};function gR(t,e){let n=yR(e);for(let r of t.elements)n.some(i=>xn(i,r))||n.push(r);return{arrayValue:{values:n}}}var Hi=class extends ms{constructor(e){super(),this.elements=e}};function mR(t,e){let n=yR(e);for(let r of t.elements)n=n.filter(i=>!xn(i,r));return{arrayValue:{values:n}}}var ys=class extends ms{constructor(e,n){super(),this.serializer=e,this.Re=n}};function t0(t){return Ce(t.integerValue||t.doubleValue)}function yR(t){return uI(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var Eh=class{constructor(e,n){this.field=e,this.transform=n}};function F$(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Gr&&i instanceof Gr||r instanceof Hi&&i instanceof Hi?ds(r.elements,i.elements,xn):r instanceof ys&&i instanceof ys?xn(r.Re,i.Re):r instanceof $i&&i instanceof $i}(t.transform,e.transform)}var Uv=class{constructor(e,n){this.version=e,this.transformResults=n}},Mn=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function dh(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var vs=class{};function vR(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Nc(t.key,Mn.none()):new zi(t.key,t.data,Mn.none());{let n=t.data,r=Lt.empty(),i=new Ke(Ft.comparator);for(let o of e.fields)if(!i.has(o)){let s=n.field(o);s===null&&o.length>1&&(o=o.popLast(),s=n.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new kn(t.key,r,new Wt(i.toArray()),Mn.none())}}function V$(t,e,n){t instanceof zi?function(i,o,s){let a=i.value.clone(),u=r0(i.fieldTransforms,o,s.transformResults);a.setAll(u),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(t,e,n):t instanceof kn?function(i,o,s){if(!dh(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=r0(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(_R(i)),u.setAll(a),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()}(t,e,n):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,n)}function bc(t,e,n,r){return t instanceof zi?function(o,s,a,u){if(!dh(o.precondition,s))return a;let l=o.value.clone(),h=i0(o.fieldTransforms,u,s);return l.setAll(h),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null}(t,e,n,r):t instanceof kn?function(o,s,a,u){if(!dh(o.precondition,s))return a;let l=i0(o.fieldTransforms,u,s),h=s.data;return h.setAll(_R(o)),h.setAll(l),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(o,s,a){return dh(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(t,e,n)}function j$(t,e){let n=null;for(let r of t.fieldTransforms){let i=e.data.field(r.field),o=pR(r.transform,i||null);o!=null&&(n===null&&(n=Lt.empty()),n.set(r.field,o))}return n||null}function n0(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&ds(r,i,(o,s)=>F$(o,s))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var zi=class extends vs{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},kn=class extends vs{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function _R(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=t.data.field(n);e.set(n,r)}}),e}function r0(t,e,n){let r=new Map;ge(t.length===n.length,32656,{Ve:n.length,me:t.length});for(let i=0;i<n.length;i++){let o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,L$(s,a,n[i]))}return r}function i0(t,e,n){let r=new Map;for(let i of t){let o=i.transform,s=n.data.field(i.field);r.set(i.field,O$(o,s,e))}return r}var Nc=class extends vs{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Bv=class extends vs{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var $v=class{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){let r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&V$(o,e,r[i])}}applyToLocalView(e,n){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(n=bc(r,e,n,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(n=bc(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let r=hR();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=n.has(i.key)?null:a;let u=vR(s,a);u!==null&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(J.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),le())}isEqual(e){return this.batchId===e.batchId&&ds(this.mutations,e.mutations,(n,r)=>n0(n,r))&&ds(this.baseMutations,e.baseMutations,(n,r)=>n0(n,r))}},Hv=class t{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){ge(e.mutations.length===r.length,58842,{fe:e.mutations.length,ge:r.length});let i=function(){return N$}(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new t(e,n,r,i)}};var zv=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var qv=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var Ve,de;function U$(t){switch(t){case M.OK:return z(64938);case M.CANCELLED:case M.UNKNOWN:case M.DEADLINE_EXCEEDED:case M.RESOURCE_EXHAUSTED:case M.INTERNAL:case M.UNAVAILABLE:case M.UNAUTHENTICATED:return!1;case M.INVALID_ARGUMENT:case M.NOT_FOUND:case M.ALREADY_EXISTS:case M.PERMISSION_DENIED:case M.FAILED_PRECONDITION:case M.ABORTED:case M.OUT_OF_RANGE:case M.UNIMPLEMENTED:case M.DATA_LOSS:return!0;default:return z(15467,{code:t})}}function IR(t){if(t===void 0)return cr("GRPC error has no .code"),M.UNKNOWN;switch(t){case Ve.OK:return M.OK;case Ve.CANCELLED:return M.CANCELLED;case Ve.UNKNOWN:return M.UNKNOWN;case Ve.DEADLINE_EXCEEDED:return M.DEADLINE_EXCEEDED;case Ve.RESOURCE_EXHAUSTED:return M.RESOURCE_EXHAUSTED;case Ve.INTERNAL:return M.INTERNAL;case Ve.UNAVAILABLE:return M.UNAVAILABLE;case Ve.UNAUTHENTICATED:return M.UNAUTHENTICATED;case Ve.INVALID_ARGUMENT:return M.INVALID_ARGUMENT;case Ve.NOT_FOUND:return M.NOT_FOUND;case Ve.ALREADY_EXISTS:return M.ALREADY_EXISTS;case Ve.PERMISSION_DENIED:return M.PERMISSION_DENIED;case Ve.FAILED_PRECONDITION:return M.FAILED_PRECONDITION;case Ve.ABORTED:return M.ABORTED;case Ve.OUT_OF_RANGE:return M.OUT_OF_RANGE;case Ve.UNIMPLEMENTED:return M.UNIMPLEMENTED;case Ve.DATA_LOSS:return M.DATA_LOSS;default:return z(39323,{code:t})}}(de=Ve||(Ve={}))[de.OK=0]="OK",de[de.CANCELLED=1]="CANCELLED",de[de.UNKNOWN=2]="UNKNOWN",de[de.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",de[de.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",de[de.NOT_FOUND=5]="NOT_FOUND",de[de.ALREADY_EXISTS=6]="ALREADY_EXISTS",de[de.PERMISSION_DENIED=7]="PERMISSION_DENIED",de[de.UNAUTHENTICATED=16]="UNAUTHENTICATED",de[de.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",de[de.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",de[de.ABORTED=10]="ABORTED",de[de.OUT_OF_RANGE=11]="OUT_OF_RANGE",de[de.UNIMPLEMENTED=12]="UNIMPLEMENTED",de[de.INTERNAL=13]="INTERNAL",de[de.UNAVAILABLE=14]="UNAVAILABLE",de[de.DATA_LOSS=15]="DATA_LOSS";var o0=null;var B$=new sr([4294967295,4294967295],0);function s0(t){let e=P0().encode(t),n=new sv;return n.update(e),new Uint8Array(n.digest())}function a0(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new sr([n,r],0),new sr([i,o],0)]}var Wv=class t{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Fi(`Invalid padding: ${n}`);if(r<0)throw new Fi(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Fi(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Fi(`Invalid padding when bitmap length is 0: ${n}`);this.pe=8*e.length-n,this.ye=sr.fromNumber(this.pe)}we(e,n,r){let i=e.add(n.multiply(sr.fromNumber(r)));return i.compare(B$)===1&&(i=new sr([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ye).toNumber()}Se(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;let n=s0(e),[r,i]=a0(n);for(let o=0;o<this.hashCount;o++){let s=this.we(r,i,o);if(!this.Se(s))return!1}return!0}static create(e,n,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new t(o,i,n);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.pe===0)return;let n=s0(e),[r,i]=a0(n);for(let o=0;o<this.hashCount;o++){let s=this.we(r,i,o);this.be(s)}}be(e){let n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}},Fi=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var wh=class t{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){let i=new Map;return i.set(e,Mc.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new t(J.min(),i,new Pe(re),hr(),le())}},Mc=class t{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new t(r,n,le(),le(),le())}};var cs=class{constructor(e,n,r,i){this.De=e,this.removedTargetIds=n,this.key=r,this.ve=i}},Th=class{constructor(e,n){this.targetId=e,this.Ce=n}},Dh=class{constructor(e,n,r=lt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}},bh=class{constructor(){this.Fe=0,this.Me=c0(),this.xe=lt.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=le(),n=le(),r=le();return this.Me.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:z(38017,{changeType:o})}}),new Mc(this.xe,this.Oe,e,n,r)}Qe(){this.Ne=!1,this.Me=c0()}$e(e,n){this.Ne=!0,this.Me=this.Me.insert(e,n)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,ge(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}},Gv=class{constructor(e){this.ze=e,this.je=new Map,this.He=hr(),this.Je=ah(),this.Ye=ah(),this.Ze=new Pe(re)}Xe(e){for(let n of e.De)e.ve&&e.ve.isFoundDocument()?this.et(n,e.ve):this.tt(n,e.key,e.ve);for(let n of e.removedTargetIds)this.tt(n,e.key,e.ve)}nt(e){this.forEachTarget(e,n=>{let r=this.rt(n);switch(e.state){case 0:this.it(n)&&r.ke(e.resumeToken);break;case 1:r.We(),r.Be||r.Qe(),r.ke(e.resumeToken);break;case 2:r.We(),r.Be||this.removeTarget(n);break;case 3:this.it(n)&&(r.Ge(),r.ke(e.resumeToken));break;case 4:this.it(n)&&(this.st(n),r.ke(e.resumeToken));break;default:z(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.je.forEach((r,i)=>{this.it(i)&&n(i)})}ot(e){let n=e.targetId,r=e.Ce.count,i=this._t(n);if(i){let o=i.target;if(Fv(o))if(r===0){let s=new H(o.path);this.tt(n,s,dn.newNoDocument(s,J.min()))}else ge(r===1,20013,{expectedCount:r});else{let s=this.ut(n);if(s!==r){let a=this.ct(e),u=a?this.lt(a,e,s):1;if(u!==0){this.st(n);let l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,l)}o0?.ht(function(h,p,m,y,w){var R,N,O,$,K,Ee;let dt={localCacheCount:h,existenceFilterCount:p.count,databaseId:m.database,projectId:m.projectId},me=p.unchangedNames;return me&&(dt.bloomFilter={applied:w===0,hashCount:(R=me?.hashCount)!==null&&R!==void 0?R:0,bitmapLength:($=(O=(N=me?.bits)===null||N===void 0?void 0:N.bitmap)===null||O===void 0?void 0:O.length)!==null&&$!==void 0?$:0,padding:(Ee=(K=me?.bits)===null||K===void 0?void 0:K.padding)!==null&&Ee!==void 0?Ee:0,mightContain:D=>{var v;return(v=y?.mightContain(D))!==null&&v!==void 0&&v}}),dt}(s,e.Ce,this.ze.Pt(),a,u))}}}}ct(e){let n=e.Ce.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n,s,a;try{s=lr(r).toUint8Array()}catch(u){if(u instanceof yh)return ls("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new Wv(s,i,o)}catch(u){return ls(u instanceof Fi?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.pe===0?null:a}lt(e,n,r){return n.Ce.count===r-this.Tt(e,n.targetId)?0:2}Tt(e,n){let r=this.ze.getRemoteKeysForTarget(n),i=0;return r.forEach(o=>{let s=this.ze.Pt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.tt(n,o,null),i++)}),i}It(e){let n=new Map;this.je.forEach((o,s)=>{let a=this._t(s);if(a){if(o.current&&Fv(a.target)){let u=new H(a.target.path);this.Et(u).has(s)||this.dt(s,u)||this.tt(s,u,dn.newNoDocument(u,e))}o.Le&&(n.set(s,o.qe()),o.Qe())}});let r=le();this.Ye.forEach((o,s)=>{let a=!0;s.forEachWhile(u=>{let l=this._t(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.He.forEach((o,s)=>s.setReadTime(e));let i=new wh(e,n,this.Ze,this.He,r);return this.He=hr(),this.Je=ah(),this.Ye=ah(),this.Ze=new Pe(re),i}et(e,n){if(!this.it(e))return;let r=this.dt(e,n.key)?2:0;this.rt(e).$e(n.key,r),this.He=this.He.insert(n.key,n),this.Je=this.Je.insert(n.key,this.Et(n.key).add(e)),this.Ye=this.Ye.insert(n.key,this.At(n.key).add(e))}tt(e,n,r){if(!this.it(e))return;let i=this.rt(e);this.dt(e,n)?i.$e(n,1):i.Ue(n),this.Ye=this.Ye.insert(n,this.At(n).delete(e)),this.Ye=this.Ye.insert(n,this.At(n).add(e)),r&&(this.He=this.He.insert(n,r))}removeTarget(e){this.je.delete(e)}ut(e){let n=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let n=this.je.get(e);return n||(n=new bh,this.je.set(e,n)),n}At(e){let n=this.Ye.get(e);return n||(n=new Ke(re),this.Ye=this.Ye.insert(e,n)),n}Et(e){let n=this.Je.get(e);return n||(n=new Ke(re),this.Je=this.Je.insert(e,n)),n}it(e){let n=this._t(e)!==null;return n||V("WatchChangeAggregator","Detected inactive target",e),n}_t(e){let n=this.je.get(e);return n&&n.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new bh),this.ze.getRemoteKeysForTarget(e).forEach(n=>{this.tt(e,n,null)})}dt(e,n){return this.ze.getRemoteKeysForTarget(e).has(n)}};function ah(){return new Pe(H.comparator)}function c0(){return new Pe(H.comparator)}var $$={asc:"ASCENDING",desc:"DESCENDING"},H$={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},z$={and:"AND",or:"OR"},Kv=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function Qv(t,e){return t.useProto3Json||Zh(e)?e:{value:e}}function Ch(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function ER(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function q$(t,e){return Ch(t,e.toTimestamp())}function Pn(t){return ge(!!t,49232),J.fromTimestamp(function(n){let r=ur(n);return new Xe(r.seconds,r.nanos)}(t))}function fI(t,e){return Yv(t,e).canonicalString()}function Yv(t,e){let n=function(i){return new Ae(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function wR(t){let e=Ae.fromString(t);return ge(SR(e),10190,{key:e.toString()}),e}function Zv(t,e){return fI(t.databaseId,e.path)}function hv(t,e){let n=wR(e);if(n.get(1)!==t.databaseId.projectId)throw new L(M.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new L(M.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new H(DR(n))}function TR(t,e){return fI(t.databaseId,e)}function W$(t){let e=wR(t);return e.length===4?Ae.emptyPath():DR(e)}function Jv(t){return new Ae(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function DR(t){return ge(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function u0(t,e,n){return{name:Zv(t,e),fields:n.value.mapValue.fields}}function G$(t,e){let n;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:z(39313,{state:l})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(l,h){return l.useProto3Json?(ge(h===void 0||typeof h=="string",58123),lt.fromBase64String(h||"")):(ge(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),lt.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(l){let h=l.code===void 0?M.UNKNOWN:IR(l.code);return new L(h,l.message||"")}(s);n=new Dh(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=hv(t,r.document.name),o=Pn(r.document.updateTime),s=r.document.createTime?Pn(r.document.createTime):J.min(),a=new Lt({mapValue:{fields:r.document.fields}}),u=dn.newFoundDocument(i,o,s,a),l=r.targetIds||[],h=r.removedTargetIds||[];n=new cs(l,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=hv(t,r.document),o=r.readTime?Pn(r.readTime):J.min(),s=dn.newNoDocument(i,o),a=r.removedTargetIds||[];n=new cs([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=hv(t,r.document),o=r.removedTargetIds||[];n=new cs([],o,i,null)}else{if(!("filter"in e))return z(11601,{Vt:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new qv(i,o),a=r.targetId;n=new Th(a,s)}}return n}function K$(t,e){let n;if(e instanceof zi)n={update:u0(t,e.key,e.value)};else if(e instanceof Nc)n={delete:Zv(t,e.key)};else if(e instanceof kn)n={update:u0(t,e.key,e.data),updateMask:rH(e.fieldMask)};else{if(!(e instanceof Bv))return z(16599,{ft:e.type});n={verify:Zv(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(o,s){let a=s.transform;if(a instanceof $i)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Gr)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Hi)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof ys)return{fieldPath:s.field.canonicalString(),increment:a.Re};throw z(20930,{transform:s.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:q$(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:z(27497)}(t,e.precondition)),n}function Q$(t,e){return t&&t.length>0?(ge(e!==void 0,14353),t.map(n=>function(i,o){let s=i.updateTime?Pn(i.updateTime):Pn(o);return s.isEqual(J.min())&&(s=Pn(o)),new Uv(s,i.transformResults||[])}(n,e))):[]}function Y$(t,e){return{documents:[TR(t,e.path)]}}function Z$(t,e){let n={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=TR(t,i);let o=function(l){if(l.length!==0)return CR(hn.create(l,"and"))}(e.filters);o&&(n.structuredQuery.where=o);let s=function(l){if(l.length!==0)return l.map(h=>function(m){return{field:os(m.field),direction:eH(m.dir)}}(h))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);let a=Qv(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{gt:n,parent:i}}function J$(t){let e=W$(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){ge(r===1,65062);let h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];n.where&&(o=function(p){let m=bR(p);return m instanceof hn&&rR(m)?m.getFilters():[m]}(n.where));let s=[];n.orderBy&&(s=function(p){return p.map(m=>function(w){return new Bi(ss(w.field),function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(w.direction))}(m))}(n.orderBy));let a=null;n.limit&&(a=function(p){let m;return m=typeof p=="object"?p.value:p,Zh(m)?null:m}(n.limit));let u=null;n.startAt&&(u=function(p){let m=!!p.before,y=p.values||[];return new gs(y,m)}(n.startAt));let l=null;return n.endAt&&(l=function(p){let m=!p.before,y=p.values||[];return new gs(y,m)}(n.endAt)),b$(e,i,s,o,a,"F",u,l)}function X$(t,e){let n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return z(28987,{purpose:i})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function bR(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":let r=ss(n.unaryFilter.field);return Ue.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=ss(n.unaryFilter.field);return Ue.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=ss(n.unaryFilter.field);return Ue.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=ss(n.unaryFilter.field);return Ue.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return z(61313);default:return z(60726)}}(t):t.fieldFilter!==void 0?function(n){return Ue.create(ss(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return z(58110);default:return z(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return hn.create(n.compositeFilter.filters.map(r=>bR(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return z(1026)}}(n.compositeFilter.op))}(t):z(30097,{filter:t})}function eH(t){return $$[t]}function tH(t){return H$[t]}function nH(t){return z$[t]}function os(t){return{fieldPath:t.canonicalString()}}function ss(t){return Ft.fromServerFormat(t.fieldPath)}function CR(t){return t instanceof Ue?function(n){if(n.op==="=="){if(YA(n.value))return{unaryFilter:{field:os(n.field),op:"IS_NAN"}};if(QA(n.value))return{unaryFilter:{field:os(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(YA(n.value))return{unaryFilter:{field:os(n.field),op:"IS_NOT_NAN"}};if(QA(n.value))return{unaryFilter:{field:os(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:os(n.field),op:tH(n.op),value:n.value}}}(t):t instanceof hn?function(n){let r=n.getFilters().map(i=>CR(i));return r.length===1?r[0]:{compositeFilter:{op:nH(n.op),filters:r}}}(t):z(54877,{filter:t})}function rH(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function SR(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var Pc=class t{constructor(e,n,r,i,o=J.min(),s=J.min(),a=lt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var Xv=class{constructor(e){this.wt=e}};function iH(t){let e=J$({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?jv(e,e.limit,"L"):e}var Sh=class{constructor(){}vt(e,n){this.Ct(e,n),n.Ft()}Ct(e,n){if("nullValue"in e)this.Mt(n,5);else if("booleanValue"in e)this.Mt(n,10),n.xt(e.booleanValue?1:0);else if("integerValue"in e)this.Mt(n,15),n.xt(Ce(e.integerValue));else if("doubleValue"in e){let r=Ce(e.doubleValue);isNaN(r)?this.Mt(n,13):(this.Mt(n,15),Sc(r)?n.xt(0):n.xt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Mt(n,20),typeof r=="string"&&(r=ur(r)),n.Ot(`${r.seconds||""}`),n.xt(r.nanos||0)}else if("stringValue"in e)this.Nt(e.stringValue,n),this.Bt(n);else if("bytesValue"in e)this.Mt(n,30),n.Lt(lr(e.bytesValue)),this.Bt(n);else if("referenceValue"in e)this.kt(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.Mt(n,45),n.xt(r.latitude||0),n.xt(r.longitude||0)}else"mapValue"in e?eR(e)?this.Mt(n,Number.MAX_SAFE_INTEGER):X0(e)?this.qt(e.mapValue,n):(this.Qt(e.mapValue,n),this.Bt(n)):"arrayValue"in e?(this.$t(e.arrayValue,n),this.Bt(n)):z(19022,{Ut:e})}Nt(e,n){this.Mt(n,25),this.Kt(e,n)}Kt(e,n){n.Ot(e)}Qt(e,n){let r=e.fields||{};this.Mt(n,55);for(let i of Object.keys(r))this.Nt(i,n),this.Ct(r[i],n)}qt(e,n){var r,i;let o=e.fields||{};this.Mt(n,53);let s=hs,a=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.Mt(n,15),n.xt(Ce(a)),this.Nt(s,n),this.Ct(o[s],n)}$t(e,n){let r=e.values||[];this.Mt(n,50);for(let i of r)this.Ct(i,n)}kt(e,n){this.Mt(n,37),H.fromName(e).path.forEach(r=>{this.Mt(n,60),this.Kt(r,n)})}Mt(e,n){e.xt(n)}Bt(e){e.xt(2)}};Sh.Wt=new Sh;var e_=class{constructor(){this.Cn=new t_}addToCollectionParentIndex(e,n){return this.Cn.add(n),P.resolve()}getCollectionParents(e,n){return P.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return P.resolve()}deleteFieldIndex(e,n){return P.resolve()}deleteAllFieldIndexes(e){return P.resolve()}createTargetIndexes(e,n){return P.resolve()}getDocumentsMatchingTarget(e,n){return P.resolve(null)}getIndexType(e,n){return P.resolve(0)}getFieldIndexes(e,n){return P.resolve([])}getNextCollectionGroupToUpdate(e){return P.resolve(null)}getMinOffset(e,n){return P.resolve(Ui.min())}getMinOffsetFromCollectionGroup(e,n){return P.resolve(Ui.min())}updateCollectionGroup(e,n,r){return P.resolve()}updateIndexEntries(e,n){return P.resolve()}},t_=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Ke(Ae.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Ke(Ae.comparator)).toArray()}};var uY=new Uint8Array(0);var l0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},AR=41943040,qt=class t{static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}};qt.DEFAULT_COLLECTION_PERCENTILE=10,qt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,qt.DEFAULT=new qt(AR,qt.DEFAULT_COLLECTION_PERCENTILE,qt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),qt.DISABLED=new qt(-1,0,0);var xc=class t{constructor(e){this.ur=e}next(){return this.ur+=2,this.ur}static cr(){return new t(0)}static lr(){return new t(-1)}};var d0="LruGarbageCollector",oH=1048576;function h0([t,e],[n,r]){let i=re(t,n);return i===0?re(e,r):i}var n_=class{constructor(e){this.Er=e,this.buffer=new Ke(h0),this.dr=0}Ar(){return++this.dr}Rr(e){let n=[e,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(n);else{let r=this.buffer.last();h0(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}},r_=class{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(e){V(d0,`Garbage collection scheduled in ${e}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>E(this,null,function*(){this.Vr=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(n){Ds(n)?V(d0,"Ignoring IndexedDB error during garbage collection: ",n):yield Ts(n)}yield this.mr(3e5)}))}},i_=class{constructor(e,n){this.gr=e,this.params=n}calculateTargetCount(e,n){return this.gr.pr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return P.resolve(iI.le);let r=new n_(n);return this.gr.forEachTarget(e,i=>r.Rr(i.sequenceNumber)).next(()=>this.gr.yr(e,i=>r.Rr(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.gr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.gr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(V("LruGarbageCollector","Garbage collection skipped; disabled"),P.resolve(l0)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(V("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),l0):this.wr(e,n))}getCacheSize(e){return this.gr.getCacheSize(e)}wr(e,n){let r,i,o,s,a,u,l,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(V("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,s=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,a=Date.now(),this.removeTargets(e,r,n))).next(p=>(o=p,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(l=Date.now(),rs()<=ce.DEBUG&&V("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-h}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(u-a)+`ms
	Removed ${p} documents in `+(l-u)+`ms
Total Duration: ${l-h}ms`),P.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:p})))}};function sH(t,e){return new i_(t,e)}var o_=class{constructor(){this.changes=new dr(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,dn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?P.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var s_=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var a_=class{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&bc(r.mutation,i,Wt.empty(),Xe.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,le()).next(()=>r))}getLocalViewOfDocuments(e,n,r=le()){let i=Li();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(o=>{let s=Ec();return o.forEach((a,u)=>{s=s.insert(a,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,n){let r=Li();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,le()))}populateOverlays(e,n,r){let i=[];return r.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{n.set(s,a)})})}computeViews(e,n,r,i){let o=hr(),s=Dc(),a=function(){return Dc()}();return n.forEach((u,l)=>{let h=r.get(l.key);i.has(l.key)&&(h===void 0||h.mutation instanceof kn)?o=o.insert(l.key,l):h!==void 0?(s.set(l.key,h.mutation.getFieldMask()),bc(h.mutation,l,h.mutation.getFieldMask(),Xe.now())):s.set(l.key,Wt.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((l,h)=>s.set(l,h)),n.forEach((l,h)=>{var p;return a.set(l,new s_(h,(p=s.get(l))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,n){let r=Dc(),i=new Pe((s,a)=>s-a),o=le();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(s=>{for(let a of s)a.keys().forEach(u=>{let l=n.get(u);if(l===null)return;let h=r.get(u)||Wt.empty();h=a.applyToLocalView(l,h),r.set(u,h);let p=(i.get(a.batchId)||le()).add(u);i=i.insert(a.batchId,p)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let u=a.getNext(),l=u.key,h=u.value,p=hR();h.forEach(m=>{if(!o.has(m)){let y=vR(n.get(m),r.get(m));y!==null&&p.set(m,y),o=o.add(m)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,p))}return P.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(s){return H.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):aR(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):P.resolve(Li()),a=Cc,u=o;return s.next(l=>P.forEach(l,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),o.get(h)?P.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{u=u.insert(h,m)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,u,l,le())).next(h=>({batchId:a,changes:dR(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new H(n)).next(r=>{let i=Ec();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){let o=n.collectionGroup,s=Ec();return this.indexManager.getCollectionParents(e,o).next(a=>P.forEach(a,u=>{let l=function(p,m){return new Wr(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((p,m)=>{s=s.insert(p,m)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i))).next(s=>{o.forEach((u,l)=>{let h=l.getKey();s.get(h)===null&&(s=s.insert(h,dn.newInvalidDocument(h)))});let a=Ec();return s.forEach((u,l)=>{let h=o.get(u);h!==void 0&&bc(h.mutation,l,Wt.empty(),Xe.now()),tf(n,l)&&(a=a.insert(u,l))}),a})}};var c_=class{constructor(e){this.serializer=e,this.kr=new Map,this.qr=new Map}getBundleMetadata(e,n){return P.resolve(this.kr.get(n))}saveBundleMetadata(e,n){return this.kr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Pn(i.createTime)}}(n)),P.resolve()}getNamedQuery(e,n){return P.resolve(this.qr.get(n))}saveNamedQuery(e,n){return this.qr.set(n.name,function(i){return{name:i.name,query:iH(i.bundledQuery),readTime:Pn(i.readTime)}}(n)),P.resolve()}};var u_=class{constructor(){this.overlays=new Pe(H.comparator),this.Qr=new Map}getOverlay(e,n){return P.resolve(this.overlays.get(n))}getOverlays(e,n){let r=Li();return P.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,o)=>{this.bt(e,n,o)}),P.resolve()}removeOverlaysForBatchId(e,n,r){let i=this.Qr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Qr.delete(r)),P.resolve()}getOverlaysForCollection(e,n,r){let i=Li(),o=n.length+1,s=new H(n.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let u=a.getNext().value,l=u.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return P.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new Pe((l,h)=>l-h),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let h=o.get(l.largestBatchId);h===null&&(h=Li(),o=o.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}let a=Li(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,h)=>a.set(l,h)),!(a.size()>=i)););return P.resolve(a)}bt(e,n,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.Qr.get(i.largestBatchId).delete(r.key);this.Qr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new zv(n,r));let o=this.Qr.get(n);o===void 0&&(o=le(),this.Qr.set(n,o)),this.Qr.set(n,o.add(r.key))}};var l_=class{constructor(){this.sessionToken=lt.EMPTY_BYTE_STRING}getSessionToken(e){return P.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,P.resolve()}};var kc=class{constructor(){this.$r=new Ke(je.Ur),this.Kr=new Ke(je.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(e,n){let r=new je(e,n);this.$r=this.$r.add(r),this.Kr=this.Kr.add(r)}Gr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.zr(new je(e,n))}jr(e,n){e.forEach(r=>this.removeReference(r,n))}Hr(e){let n=new H(new Ae([])),r=new je(n,e),i=new je(n,e+1),o=[];return this.Kr.forEachInRange([r,i],s=>{this.zr(s),o.push(s.key)}),o}Jr(){this.$r.forEach(e=>this.zr(e))}zr(e){this.$r=this.$r.delete(e),this.Kr=this.Kr.delete(e)}Yr(e){let n=new H(new Ae([])),r=new je(n,e),i=new je(n,e+1),o=le();return this.Kr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let n=new je(e,0),r=this.$r.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}},je=class{constructor(e,n){this.key=e,this.Zr=n}static Ur(e,n){return H.comparator(e.key,n.key)||re(e.Zr,n.Zr)}static Wr(e,n){return re(e.Zr,n.Zr)||H.comparator(e.key,n.key)}};var d_=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.nr=1,this.Xr=new Ke(je.Ur)}checkEmpty(e){return P.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){let o=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new $v(o,n,r,i);this.mutationQueue.push(s);for(let a of i)this.Xr=this.Xr.add(new je(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return P.resolve(s)}lookupMutationBatch(e,n){return P.resolve(this.ei(n))}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=this.ti(r),o=i<0?0:i;return P.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return P.resolve(this.mutationQueue.length===0?oI:this.nr-1)}getAllMutationBatches(e){return P.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let r=new je(n,0),i=new je(n,Number.POSITIVE_INFINITY),o=[];return this.Xr.forEachInRange([r,i],s=>{let a=this.ei(s.Zr);o.push(a)}),P.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ke(re);return n.forEach(i=>{let o=new je(i,0),s=new je(i,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([o,s],a=>{r=r.add(a.Zr)})}),P.resolve(this.ni(r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,o=r;H.isDocumentKey(o)||(o=o.child(""));let s=new je(new H(o),0),a=new Ke(re);return this.Xr.forEachWhile(u=>{let l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.Zr)),!0)},s),P.resolve(this.ni(a))}ni(e){let n=[];return e.forEach(r=>{let i=this.ei(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){ge(this.ri(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Xr;return P.forEach(n.mutations,i=>{let o=new je(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Xr=r})}sr(e){}containsKey(e,n){let r=new je(n,0),i=this.Xr.firstAfterOrEqual(r);return P.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,P.resolve()}ri(e,n){return this.ti(e)}ti(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}ei(e){let n=this.ti(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var h_=class{constructor(e){this.ii=e,this.docs=function(){return new Pe(H.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let r=n.key,i=this.docs.get(r),o=i?i.size:0,s=this.ii(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let r=this.docs.get(n);return P.resolve(r?r.document.mutableCopy():dn.newInvalidDocument(n))}getEntries(e,n){let r=hr();return n.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():dn.newInvalidDocument(i))}),P.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=hr(),s=n.path,a=new H(s.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){let{key:l,value:{document:h}}=u.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||s$(o$(h),r)<=0||(i.has(h.key)||tf(n,h))&&(o=o.insert(h.key,h.mutableCopy()))}return P.resolve(o)}getAllFromCollectionGroup(e,n,r,i){z(9500)}si(e,n){return P.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new f_(this)}getSize(e){return P.resolve(this.size)}},f_=class extends o_{constructor(e){super(),this.Br=e}applyChanges(e){let n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Br.addEntry(e,i)):this.Br.removeEntry(r)}),P.waitFor(n)}getFromCache(e,n){return this.Br.getEntry(e,n)}getAllFromCache(e,n){return this.Br.getEntries(e,n)}};var p_=class{constructor(e){this.persistence=e,this.oi=new dr(n=>lI(n),dI),this.lastRemoteSnapshotVersion=J.min(),this.highestTargetId=0,this._i=0,this.ai=new kc,this.targetCount=0,this.ui=xc.cr()}forEachTarget(e,n){return this.oi.forEach((r,i)=>n(i)),P.resolve()}getLastRemoteSnapshotVersion(e){return P.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return P.resolve(this._i)}allocateTargetId(e){return this.highestTargetId=this.ui.next(),P.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this._i&&(this._i=n),P.resolve()}Tr(e){this.oi.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this.ui=new xc(n),this.highestTargetId=n),e.sequenceNumber>this._i&&(this._i=e.sequenceNumber)}addTargetData(e,n){return this.Tr(n),this.targetCount+=1,P.resolve()}updateTargetData(e,n){return this.Tr(n),P.resolve()}removeTargetData(e,n){return this.oi.delete(n.target),this.ai.Hr(n.targetId),this.targetCount-=1,P.resolve()}removeTargets(e,n,r){let i=0,o=[];return this.oi.forEach((s,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.oi.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),P.waitFor(o).next(()=>i)}getTargetCount(e){return P.resolve(this.targetCount)}getTargetData(e,n){let r=this.oi.get(n)||null;return P.resolve(r)}addMatchingKeys(e,n,r){return this.ai.Gr(n,r),P.resolve()}removeMatchingKeys(e,n,r){this.ai.jr(n,r);let i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),P.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.ai.Hr(n),P.resolve()}getMatchingKeysForTargetId(e,n){let r=this.ai.Yr(n);return P.resolve(r)}containsKey(e,n){return P.resolve(this.ai.containsKey(n))}};var Ah=class{constructor(e,n){this.ci={},this.overlays={},this.li=new iI(0),this.hi=!1,this.hi=!0,this.Pi=new l_,this.referenceDelegate=e(this),this.Ti=new p_(this),this.indexManager=new e_,this.remoteDocumentCache=function(i){return new h_(i)}(r=>this.referenceDelegate.Ii(r)),this.serializer=new Xv(n),this.Ei=new c_(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new u_,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ci[e.toKey()];return r||(r=new d_(n,this.referenceDelegate),this.ci[e.toKey()]=r),r}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(e,n,r){V("MemoryPersistence","Starting transaction:",e);let i=new g_(this.li.next());return this.referenceDelegate.di(),r(i).next(o=>this.referenceDelegate.Ai(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ri(e,n){return P.or(Object.values(this.ci).map(r=>()=>r.containsKey(e,n)))}},g_=class extends Dv{constructor(e){super(),this.currentSequenceNumber=e}},m_=class t{constructor(e){this.persistence=e,this.Vi=new kc,this.mi=null}static fi(e){return new t(e)}get gi(){if(this.mi)return this.mi;throw z(60996)}addReference(e,n,r){return this.Vi.addReference(r,n),this.gi.delete(r.toString()),P.resolve()}removeReference(e,n,r){return this.Vi.removeReference(r,n),this.gi.add(r.toString()),P.resolve()}markPotentiallyOrphaned(e,n){return this.gi.add(n.toString()),P.resolve()}removeTarget(e,n){this.Vi.Hr(n.targetId).forEach(i=>this.gi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(o=>this.gi.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}di(){this.mi=new Set}Ai(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return P.forEach(this.gi,r=>{let i=H.fromPath(r);return this.pi(e,i).next(o=>{o||n.removeEntry(i,J.min())})}).next(()=>(this.mi=null,n.apply(e)))}updateLimboDocument(e,n){return this.pi(e,n).next(r=>{r?this.gi.delete(n.toString()):this.gi.add(n.toString())})}Ii(e){return 0}pi(e,n){return P.or([()=>P.resolve(this.Vi.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ri(e,n)])}},Rh=class t{constructor(e,n){this.persistence=e,this.yi=new dr(r=>l$(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=sH(this,n)}static fi(e,n){return new t(e,n)}di(){}Ai(e){return P.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}pr(e){let n=this.Sr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}Sr(e){let n=0;return this.yr(e,r=>{n++}).next(()=>n)}yr(e,n){return P.forEach(this.yi,(r,i)=>this.Dr(e,r,i).next(o=>o?P.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.si(e,s=>this.Dr(e,s,n).next(a=>{a||(r++,o.removeEntry(s,J.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.yi.set(n,e.currentSequenceNumber),P.resolve()}removeTarget(e,n){let r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.yi.set(r,e.currentSequenceNumber),P.resolve()}removeReference(e,n,r){return this.yi.set(r,e.currentSequenceNumber),P.resolve()}updateLimboDocument(e,n){return this.yi.set(n,e.currentSequenceNumber),P.resolve()}Ii(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=uh(e.data.value)),n}Dr(e,n,r){return P.or([()=>this.persistence.Ri(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{let i=this.yi.get(n);return P.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var y_=class t{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.ds=r,this.As=i}static Rs(e,n){let r=le(),i=le();for(let o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new t(e,n.fromCache,r,i)}};var v_=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var __=class{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return mS()?8:c$(We())>0?6:4}()}initialize(e,n){this.ys=e,this.indexManager=n,this.Vs=!0}getDocumentsMatchingQuery(e,n,r,i){let o={result:null};return this.ws(e,n).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.Ss(e,n,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new v_;return this.bs(e,n,s).next(a=>{if(o.result=a,this.fs)return this.Ds(e,n,s,a.size)})}).next(()=>o.result)}Ds(e,n,r,i){return r.documentReadCount<this.gs?(rs()<=ce.DEBUG&&V("QueryEngine","SDK will not create cache indexes for query:",is(n),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),P.resolve()):(rs()<=ce.DEBUG&&V("QueryEngine","Query:",is(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.ps*i?(rs()<=ce.DEBUG&&V("QueryEngine","The SDK decides to create cache indexes for query:",is(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Nn(n))):P.resolve())}ws(e,n){if(e0(n))return P.resolve(null);let r=Nn(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=jv(n,null,"F"),r=Nn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=le(...o);return this.ys.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{let l=this.vs(n,a);return this.Cs(n,l,s,u.readTime)?this.ws(e,jv(n,null,"F")):this.Fs(e,l,n,u)}))})))}Ss(e,n,r,i){return e0(n)||i.isEqual(J.min())?P.resolve(null):this.ys.getDocuments(e,r).next(o=>{let s=this.vs(n,o);return this.Cs(n,s,r,i)?P.resolve(null):(rs()<=ce.DEBUG&&V("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),is(n)),this.Fs(e,s,n,i$(i,Cc)).next(a=>a))})}vs(e,n){let r=new Ke(uR(e));return n.forEach((i,o)=>{tf(e,o)&&(r=r.add(o))}),r}Cs(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;let o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}bs(e,n,r){return rs()<=ce.DEBUG&&V("QueryEngine","Using full collection scan to execute query:",is(n)),this.ys.getDocumentsMatchingQuery(e,n,Ui.min(),r)}Fs(e,n,r,i){return this.ys.getDocumentsMatchingQuery(e,r,i).next(o=>(n.forEach(s=>{o=o.insert(s.key,s)}),o))}};var pI="LocalStore",aH=3e8,I_=class{constructor(e,n,r,i){this.persistence=e,this.Ms=n,this.serializer=i,this.xs=new Pe(re),this.Os=new dr(o=>lI(o),dI),this.Ns=new Map,this.Bs=e.getRemoteDocumentCache(),this.Ti=e.getTargetCache(),this.Ei=e.getBundleCache(),this.Ls(r)}Ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new a_(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.xs))}};function cH(t,e,n,r){return new I_(t,e,n,r)}function RR(t,e){return E(this,null,function*(){let n=Q(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,n.Ls(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],u=le();for(let l of i){s.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}for(let l of o){a.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}return n.localDocuments.getDocuments(r,u).next(l=>({ks:l,removedBatchIds:s,addedBatchIds:a}))})})})}function uH(t,e){let n=Q(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=n.Bs.newChangeBuffer({trackRemovals:!0});return function(a,u,l,h){let p=l.batch,m=p.keys(),y=P.resolve();return m.forEach(w=>{y=y.next(()=>h.getEntry(u,w)).next(R=>{let N=l.docVersions.get(w);ge(N!==null,48541),R.version.compareTo(N)<0&&(p.applyToRemoteDocument(R,l),R.isValidDocument()&&(R.setReadTime(l.commitVersion),h.addEntry(R)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(u,p))}(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=le();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function NR(t){let e=Q(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ti.getLastRemoteSnapshotVersion(n))}function lH(t,e){let n=Q(t),r=e.snapshotVersion,i=n.xs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=n.Bs.newChangeBuffer({trackRemovals:!0});i=n.xs;let a=[];e.targetChanges.forEach((h,p)=>{let m=i.get(p);if(!m)return;a.push(n.Ti.removeMatchingKeys(o,h.removedDocuments,p).next(()=>n.Ti.addMatchingKeys(o,h.addedDocuments,p)));let y=m.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?y=y.withResumeToken(lt.EMPTY_BYTE_STRING,J.min()).withLastLimboFreeSnapshotVersion(J.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,r)),i=i.insert(p,y),function(R,N,O){return R.resumeToken.approximateByteSize()===0||N.snapshotVersion.toMicroseconds()-R.snapshotVersion.toMicroseconds()>=aH?!0:O.addedDocuments.size+O.modifiedDocuments.size+O.removedDocuments.size>0}(m,y,h)&&a.push(n.Ti.updateTargetData(o,y))});let u=hr(),l=le();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(o,h))}),a.push(dH(o,s,e.documentUpdates).next(h=>{u=h.qs,l=h.Qs})),!r.isEqual(J.min())){let h=n.Ti.getLastRemoteSnapshotVersion(o).next(p=>n.Ti.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(h)}return P.waitFor(a).next(()=>s.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,u,l)).next(()=>u)}).then(o=>(n.xs=i,o))}function dH(t,e,n){let r=le(),i=le();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let s=hr();return n.forEach((a,u)=>{let l=o.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(J.min())?(e.removeEntry(a,u.readTime),s=s.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),s=s.insert(a,u)):V(pI,"Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{qs:s,Qs:i}})}function hH(t,e){let n=Q(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=oI),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function fH(t,e){let n=Q(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ti.getTargetData(r,e).next(o=>o?(i=o,P.resolve(i)):n.Ti.allocateTargetId(r).next(s=>(i=new Pc(e,s,"TargetPurposeListen",r.currentSequenceNumber),n.Ti.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=n.xs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.xs=n.xs.insert(r.targetId,r),n.Os.set(e,r.targetId)),r})}function E_(t,e,n){return E(this,null,function*(){let r=Q(t),i=r.xs.get(e),o=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!Ds(s))throw s;V(pI,`Failed to update sequence numbers for target ${e}: ${s}`)}r.xs=r.xs.remove(e),r.Os.delete(i.target)})}function f0(t,e,n){let r=Q(t),i=J.min(),o=le();return r.persistence.runTransaction("Execute query","readwrite",s=>function(u,l,h){let p=Q(u),m=p.Os.get(h);return m!==void 0?P.resolve(p.xs.get(m)):p.Ti.getTargetData(l,h)}(r,s,Nn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ti.getMatchingKeysForTargetId(s,a.targetId).next(u=>{o=u})}).next(()=>r.Ms.getDocumentsMatchingQuery(s,e,n?i:J.min(),n?o:le())).next(a=>(pH(r,S$(e),a),{documents:a,$s:o})))}function pH(t,e,n){let r=t.Ns.get(e)||J.min();n.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.Ns.set(e,r)}var Nh=class{constructor(){this.activeTargetIds=x$()}js(e){this.activeTargetIds=this.activeTargetIds.add(e)}Hs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}zs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var w_=class{constructor(){this.xo=new Nh,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.xo.js(e),this.Oo[e]||"not-current"}updateQueryState(e,n,r){this.Oo[e]=n}removeLocalQueryTarget(e){this.xo.Hs(e)}isLocalQueryTarget(e){return this.xo.activeTargetIds.has(e)}clearQueryState(e){delete this.Oo[e]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(e){return this.xo.activeTargetIds.has(e)}start(){return this.xo=new Nh,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var T_=class{No(e){}shutdown(){}};var p0="ConnectivityMonitor",Mh=class{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(e){this.Qo.push(e)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){V(p0,"Network connectivity changed: AVAILABLE");for(let e of this.Qo)e(0)}qo(){V(p0,"Network connectivity changed: UNAVAILABLE");for(let e of this.Qo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var ch=null;function D_(){return ch===null?ch=function(){return 268435456+Math.round(2147483648*Math.random())}():ch++,"0x"+ch.toString(16)}var fv="RestConnection",gH={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},b_=class{get Uo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Ko=n+"://"+e.host,this.Wo=`projects/${r}/databases/${i}`,this.Go=this.databaseId.database===vh?`project_id=${r}`:`project_id=${r}&database_id=${i}`}zo(e,n,r,i,o){let s=D_(),a=this.jo(e,n.toUriEncodedString());V(fv,`Sending RPC '${e}' ${s}:`,a,r);let u={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(u,i,o);let{host:l}=new URL(a),h=Ai(l);return this.Jo(e,a,u,r,h).then(p=>(V(fv,`Received RPC '${e}' ${s}: `,p),p),p=>{throw ls(fv,`RPC '${e}' ${s} failed with error: `,p,"url: ",a,"request:",r),p})}Yo(e,n,r,i,o,s){return this.zo(e,n,r,i,o)}Ho(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ws}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}jo(e,n){let r=gH[e];return`${this.Ko}/v1/${n}:${r}`}terminate(){}};var C_=class{constructor(e){this.Zo=e.Zo,this.Xo=e.Xo}e_(e){this.t_=e}n_(e){this.r_=e}i_(e){this.s_=e}onMessage(e){this.o_=e}close(){this.Xo()}send(e){this.Zo(e)}__(){this.t_()}a_(){this.r_()}u_(e){this.s_(e)}c_(e){this.o_(e)}};var ct="WebChannelConnection",S_=class extends b_{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,i,o){let s=D_();return new Promise((a,u)=>{let l=new av;l.setWithCredentials(!0),l.listenOnce(cv.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Ic.NO_ERROR:let p=l.getResponseJson();V(ct,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(p)),a(p);break;case Ic.TIMEOUT:V(ct,`RPC '${e}' ${s} timed out`),u(new L(M.DEADLINE_EXCEEDED,"Request time out"));break;case Ic.HTTP_ERROR:let m=l.getStatus();if(V(ct,`RPC '${e}' ${s} failed with status:`,m,"response text:",l.getResponseText()),m>0){let y=l.getResponseJson();Array.isArray(y)&&(y=y[0]);let w=y?.error;if(w&&w.status&&w.message){let R=function(O){let $=O.toLowerCase().replace(/_/g,"-");return Object.values(M).indexOf($)>=0?$:M.UNKNOWN}(w.status);u(new L(R,w.message))}else u(new L(M.UNKNOWN,"Server responded with status "+l.getStatus()))}else u(new L(M.UNAVAILABLE,"Connection failed."));break;default:z(9055,{l_:e,streamId:s,h_:l.getLastErrorCode(),P_:l.getLastError()})}}finally{V(ct,`RPC '${e}' ${s} completed.`)}});let h=JSON.stringify(i);V(ct,`RPC '${e}' ${s} sending request:`,i),l.send(n,"POST",h,r,15)})}T_(e,n,r){let i=D_(),o=[this.Ko,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=dv(),a=lv(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Ho(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;let h=o.join("");V(ct,`Creating RPC '${e}' stream ${i}: ${h}`,u);let p=s.createWebChannel(h,u),m=!1,y=!1,w=new C_({Zo:N=>{y?V(ct,`Not sending because RPC '${e}' stream ${i} is closed:`,N):(m||(V(ct,`Opening RPC '${e}' stream ${i} transport.`),p.open(),m=!0),V(ct,`RPC '${e}' stream ${i} sending:`,N),p.send(N))},Xo:()=>p.close()}),R=(N,O,$)=>{N.listen(O,K=>{try{$(K)}catch(Ee){setTimeout(()=>{throw Ee},0)}})};return R(p,ns.EventType.OPEN,()=>{y||(V(ct,`RPC '${e}' stream ${i} transport opened.`),w.__())}),R(p,ns.EventType.CLOSE,()=>{y||(y=!0,V(ct,`RPC '${e}' stream ${i} transport closed`),w.u_())}),R(p,ns.EventType.ERROR,N=>{y||(y=!0,ls(ct,`RPC '${e}' stream ${i} transport errored. Name:`,N.name,"Message:",N.message),w.u_(new L(M.UNAVAILABLE,"The operation could not be completed")))}),R(p,ns.EventType.MESSAGE,N=>{var O;if(!y){let $=N.data[0];ge(!!$,16349);let K=$,Ee=K?.error||((O=K[0])===null||O===void 0?void 0:O.error);if(Ee){V(ct,`RPC '${e}' stream ${i} received error:`,Ee);let dt=Ee.status,me=function(I){let T=Ve[I];if(T!==void 0)return IR(T)}(dt),D=Ee.message;me===void 0&&(me=M.INTERNAL,D="Unknown error status: "+dt+" with message "+Ee.message),y=!0,w.u_(new L(me,D)),p.close()}else V(ct,`RPC '${e}' stream ${i} received:`,$),w.c_($)}}),R(a,uv.STAT_EVENT,N=>{N.stat===oh.PROXY?V(ct,`RPC '${e}' stream ${i} detected buffering proxy`):N.stat===oh.NOPROXY&&V(ct,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{w.a_()},0),w}};function pv(){return typeof document<"u"?document:null}function nf(t){return new Kv(t,!0)}var Ph=class{constructor(e,n,r=1e3,i=1.5,o=6e4){this.xi=e,this.timerId=n,this.I_=r,this.E_=i,this.d_=o,this.A_=0,this.R_=null,this.V_=Date.now(),this.reset()}reset(){this.A_=0}m_(){this.A_=this.d_}f_(e){this.cancel();let n=Math.floor(this.A_+this.g_()),r=Math.max(0,Date.now()-this.V_),i=Math.max(0,n-r);i>0&&V("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.A_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.R_=this.xi.enqueueAfterDelay(this.timerId,i,()=>(this.V_=Date.now(),e())),this.A_*=this.E_,this.A_<this.I_&&(this.A_=this.I_),this.A_>this.d_&&(this.A_=this.d_)}p_(){this.R_!==null&&(this.R_.skipDelay(),this.R_=null)}cancel(){this.R_!==null&&(this.R_.cancel(),this.R_=null)}g_(){return(Math.random()-.5)*this.A_}};var g0="PersistentStream",xh=class{constructor(e,n,r,i,o,s,a,u){this.xi=e,this.y_=r,this.w_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.S_=0,this.b_=null,this.D_=null,this.stream=null,this.v_=0,this.C_=new Ph(e,n)}F_(){return this.state===1||this.state===5||this.M_()}M_(){return this.state===2||this.state===3}start(){this.v_=0,this.state!==4?this.auth():this.x_()}stop(){return E(this,null,function*(){this.F_()&&(yield this.close(0))})}O_(){this.state=0,this.C_.reset()}N_(){this.M_()&&this.b_===null&&(this.b_=this.xi.enqueueAfterDelay(this.y_,6e4,()=>this.B_()))}L_(e){this.k_(),this.stream.send(e)}B_(){return E(this,null,function*(){if(this.M_())return this.close(0)})}k_(){this.b_&&(this.b_.cancel(),this.b_=null)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}close(e,n){return E(this,null,function*(){this.k_(),this.q_(),this.C_.cancel(),this.S_++,e!==4?this.C_.reset():n&&n.code===M.RESOURCE_EXHAUSTED?(cr(n.toString()),cr("Using maximum backoff delay to prevent overloading the backend."),this.C_.m_()):n&&n.code===M.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.Q_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.i_(n)})}Q_(){}auth(){this.state=1;let e=this.U_(this.S_),n=this.S_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.S_===n&&this.K_(r,i)},r=>{e(()=>{let i=new L(M.UNKNOWN,"Fetching auth token failed: "+r.message);return this.W_(i)})})}K_(e,n){let r=this.U_(this.S_);this.stream=this.G_(e,n),this.stream.e_(()=>{r(()=>this.listener.e_())}),this.stream.n_(()=>{r(()=>(this.state=2,this.D_=this.xi.enqueueAfterDelay(this.w_,1e4,()=>(this.M_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(i=>{r(()=>this.W_(i))}),this.stream.onMessage(i=>{r(()=>++this.v_==1?this.z_(i):this.onNext(i))})}x_(){this.state=5,this.C_.f_(()=>E(this,null,function*(){this.state=0,this.start()}))}W_(e){return V(g0,`close with error: ${e}`),this.stream=null,this.close(4,e)}U_(e){return n=>{this.xi.enqueueAndForget(()=>this.S_===e?n():(V(g0,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},A_=class extends xh{constructor(e,n,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}G_(e,n){return this.connection.T_("Listen",e,n)}z_(e){return this.onNext(e)}onNext(e){this.C_.reset();let n=G$(this.serializer,e),r=function(o){if(!("targetChange"in o))return J.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?J.min():s.readTime?Pn(s.readTime):J.min()}(e);return this.listener.j_(n,r)}H_(e){let n={};n.database=Jv(this.serializer),n.addTarget=function(o,s){let a,u=s.target;if(a=Fv(u)?{documents:Y$(o,u)}:{query:Z$(o,u).gt},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=ER(o,s.resumeToken);let l=Qv(o,s.expectedCount);l!==null&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(J.min())>0){a.readTime=Ch(o,s.snapshotVersion.toTimestamp());let l=Qv(o,s.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=X$(this.serializer,e);r&&(n.labels=r),this.L_(n)}J_(e){let n={};n.database=Jv(this.serializer),n.removeTarget=e,this.L_(n)}},R_=class extends xh{constructor(e,n,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}get Y_(){return this.v_>0}start(){this.lastStreamToken=void 0,super.start()}Q_(){this.Y_&&this.Z_([])}G_(e,n){return this.connection.T_("Write",e,n)}z_(e){return ge(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ge(!e.writeResults||e.writeResults.length===0,55816),this.listener.X_()}onNext(e){ge(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.C_.reset();let n=Q$(e.writeResults,e.commitTime),r=Pn(e.commitTime);return this.listener.ea(r,n)}ta(){let e={};e.database=Jv(this.serializer),this.L_(e)}Z_(e){let n={streamToken:this.lastStreamToken,writes:e.map(r=>K$(this.serializer,r))};this.L_(n)}};var N_=class{},M_=class extends N_{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.na=!1}ra(){if(this.na)throw new L(M.FAILED_PRECONDITION,"The client has already been terminated.")}zo(e,n,r,i){return this.ra(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.zo(e,Yv(n,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new L(M.UNKNOWN,o.toString())})}Yo(e,n,r,i,o){return this.ra(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Yo(e,Yv(n,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new L(M.UNKNOWN,s.toString())})}terminate(){this.na=!0,this.connection.terminate()}},P_=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.ia=0,this.sa=null,this.oa=!0}_a(){this.ia===0&&(this.aa("Unknown"),this.sa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.sa=null,this.ua("Backend didn't respond within 10 seconds."),this.aa("Offline"),Promise.resolve())))}ca(e){this.state==="Online"?this.aa("Unknown"):(this.ia++,this.ia>=1&&(this.la(),this.ua(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.aa("Offline")))}set(e){this.la(),this.ia=0,e==="Online"&&(this.oa=!1),this.aa(e)}aa(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ua(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.oa?(cr(n),this.oa=!1):V("OnlineStateTracker",n)}la(){this.sa!==null&&(this.sa.cancel(),this.sa=null)}};var qi="RemoteStore",x_=class{constructor(e,n,r,i,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.ha=[],this.Pa=new Map,this.Ta=new Set,this.Ia=[],this.Ea=o,this.Ea.No(s=>{r.enqueueAndForget(()=>E(this,null,function*(){Ki(this)&&(V(qi,"Restarting streams for network reachability change."),yield function(u){return E(this,null,function*(){let l=Q(u);l.Ta.add(4),yield jc(l),l.da.set("Unknown"),l.Ta.delete(4),yield rf(l)})}(this))}))}),this.da=new P_(r,i)}};function rf(t){return E(this,null,function*(){if(Ki(t))for(let e of t.Ia)yield e(!0)})}function jc(t){return E(this,null,function*(){for(let e of t.Ia)yield e(!1)})}function MR(t,e){let n=Q(t);n.Pa.has(e.targetId)||(n.Pa.set(e.targetId,e),vI(n)?yI(n):bs(n).M_()&&mI(n,e))}function gI(t,e){let n=Q(t),r=bs(n);n.Pa.delete(e),r.M_()&&PR(n,e),n.Pa.size===0&&(r.M_()?r.N_():Ki(n)&&n.da.set("Unknown"))}function mI(t,e){if(t.Aa.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(J.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}bs(t).H_(e)}function PR(t,e){t.Aa.Ke(e),bs(t).J_(e)}function yI(t){t.Aa=new Gv({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>t.Pa.get(e)||null,Pt:()=>t.datastore.serializer.databaseId}),bs(t).start(),t.da._a()}function vI(t){return Ki(t)&&!bs(t).F_()&&t.Pa.size>0}function Ki(t){return Q(t).Ta.size===0}function xR(t){t.Aa=void 0}function mH(t){return E(this,null,function*(){t.da.set("Online")})}function yH(t){return E(this,null,function*(){t.Pa.forEach((e,n)=>{mI(t,e)})})}function vH(t,e){return E(this,null,function*(){xR(t),vI(t)?(t.da.ca(e),yI(t)):t.da.set("Unknown")})}function _H(t,e,n){return E(this,null,function*(){if(t.da.set("Online"),e instanceof Dh&&e.state===2&&e.cause)try{yield function(i,o){return E(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.Pa.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.Pa.delete(a),i.Aa.removeTarget(a))})}(t,e)}catch(r){V(qi,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield kh(t,r)}else if(e instanceof cs?t.Aa.Xe(e):e instanceof Th?t.Aa.ot(e):t.Aa.nt(e),!n.isEqual(J.min()))try{let r=yield NR(t.localStore);n.compareTo(r)>=0&&(yield function(o,s){let a=o.Aa.It(s);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){let h=o.Pa.get(l);h&&o.Pa.set(l,h.withResumeToken(u.resumeToken,s))}}),a.targetMismatches.forEach((u,l)=>{let h=o.Pa.get(u);if(!h)return;o.Pa.set(u,h.withResumeToken(lt.EMPTY_BYTE_STRING,h.snapshotVersion)),PR(o,u);let p=new Pc(h.target,u,l,h.sequenceNumber);mI(o,p)}),o.remoteSyncer.applyRemoteEvent(a)}(t,n))}catch(r){V(qi,"Failed to raise snapshot:",r),yield kh(t,r)}})}function kh(t,e,n){return E(this,null,function*(){if(!Ds(e))throw e;t.Ta.add(1),yield jc(t),t.da.set("Offline"),n||(n=()=>NR(t.localStore)),t.asyncQueue.enqueueRetryable(()=>E(null,null,function*(){V(qi,"Retrying IndexedDB access"),yield n(),t.Ta.delete(1),yield rf(t)}))})}function kR(t,e){return e().catch(n=>kh(t,n,e))}function of(t){return E(this,null,function*(){let e=Q(t),n=Kr(e),r=e.ha.length>0?e.ha[e.ha.length-1].batchId:oI;for(;IH(e);)try{let i=yield hH(e.localStore,r);if(i===null){e.ha.length===0&&n.N_();break}r=i.batchId,EH(e,i)}catch(i){yield kh(e,i)}OR(e)&&LR(e)})}function IH(t){return Ki(t)&&t.ha.length<10}function EH(t,e){t.ha.push(e);let n=Kr(t);n.M_()&&n.Y_&&n.Z_(e.mutations)}function OR(t){return Ki(t)&&!Kr(t).F_()&&t.ha.length>0}function LR(t){Kr(t).start()}function wH(t){return E(this,null,function*(){Kr(t).ta()})}function TH(t){return E(this,null,function*(){let e=Kr(t);for(let n of t.ha)e.Z_(n.mutations)})}function DH(t,e,n){return E(this,null,function*(){let r=t.ha.shift(),i=Hv.from(r,e,n);yield kR(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield of(t)})}function bH(t,e){return E(this,null,function*(){e&&Kr(t).Y_&&(yield function(r,i){return E(this,null,function*(){if(function(s){return U$(s)&&s!==M.ABORTED}(i.code)){let o=r.ha.shift();Kr(r).O_(),yield kR(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield of(r)}})}(t,e)),OR(t)&&LR(t)})}function m0(t,e){return E(this,null,function*(){let n=Q(t);n.asyncQueue.verifyOperationInProgress(),V(qi,"RemoteStore received new credentials");let r=Ki(n);n.Ta.add(3),yield jc(n),r&&n.da.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.Ta.delete(3),yield rf(n)})}function CH(t,e){return E(this,null,function*(){let n=Q(t);e?(n.Ta.delete(2),yield rf(n)):e||(n.Ta.add(2),yield jc(n),n.da.set("Unknown"))})}function bs(t){return t.Ra||(t.Ra=function(n,r,i){let o=Q(n);return o.ra(),new A_(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{e_:mH.bind(null,t),n_:yH.bind(null,t),i_:vH.bind(null,t),j_:_H.bind(null,t)}),t.Ia.push(e=>E(null,null,function*(){e?(t.Ra.O_(),vI(t)?yI(t):t.da.set("Unknown")):(yield t.Ra.stop(),xR(t))}))),t.Ra}function Kr(t){return t.Va||(t.Va=function(n,r,i){let o=Q(n);return o.ra(),new R_(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{e_:()=>Promise.resolve(),n_:wH.bind(null,t),i_:bH.bind(null,t),X_:TH.bind(null,t),ea:DH.bind(null,t)}),t.Ia.push(e=>E(null,null,function*(){e?(t.Va.O_(),yield of(t)):(yield t.Va.stop(),t.ha.length>0&&(V(qi,`Stopping write stream with ${t.ha.length} pending writes`),t.ha=[]))}))),t.Va}var k_=class t{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new An,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){let s=Date.now()+r,a=new t(e,n,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new L(M.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function _I(t,e){if(cr("AsyncQueue",`${e}: ${t}`),Ds(t))return new L(M.UNAVAILABLE,`${e}: ${t}`);throw t}var Oh=class t{static emptySet(e){return new t(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||H.comparator(n.key,r.key):(n,r)=>H.comparator(n.key,r.key),this.keyedMap=Ec(),this.sortedSet=new Pe(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}};var Lh=class{constructor(){this.ma=new Pe(H.comparator)}track(e){let n=e.doc.key,r=this.ma.get(n);r?e.type!==0&&r.type===3?this.ma=this.ma.insert(n,e):e.type===3&&r.type!==1?this.ma=this.ma.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ma=this.ma.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ma=this.ma.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ma=this.ma.remove(n):e.type===1&&r.type===2?this.ma=this.ma.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ma=this.ma.insert(n,{type:2,doc:e.doc}):z(63341,{Vt:e,fa:r}):this.ma=this.ma.insert(n,e)}ga(){let e=[];return this.ma.inorderTraversal((n,r)=>{e.push(r)}),e}},_s=class t{constructor(e,n,r,i,o,s,a,u,l){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,n,r,i,o){let s=[];return n.forEach(a=>{s.push({type:0,doc:a})}),new t(e,n,Oh.emptySet(n),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ef(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}};var O_=class{constructor(){this.pa=void 0,this.ya=[]}wa(){return this.ya.some(e=>e.Sa())}},L_=class{constructor(){this.queries=y0(),this.onlineState="Unknown",this.ba=new Set}terminate(){(function(n,r){let i=Q(n),o=i.queries;i.queries=y0(),o.forEach((s,a)=>{for(let u of a.ya)u.onError(r)})})(this,new L(M.ABORTED,"Firestore shutting down"))}};function y0(){return new dr(t=>cR(t),ef)}function FR(t,e){return E(this,null,function*(){let n=Q(t),r=3,i=e.query,o=n.queries.get(i);o?!o.wa()&&e.Sa()&&(r=2):(o=new O_,r=e.Sa()?0:1);try{switch(r){case 0:o.pa=yield n.onListen(i,!0);break;case 1:o.pa=yield n.onListen(i,!1);break;case 2:yield n.onFirstRemoteStoreListen(i)}}catch(s){let a=_I(s,`Initialization of query '${is(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,o),o.ya.push(e),e.Da(n.onlineState),o.pa&&e.va(o.pa)&&II(n)})}function VR(t,e){return E(this,null,function*(){let n=Q(t),r=e.query,i=3,o=n.queries.get(r);if(o){let s=o.ya.indexOf(e);s>=0&&(o.ya.splice(s,1),o.ya.length===0?i=e.Sa()?0:1:!o.wa()&&e.Sa()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}})}function SH(t,e){let n=Q(t),r=!1;for(let i of e){let o=i.query,s=n.queries.get(o);if(s){for(let a of s.ya)a.va(i)&&(r=!0);s.pa=i}}r&&II(n)}function AH(t,e,n){let r=Q(t),i=r.queries.get(e);if(i)for(let o of i.ya)o.onError(n);r.queries.delete(e)}function II(t){t.ba.forEach(e=>{e.next()})}var F_,v0;(v0=F_||(F_={})).Ca="default",v0.Cache="cache";var Fh=class{constructor(e,n,r){this.query=e,this.Fa=n,this.Ma=!1,this.xa=null,this.onlineState="Unknown",this.options=r||{}}va(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new _s(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Ma?this.Oa(e)&&(this.Fa.next(e),n=!0):this.Na(e,this.onlineState)&&(this.Ba(e),n=!0),this.xa=e,n}onError(e){this.Fa.error(e)}Da(e){this.onlineState=e;let n=!1;return this.xa&&!this.Ma&&this.Na(this.xa,e)&&(this.Ba(this.xa),n=!0),n}Na(e,n){if(!e.fromCache||!this.Sa())return!0;let r=n!=="Offline";return(!this.options.La||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Oa(e){if(e.docChanges.length>0)return!0;let n=this.xa&&this.xa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}Ba(e){e=_s.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Ma=!0,this.Fa.next(e)}Sa(){return this.options.source!==F_.Cache}};var Vh=class{constructor(e){this.key=e}},jh=class{constructor(e){this.key=e}},V_=class{constructor(e,n){this.query=e,this.Ga=n,this.za=null,this.hasCachedResults=!1,this.current=!1,this.ja=le(),this.mutatedKeys=le(),this.Ha=uR(e),this.Ja=new Oh(this.Ha)}get Ya(){return this.Ga}Za(e,n){let r=n?n.Xa:new Lh,i=n?n.Ja:this.Ja,o=n?n.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{let m=i.get(h),y=tf(this.query,p)?p:null,w=!!m&&this.mutatedKeys.has(m.key),R=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations),N=!1;m&&y?m.data.isEqual(y.data)?w!==R&&(r.track({type:3,doc:y}),N=!0):this.eu(m,y)||(r.track({type:2,doc:y}),N=!0,(u&&this.Ha(y,u)>0||l&&this.Ha(y,l)<0)&&(a=!0)):!m&&y?(r.track({type:0,doc:y}),N=!0):m&&!y&&(r.track({type:1,doc:m}),N=!0,(u||l)&&(a=!0)),N&&(y?(s=s.add(y),o=R?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let h=this.query.limitType==="F"?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{Ja:s,Xa:r,Cs:a,mutatedKeys:o}}eu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){let o=this.Ja;this.Ja=e.Ja,this.mutatedKeys=e.mutatedKeys;let s=e.Xa.ga();s.sort((h,p)=>function(y,w){let R=N=>{switch(N){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return z(20277,{Vt:N})}};return R(y)-R(w)}(h.type,p.type)||this.Ha(h.doc,p.doc)),this.tu(r),i=i!=null&&i;let a=n&&!i?this.nu():[],u=this.ja.size===0&&this.current&&!i?1:0,l=u!==this.za;return this.za=u,s.length!==0||l?{snapshot:new _s(this.query,e.Ja,o,s,e.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),ru:a}:{ru:a}}Da(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ja:this.Ja,Xa:new Lh,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ru:[]}}iu(e){return!this.Ga.has(e)&&!!this.Ja.has(e)&&!this.Ja.get(e).hasLocalMutations}tu(e){e&&(e.addedDocuments.forEach(n=>this.Ga=this.Ga.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ga=this.Ga.delete(n)),this.current=e.current)}nu(){if(!this.current)return[];let e=this.ja;this.ja=le(),this.Ja.forEach(r=>{this.iu(r.key)&&(this.ja=this.ja.add(r.key))});let n=[];return e.forEach(r=>{this.ja.has(r)||n.push(new jh(r))}),this.ja.forEach(r=>{e.has(r)||n.push(new Vh(r))}),n}su(e){this.Ga=e.$s,this.ja=le();let n=this.Za(e.documents);return this.applyChanges(n,!0)}ou(){return _s.fromInitialDocuments(this.query,this.Ja,this.mutatedKeys,this.za===0,this.hasCachedResults)}},EI="SyncEngine",j_=class{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}},U_=class{constructor(e){this.key=e,this._u=!1}},B_=class{constructor(e,n,r,i,o,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.au={},this.uu=new dr(a=>cR(a),ef),this.cu=new Map,this.lu=new Set,this.hu=new Pe(H.comparator),this.Pu=new Map,this.Tu=new kc,this.Iu={},this.Eu=new Map,this.du=xc.lr(),this.onlineState="Unknown",this.Au=void 0}get isPrimaryClient(){return this.Au===!0}};function RH(t,e,n=!0){return E(this,null,function*(){let r=zR(t),i,o=r.uu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.ou()):i=yield jR(r,e,n,!0),i})}function NH(t,e){return E(this,null,function*(){let n=zR(t);yield jR(n,e,!0,!1)})}function jR(t,e,n,r){return E(this,null,function*(){let i=yield fH(t.localStore,Nn(e)),o=i.targetId,s=t.sharedClientState.addLocalQueryTarget(o,n),a;return r&&(a=yield MH(t,e,o,s==="current",i.resumeToken)),t.isPrimaryClient&&n&&MR(t.remoteStore,i),a})}function MH(t,e,n,r,i){return E(this,null,function*(){t.Ru=(p,m,y)=>function(R,N,O,$){return E(this,null,function*(){let K=N.view.Za(O);K.Cs&&(K=yield f0(R.localStore,N.query,!1).then(({documents:D})=>N.view.Za(D,K)));let Ee=$&&$.targetChanges.get(N.targetId),dt=$&&$.targetMismatches.get(N.targetId)!=null,me=N.view.applyChanges(K,R.isPrimaryClient,Ee,dt);return I0(R,N.targetId,me.ru),me.snapshot})}(t,p,m,y);let o=yield f0(t.localStore,e,!0),s=new V_(e,o.$s),a=s.Za(o.documents),u=Mc.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),l=s.applyChanges(a,t.isPrimaryClient,u);I0(t,n,l.ru);let h=new j_(e,n,s);return t.uu.set(e,h),t.cu.has(n)?t.cu.get(n).push(e):t.cu.set(n,[e]),l.snapshot})}function PH(t,e,n){return E(this,null,function*(){let r=Q(t),i=r.uu.get(e),o=r.cu.get(i.targetId);if(o.length>1)return r.cu.set(i.targetId,o.filter(s=>!ef(s,e))),void r.uu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield E_(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&gI(r.remoteStore,i.targetId),$_(r,i.targetId)}).catch(Ts))):($_(r,i.targetId),yield E_(r.localStore,i.targetId,!0))})}function xH(t,e){return E(this,null,function*(){let n=Q(t),r=n.uu.get(e),i=n.cu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),gI(n.remoteStore,r.targetId))})}function kH(t,e,n){return E(this,null,function*(){let r=BH(t);try{let i=yield function(s,a){let u=Q(s),l=Xe.now(),h=a.reduce((y,w)=>y.add(w.key),le()),p,m;return u.persistence.runTransaction("Locally write mutations","readwrite",y=>{let w=hr(),R=le();return u.Bs.getEntries(y,h).next(N=>{w=N,w.forEach((O,$)=>{$.isValidDocument()||(R=R.add(O))})}).next(()=>u.localDocuments.getOverlayedDocuments(y,w)).next(N=>{p=N;let O=[];for(let $ of a){let K=j$($,p.get($.key).overlayedDocument);K!=null&&O.push(new kn($.key,K,tR(K.value.mapValue),Mn.exists(!0)))}return u.mutationQueue.addMutationBatch(y,l,O,a)}).next(N=>{m=N;let O=N.applyToLocalDocumentSet(p,R);return u.documentOverlayCache.saveOverlays(y,N.batchId,O)})}).then(()=>({batchId:m.batchId,changes:dR(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,u){let l=s.Iu[s.currentUser.toKey()];l||(l=new Pe(re)),l=l.insert(a,u),s.Iu[s.currentUser.toKey()]=l}(r,i.batchId,n),yield Uc(r,i.changes),yield of(r.remoteStore)}catch(i){let o=_I(i,"Failed to persist write");n.reject(o)}})}function UR(t,e){return E(this,null,function*(){let n=Q(t);try{let r=yield lH(n.localStore,e);e.targetChanges.forEach((i,o)=>{let s=n.Pu.get(o);s&&(ge(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s._u=!0:i.modifiedDocuments.size>0?ge(s._u,14607):i.removedDocuments.size>0&&(ge(s._u,42227),s._u=!1))}),yield Uc(n,r,e)}catch(r){yield Ts(r)}})}function _0(t,e,n){let r=Q(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let i=[];r.uu.forEach((o,s)=>{let a=s.view.Da(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){let u=Q(s);u.onlineState=a;let l=!1;u.queries.forEach((h,p)=>{for(let m of p.ya)m.Da(a)&&(l=!0)}),l&&II(u)}(r.eventManager,e),i.length&&r.au.j_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function OH(t,e,n){return E(this,null,function*(){let r=Q(t);r.sharedClientState.updateQueryState(e,"rejected",n);let i=r.Pu.get(e),o=i&&i.key;if(o){let s=new Pe(H.comparator);s=s.insert(o,dn.newNoDocument(o,J.min()));let a=le().add(o),u=new wh(J.min(),new Map,new Pe(re),s,a);yield UR(r,u),r.hu=r.hu.remove(o),r.Pu.delete(e),wI(r)}else yield E_(r.localStore,e,!1).then(()=>$_(r,e,n)).catch(Ts)})}function LH(t,e){return E(this,null,function*(){let n=Q(t),r=e.batch.batchId;try{let i=yield uH(n.localStore,e);$R(n,r,null),BR(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield Uc(n,i)}catch(i){yield Ts(i)}})}function FH(t,e,n){return E(this,null,function*(){let r=Q(t);try{let i=yield function(s,a){let u=Q(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return u.mutationQueue.lookupMutationBatch(l,a).next(p=>(ge(p!==null,37113),h=p.keys(),u.mutationQueue.removeMutationBatch(l,p))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,h,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>u.localDocuments.getDocuments(l,h))})}(r.localStore,e);$R(r,e,n),BR(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield Uc(r,i)}catch(i){yield Ts(i)}})}function BR(t,e){(t.Eu.get(e)||[]).forEach(n=>{n.resolve()}),t.Eu.delete(e)}function $R(t,e,n){let r=Q(t),i=r.Iu[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Iu[r.currentUser.toKey()]=i}}function $_(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let r of t.cu.get(e))t.uu.delete(r),n&&t.au.Vu(r,n);t.cu.delete(e),t.isPrimaryClient&&t.Tu.Hr(e).forEach(r=>{t.Tu.containsKey(r)||HR(t,r)})}function HR(t,e){t.lu.delete(e.path.canonicalString());let n=t.hu.get(e);n!==null&&(gI(t.remoteStore,n),t.hu=t.hu.remove(e),t.Pu.delete(n),wI(t))}function I0(t,e,n){for(let r of n)r instanceof Vh?(t.Tu.addReference(r.key,e),VH(t,r)):r instanceof jh?(V(EI,"Document no longer in limbo: "+r.key),t.Tu.removeReference(r.key,e),t.Tu.containsKey(r.key)||HR(t,r.key)):z(19791,{mu:r})}function VH(t,e){let n=e.key,r=n.path.canonicalString();t.hu.get(n)||t.lu.has(r)||(V(EI,"New document in limbo: "+n),t.lu.add(r),wI(t))}function wI(t){for(;t.lu.size>0&&t.hu.size<t.maxConcurrentLimboResolutions;){let e=t.lu.values().next().value;t.lu.delete(e);let n=new H(Ae.fromString(e)),r=t.du.next();t.Pu.set(r,new U_(n)),t.hu=t.hu.insert(n,r),MR(t.remoteStore,new Pc(Nn(Xh(n.path)),r,"TargetPurposeLimboResolution",iI.le))}}function Uc(t,e,n){return E(this,null,function*(){let r=Q(t),i=[],o=[],s=[];r.uu.isEmpty()||(r.uu.forEach((a,u)=>{s.push(r.Ru(u,e,n).then(l=>{var h;if((l||n)&&r.isPrimaryClient){let p=l?!l.fromCache:(h=n?.targetChanges.get(u.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(l){i.push(l);let p=y_.Rs(u.targetId,l);o.push(p)}}))}),yield Promise.all(s),r.au.j_(i),yield function(u,l){return E(this,null,function*(){let h=Q(u);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>P.forEach(l,m=>P.forEach(m.ds,y=>h.persistence.referenceDelegate.addReference(p,m.targetId,y)).next(()=>P.forEach(m.As,y=>h.persistence.referenceDelegate.removeReference(p,m.targetId,y)))))}catch(p){if(!Ds(p))throw p;V(pI,"Failed to update sequence numbers: "+p)}for(let p of l){let m=p.targetId;if(!p.fromCache){let y=h.xs.get(m),w=y.snapshotVersion,R=y.withLastLimboFreeSnapshotVersion(w);h.xs=h.xs.insert(m,R)}}})}(r.localStore,o))})}function jH(t,e){return E(this,null,function*(){let n=Q(t);if(!n.currentUser.isEqual(e)){V(EI,"User change. New user:",e.toKey());let r=yield RR(n.localStore,e);n.currentUser=e,function(o,s){o.Eu.forEach(a=>{a.forEach(u=>{u.reject(new L(M.CANCELLED,s))})}),o.Eu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Uc(n,r.ks)}})}function UH(t,e){let n=Q(t),r=n.Pu.get(e);if(r&&r._u)return le().add(r.key);{let i=le(),o=n.cu.get(e);if(!o)return i;for(let s of o){let a=n.uu.get(s);i=i.unionWith(a.view.Ya)}return i}}function zR(t){let e=Q(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=UR.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=UH.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=OH.bind(null,e),e.au.j_=SH.bind(null,e.eventManager),e.au.Vu=AH.bind(null,e.eventManager),e}function BH(t){let e=Q(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=LH.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=FH.bind(null,e),e}var qR=(()=>{class t{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(n){return E(this,null,function*(){this.serializer=nf(n.databaseInfo.databaseId),this.sharedClientState=this.pu(n),this.persistence=this.yu(n),yield this.persistence.start(),this.localStore=this.wu(n),this.gcScheduler=this.Su(n,this.localStore),this.indexBackfillerScheduler=this.bu(n,this.localStore)})}Su(n,r){return null}bu(n,r){return null}wu(n){return cH(this.persistence,new __,n.initialUser,this.serializer)}yu(n){return new Ah(m_.fi,this.serializer)}pu(n){return new w_}terminate(){return E(this,null,function*(){var n,r;(n=this.gcScheduler)===null||n===void 0||n.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return t.provider={build:()=>new t},t})(),H_=class extends qR{constructor(e){super(),this.cacheSizeBytes=e}Su(e,n){ge(this.persistence.referenceDelegate instanceof Rh,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new r_(r,e.asyncQueue,n)}yu(e){let n=this.cacheSizeBytes!==void 0?qt.withCacheSize(this.cacheSizeBytes):qt.DEFAULT;return new Ah(r=>Rh.fi(r,n),this.serializer)}};var $H=(()=>{class t{initialize(n,r){return E(this,null,function*(){this.localStore||(this.localStore=n.localStore,this.sharedClientState=n.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!n.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>_0(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=jH.bind(null,this.syncEngine),yield CH(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(n){return function(){return new L_}()}createDatastore(n){let r=nf(n.databaseInfo.databaseId),i=function(s){return new S_(s)}(n.databaseInfo);return function(s,a,u,l){return new M_(s,a,u,l)}(n.authCredentials,n.appCheckCredentials,i,r)}createRemoteStore(n){return function(i,o,s,a,u){return new x_(i,o,s,a,u)}(this.localStore,this.datastore,n.asyncQueue,r=>_0(this.syncEngine,r,0),function(){return Mh.C()?new Mh:new T_}())}createSyncEngine(n,r){return function(o,s,a,u,l,h,p){let m=new B_(o,s,a,u,l,h);return p&&(m.Au=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,n.initialUser,n.maxConcurrentLimboResolutions,r)}terminate(){return E(this,null,function*(){var n,r;yield function(o){return E(this,null,function*(){let s=Q(o);V(qi,"RemoteStore shutting down."),s.Ta.add(5),yield jc(s),s.Ea.shutdown(),s.da.set("Unknown")})}(this.remoteStore),(n=this.datastore)===null||n===void 0||n.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return t.provider={build:()=>new t},t})();var Uh=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.vu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.vu(this.observer.error,e):cr("Uncaught Error in snapshot listener:",e.toString()))}Cu(){this.muted=!0}vu(e,n){setTimeout(()=>{this.muted||e(n)},0)}};var Qr="FirestoreClient",z_=class{constructor(e,n,r,i,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Ge.UNAUTHENTICATED,this.clientId=ph.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,s=>E(this,null,function*(){V(Qr,"Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(V(Qr,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new An;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>E(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let r=_I(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function gv(t,e){return E(this,null,function*(){t.asyncQueue.verifyOperationInProgress(),V(Qr,"Initializing OfflineComponentProvider");let n=t.configuration;yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(i=>E(null,null,function*(){r.isEqual(i)||(yield RR(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e})}function E0(t,e){return E(this,null,function*(){t.asyncQueue.verifyOperationInProgress();let n=yield HH(t);V(Qr,"Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>m0(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>m0(e.remoteStore,i)),t._onlineComponents=e})}function HH(t){return E(this,null,function*(){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){V(Qr,"Using user provided OfflineComponentProvider");try{yield gv(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!function(i){return i.name==="FirebaseError"?i.code===M.FAILED_PRECONDITION||i.code===M.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;ls("Error using user provided cache. Falling back to memory cache: "+n),yield gv(t,new qR)}}else V(Qr,"Using default OfflineComponentProvider"),yield gv(t,new H_(void 0));return t._offlineComponents})}function WR(t){return E(this,null,function*(){return t._onlineComponents||(t._uninitializedComponentsProvider?(V(Qr,"Using user provided OnlineComponentProvider"),yield E0(t,t._uninitializedComponentsProvider._online)):(V(Qr,"Using default OnlineComponentProvider"),yield E0(t,new $H))),t._onlineComponents})}function zH(t){return WR(t).then(e=>e.syncEngine)}function q_(t){return E(this,null,function*(){let e=yield WR(t),n=e.eventManager;return n.onListen=RH.bind(null,e.syncEngine),n.onUnlisten=PH.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=NH.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=xH.bind(null,e.syncEngine),n})}function qH(t,e,n={}){let r=new An;return t.asyncQueue.enqueueAndForget(()=>E(null,null,function*(){return function(o,s,a,u,l){let h=new Uh({next:m=>{h.Cu(),s.enqueueAndForget(()=>VR(o,p));let y=m.docs.has(a);!y&&m.fromCache?l.reject(new L(M.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&m.fromCache&&u&&u.source==="server"?l.reject(new L(M.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(m)},error:m=>l.reject(m)}),p=new Fh(Xh(a.path),h,{includeMetadataChanges:!0,La:!0});return FR(o,p)}(yield q_(t),t.asyncQueue,e,n,r)})),r.promise}function GR(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var w0=new Map;function KR(t,e,n){if(!n)throw new L(M.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function WH(t,e,n,r){if(e===!0&&r===!0)throw new L(M.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function T0(t){if(!H.isDocumentKey(t))throw new L(M.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function D0(t){if(H.isDocumentKey(t))throw new L(M.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function sf(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":z(12329,{type:typeof t})}function Gt(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new L(M.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=sf(t);throw new L(M.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}var QR="firestore.googleapis.com",b0=!0,Bh=class{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new L(M.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=QR,this.ssl=b0}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:b0;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=AR;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<oH)throw new L(M.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}WH("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=GR((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new L(M.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new L(M.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new L(M.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Is=class{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Bh({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new L(M.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new L(M.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Bh(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new mv;switch(r.type){case"firstParty":return new Iv(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new L(M.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return E(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){let r=w0.get(n);r&&(V("ComponentProvider","Removing Datastore"),w0.delete(n),r.terminate())}(this),Promise.resolve()}};function YR(t,e,n,r={}){var i;t=Gt(t,Is);let o=Ai(e),s=t._getSettings(),a=Object.assign(Object.assign({},s),{emulatorOptions:t._getEmulatorOptions()}),u=`${e}:${n}`;o&&(Md(`https://${u}`),Pd("Firestore",!0)),s.host!==QR&&s.host!==u&&ls("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let l=Object.assign(Object.assign({},s),{host:u,ssl:o,emulatorOptions:r});if(!an(l,a)&&(t._setSettings(l),r.mockUserToken)){let h,p;if(typeof r.mockUserToken=="string")h=r.mockUserToken,p=Ge.MOCK_USER;else{h=lS(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);let m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new L(M.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new Ge(m)}t._authCredentials=new yv(new hh(h,p))}}var Wi=class t{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},ut=class t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new zr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}},zr=class t extends Wi{constructor(e,n,r){super(e,n,Xh(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new ut(this.firestore,null,new H(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function ZR(t,e,...n){if(t=Fe(t),KR("collection","path",e),t instanceof Is){let r=Ae.fromString(e,...n);return D0(r),new zr(t,null,r)}{if(!(t instanceof ut||t instanceof zr))throw new L(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(Ae.fromString(e,...n));return D0(r),new zr(t.firestore,null,r)}}function TI(t,e,...n){if(t=Fe(t),arguments.length===1&&(e=ph.newId()),KR("doc","path",e),t instanceof Is){let r=Ae.fromString(e,...n);return T0(r),new ut(t,null,new H(r))}{if(!(t instanceof ut||t instanceof zr))throw new L(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(Ae.fromString(e,...n));return T0(r),new ut(t.firestore,t instanceof zr?t.converter:null,new H(r))}}var C0="AsyncQueue",$h=class{constructor(e=Promise.resolve()){this.zu=[],this.ju=!1,this.Hu=[],this.Ju=null,this.Yu=!1,this.Zu=!1,this.Xu=[],this.C_=new Ph(this,"async_queue_retry"),this.ec=()=>{let r=pv();r&&V(C0,"Visibility state changed to "+r.visibilityState),this.C_.p_()},this.tc=e;let n=pv();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.ec)}get isShuttingDown(){return this.ju}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.nc(),this.rc(e)}enterRestrictedMode(e){if(!this.ju){this.ju=!0,this.Zu=e||!1;let n=pv();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.ec)}}enqueue(e){if(this.nc(),this.ju)return new Promise(()=>{});let n=new An;return this.rc(()=>this.ju&&this.Zu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.zu.push(e),this.sc()))}sc(){return E(this,null,function*(){if(this.zu.length!==0){try{yield this.zu[0](),this.zu.shift(),this.C_.reset()}catch(e){if(!Ds(e))throw e;V(C0,"Operation failed with retryable error: "+e)}this.zu.length>0&&this.C_.f_(()=>this.sc())}})}rc(e){let n=this.tc.then(()=>(this.Yu=!0,e().catch(r=>{throw this.Ju=r,this.Yu=!1,cr("INTERNAL UNHANDLED ERROR: ",S0(r)),r}).then(r=>(this.Yu=!1,r))));return this.tc=n,n}enqueueAfterDelay(e,n,r){this.nc(),this.Xu.indexOf(e)>-1&&(n=0);let i=k_.createAndSchedule(this,e,n,r,o=>this.oc(o));return this.Hu.push(i),i}nc(){this.Ju&&z(47125,{_c:S0(this.Ju)})}verifyOperationInProgress(){}ac(){return E(this,null,function*(){let e;do e=this.tc,yield e;while(e!==this.tc)})}uc(e){for(let n of this.Hu)if(n.timerId===e)return!0;return!1}cc(e){return this.ac().then(()=>{this.Hu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this.Hu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.ac()})}lc(e){this.Xu.push(e)}oc(e){let n=this.Hu.indexOf(e);this.Hu.splice(n,1)}};function S0(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}function A0(t){return function(n,r){if(typeof n!="object"||n===null)return!1;let i=n;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(t,["next","error","complete"])}var On=class extends Is{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new $h,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return E(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new $h(e),this._firestoreClient=void 0,yield e}})}};function JR(t,e){let n=typeof t=="object"?t:Ni(),r=typeof t=="string"?t:e||vh,i=Yo(n,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=uS("firestore");o&&YR(i,...o)}return i}function DI(t){if(t._terminated)throw new L(M.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||GH(t),t._firestoreClient}function GH(t){var e,n,r;let i=t._freezeSettings(),o=function(a,u,l,h){return new bv(a,u,l,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,GR(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new z_(t._authCredentials,t._appCheckCredentials,t._queue,o,t._componentsProvider&&function(a){let u=a?._online.build();return{_offline:a?._offline.build(u),_online:u}}(t._componentsProvider))}var Oc=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(lt.fromBase64String(e))}catch(n){throw new L(M.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(lt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var Es=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new L(M.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ft(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Gi=class{constructor(e){this._methodName=e}};var Lc=class{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new L(M.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new L(M.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return re(this._lat,e._lat)||re(this._long,e._long)}};var Fc=class{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}};var KH=/^__.*__$/,W_=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new kn(e,this.data,this.fieldMask,n,this.fieldTransforms):new zi(e,this.data,n,this.fieldTransforms)}},Hh=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new kn(e,this.data,this.fieldMask,n,this.fieldTransforms)}};function XR(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw z(40011,{hc:t})}}var zh=class t{constructor(e,n,r,i,o,s){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Pc(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get hc(){return this.settings.hc}Tc(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ic(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Tc({path:r,Ec:!1});return i.dc(e),i}Ac(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Tc({path:r,Ec:!1});return i.Pc(),i}Rc(e){return this.Tc({path:void 0,Ec:!0})}Vc(e){return Wh(e,this.settings.methodName,this.settings.mc||!1,this.path,this.settings.fc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Pc(){if(this.path)for(let e=0;e<this.path.length;e++)this.dc(this.path.get(e))}dc(e){if(e.length===0)throw this.Vc("Document fields must not be empty");if(XR(this.hc)&&KH.test(e))throw this.Vc('Document fields cannot begin and end with "__"')}},G_=class{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||nf(e)}gc(e,n,r,i=!1){return new zh({hc:e,methodName:n,fc:r,path:Ft.emptyPath(),Ec:!1,mc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function af(t){let e=t._freezeSettings(),n=nf(t._databaseId);return new G_(t._databaseId,!!e.ignoreUndefinedProperties,n)}function eN(t,e,n,r,i,o={}){let s=t.gc(o.merge||o.mergeFields?2:0,e,n,i);bI("Data must be an object, but it was:",s,r);let a=tN(r,s),u,l;if(o.merge)u=new Wt(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let h=[];for(let p of o.mergeFields){let m=Y_(e,p,n);if(!s.contains(m))throw new L(M.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);rN(h,m)||h.push(m)}u=new Wt(h),l=s.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,l=s.fieldTransforms;return new W_(new Lt(a),u,l)}var qh=class t extends Gi{_toFieldTransform(e){if(e.hc!==2)throw e.hc===1?e.Vc(`${this._methodName}() can only appear at the top level of your update data`):e.Vc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof t}};function QH(t,e,n){return new zh({hc:3,fc:e.settings.fc,methodName:t._methodName,Ec:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}var K_=class t extends Gi{_toFieldTransform(e){return new Eh(e.path,new $i)}isEqual(e){return e instanceof t}},Q_=class t extends Gi{constructor(e,n){super(e),this.yc=n}_toFieldTransform(e){let n=QH(this,e,!0),r=this.yc.map(o=>Cs(o,n)),i=new Gr(r);return new Eh(e.path,i)}isEqual(e){return e instanceof t&&an(this.yc,e.yc)}};function YH(t,e,n,r){let i=t.gc(1,e,n);bI("Data must be an object, but it was:",i,r);let o=[],s=Lt.empty();Yr(r,(u,l)=>{let h=CI(e,u,n);l=Fe(l);let p=i.Ac(h);if(l instanceof qh)o.push(h);else{let m=Cs(l,p);m!=null&&(o.push(h),s.set(h,m))}});let a=new Wt(o);return new Hh(s,a,i.fieldTransforms)}function ZH(t,e,n,r,i,o){let s=t.gc(1,e,n),a=[Y_(e,r,n)],u=[i];if(o.length%2!=0)throw new L(M.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<o.length;m+=2)a.push(Y_(e,o[m])),u.push(o[m+1]);let l=[],h=Lt.empty();for(let m=a.length-1;m>=0;--m)if(!rN(l,a[m])){let y=a[m],w=u[m];w=Fe(w);let R=s.Ac(y);if(w instanceof qh)l.push(y);else{let N=Cs(w,R);N!=null&&(l.push(y),h.set(y,N))}}let p=new Wt(l);return new Hh(h,p,s.fieldTransforms)}function JH(t,e,n,r=!1){return Cs(n,t.gc(r?4:3,e))}function Cs(t,e){if(nN(t=Fe(t)))return bI("Unsupported field value:",e,t),tN(t,e);if(t instanceof Gi)return function(r,i){if(!XR(i.hc))throw i.Vc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Vc(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Ec&&e.hc!==4)throw e.Vc("Nested arrays are not supported");return function(r,i){let o=[],s=0;for(let a of r){let u=Cs(a,i.Rc(s));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}}(t,e)}return function(r,i){if((r=Fe(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return k$(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=Xe.fromDate(r);return{timestampValue:Ch(i.serializer,o)}}if(r instanceof Xe){let o=new Xe(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ch(i.serializer,o)}}if(r instanceof Lc)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Oc)return{bytesValue:ER(i.serializer,r._byteString)};if(r instanceof ut){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Vc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:fI(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Fc)return function(s,a){return{mapValue:{fields:{[aI]:{stringValue:cI},[hs]:{arrayValue:{values:s.toArray().map(l=>{if(typeof l!="number")throw a.Vc("VectorValues must only contain numeric values.");return hI(a.serializer,l)})}}}}}}(r,i);throw i.Vc(`Unsupported field value: ${sf(r)}`)}(t,e)}function tN(t,e){let n={};return G0(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Yr(t,(r,i)=>{let o=Cs(i,e.Ic(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function nN(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Xe||t instanceof Lc||t instanceof Oc||t instanceof ut||t instanceof Gi||t instanceof Fc)}function bI(t,e,n){if(!nN(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){let r=sf(n);throw r==="an object"?e.Vc(t+" a custom object"):e.Vc(t+" "+r)}}function Y_(t,e,n){if((e=Fe(e))instanceof Es)return e._internalPath;if(typeof e=="string")return CI(t,e);throw Wh("Field path arguments must be of type string or ",t,!1,void 0,n)}var XH=new RegExp("[~\\*/\\[\\]]");function CI(t,e,n){if(e.search(XH)>=0)throw Wh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Es(...e.split("."))._internalPath}catch{throw Wh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Wh(t,e,n,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new L(M.INVALID_ARGUMENT,a+t+u)}function rN(t,e){return t.some(n=>n.isEqual(e))}var Gh=class{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new ut(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new Z_(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(SI("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},Z_=class extends Gh{data(){return super.data()}};function SI(t,e){return typeof e=="string"?CI(t,e):e instanceof Es?e._internalPath:e._delegate._internalPath}function e4(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new L(M.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Vc=class{},Kh=class extends Vc{};function t4(t,e,...n){let r=[];e instanceof Vc&&r.push(e),r=r.concat(n),function(o){let s=o.filter(u=>u instanceof X_).length,a=o.filter(u=>u instanceof J_).length;if(s>1||s>0&&a>0)throw new L(M.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)t=i._apply(t);return t}var J_=class t extends Kh{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=this._parse(e);return iN(e._query,n),new Wi(e.firestore,e.converter,Vv(e._query,n))}_parse(e){let n=af(e.firestore);return function(o,s,a,u,l,h,p){let m;if(l.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new L(M.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){N0(p,h);let w=[];for(let R of p)w.push(R0(u,o,R));m={arrayValue:{values:w}}}else m=R0(u,o,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||N0(p,h),m=JH(a,s,p,h==="in"||h==="not-in");return Ue.create(l,h,m)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}};var X_=class t extends Vc{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new t(e,n)}_parse(e){let n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:hn.create(n,this._getOperator())}_apply(e){let n=this._parse(e);return n.getFilters().length===0?e:(function(i,o){let s=i,a=o.getFlattenedFilters();for(let u of a)iN(s,u),s=Vv(s,u)}(e._query,n),new Wi(e.firestore,e.converter,Vv(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var eI=class t extends Kh{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new t(e,n)}_apply(e){let n=function(i,o,s){if(i.startAt!==null)throw new L(M.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new L(M.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Bi(o,s)}(e._query,this._field,this._direction);return new Wi(e.firestore,e.converter,function(i,o){let s=i.explicitOrderBy.concat([o]);return new Wr(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}};function n4(t,e="asc"){let n=e,r=SI("orderBy",t);return eI._create(r,n)}function R0(t,e,n){if(typeof(n=Fe(n))=="string"){if(n==="")throw new L(M.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!aR(e)&&n.indexOf("/")!==-1)throw new L(M.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);let r=e.path.child(Ae.fromString(n));if(!H.isDocumentKey(r))throw new L(M.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return KA(t,new H(r))}if(n instanceof ut)return KA(t,n._key);throw new L(M.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${sf(n)}.`)}function N0(t,e){if(!Array.isArray(t)||t.length===0)throw new L(M.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function iN(t,e){let n=function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new L(M.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new L(M.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}var tI=class{convertValue(e,n="none"){switch(qr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ce(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(lr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw z(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let r={};return Yr(e,(i,o)=>{r[i]=this.convertValue(o,n)}),r}convertVectorValue(e){var n,r,i;let o=(i=(r=(n=e.fields)===null||n===void 0?void 0:n[hs].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>Ce(s.doubleValue));return new Fc(o)}convertGeoPoint(e){return new Lc(Ce(e.latitude),Ce(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":let r=Jh(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Ac(e));default:return null}}convertTimestamp(e){let n=ur(e);return new Xe(n.seconds,n.nanos)}convertDocumentKey(e,n){let r=Ae.fromString(e);ge(SR(r),9688,{name:e});let i=new _h(r.get(1),r.get(3)),o=new H(r.popFirst(5));return i.isEqual(n)||cr(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}};function oN(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}var Vi=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Qh=class extends Gh{constructor(e,n,r,i,o,s){super(e,n,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new us(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let r=this._document.data.field(SI("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}},us=class extends Qh{data(e={}){return super.data(e)}},nI=class{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Vi(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new us(this._firestore,this._userDataWriter,r.key,r,new Vi(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new L(M.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let u=new us(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Vi(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let u=new us(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Vi(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,h=-1;return a.type!==0&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),h=s.indexOf(a.doc.key)),{type:r4(a.type),doc:u,oldIndex:l,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function r4(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return z(61501,{type:t})}}function i4(t){t=Gt(t,ut);let e=Gt(t.firestore,On);return qH(DI(e),t._key).then(n=>uN(e,t,n))}var Yh=class extends tI{constructor(e){super(),this.firestore=e}convertBytes(e){return new Oc(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new ut(this.firestore,null,n)}};function sN(t,e,n){t=Gt(t,ut);let r=Gt(t.firestore,On),i=oN(t.converter,e,n);return cf(r,[eN(af(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Mn.none())])}function aN(t,e,n,...r){t=Gt(t,ut);let i=Gt(t.firestore,On),o=af(i),s;return s=typeof(e=Fe(e))=="string"||e instanceof Es?ZH(o,"updateDoc",t._key,e,n,r):YH(o,"updateDoc",t._key,e),cf(i,[s.toMutation(t._key,Mn.exists(!0))])}function o4(t){return cf(Gt(t.firestore,On),[new Nc(t._key,Mn.none())])}function cN(t,e){let n=Gt(t.firestore,On),r=TI(t),i=oN(t.converter,e);return cf(n,[eN(af(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Mn.exists(!1))]).then(()=>r)}function AI(t,...e){var n,r,i;t=Fe(t);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||A0(e[s])||(o=e[s],s++);let a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(A0(e[s])){let p=e[s];e[s]=(n=p.next)===null||n===void 0?void 0:n.bind(p),e[s+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[s+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let u,l,h;if(t instanceof ut)l=Gt(t.firestore,On),h=Xh(t._key.path),u={next:p=>{e[s]&&e[s](uN(l,t,p))},error:e[s+1],complete:e[s+2]};else{let p=Gt(t,Wi);l=Gt(p.firestore,On),h=p._query;let m=new Yh(l);u={next:y=>{e[s]&&e[s](new nI(l,m,p,y))},error:e[s+1],complete:e[s+2]},e4(t._query)}return function(m,y,w,R){let N=new Uh(R),O=new Fh(y,N,w);return m.asyncQueue.enqueueAndForget(()=>E(null,null,function*(){return FR(yield q_(m),O)})),()=>{N.Cu(),m.asyncQueue.enqueueAndForget(()=>E(null,null,function*(){return VR(yield q_(m),O)}))}}(DI(l),h,a,u)}function cf(t,e){return function(r,i){let o=new An;return r.asyncQueue.enqueueAndForget(()=>E(null,null,function*(){return kH(yield zH(r),i,o)})),o.promise}(DI(t),e)}function uN(t,e,n){let r=n.docs.get(e._key),i=new Yh(t);return new Qh(t,i,e._key,r,new Vi(n.hasPendingWrites,n.fromCache),e.converter)}function lY(){return new K_("serverTimestamp")}function dY(...t){return new Q_("arrayUnion",t)}(function(e,n=!0){(function(i){ws=i})(Fr),cn(new yt("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new On(new vv(r.getProvider("auth-internal")),new Ev(s,r.getProvider("app-check-internal")),function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new L(M.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new _h(l.options.projectId,h)}(s,i),s);return o=Object.assign({useFetchStreams:n},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),Me(VA,jA,e),Me(VA,jA,"esm2017")})();var uf=function(){return uf=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},uf.apply(this,arguments)};var c4={includeMetadataChanges:!1};function RI(t,e){return e===void 0&&(e=c4),new ie(function(n){var r=AI(t,e,{next:n.next.bind(n),error:n.error.bind(n),complete:n.complete.bind(n)});return{unsubscribe:r}})}function lN(t){return RI(t,{includeMetadataChanges:!0})}function dN(t,e){return e===void 0&&(e={}),lN(t).pipe(se(function(n){return NI(n,e)}))}function NI(t,e){var n;e===void 0&&(e={});var r=t.data(e);return!t.exists()||typeof r!="object"||r===null||!e.idField?r:uf(uf({},r),(n={},n[e.idField]=t.id,n))}function hN(t){return RI(t,{includeMetadataChanges:!0}).pipe(se(function(e){return e.docs}))}function fN(t,e){return e===void 0&&(e={}),hN(t).pipe(se(function(n){return n.map(function(r){return NI(r,e)})}))}var Bc=class{constructor(e){return e}},pN="firestore",MI=class{constructor(){return Jo(pN)}};var PI=new U("angularfire2.firestore-instances");function u4(t,e){let n=ac(pN,t,e);return n&&new Bc(n)}function l4(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new Bc(r)}}var d4={provide:MI,deps:[[new Ut,PI]]},h4={provide:Bc,useFactory:u4,deps:[[new Ut,PI],nr]};function CZ(t,...e){return Me("angularfire",Vr.full,"fst"),_n([h4,d4,{provide:PI,useFactory:l4(t),multi:!0,deps:[fe,He,jr,Pi,[new Ut,_c],[new Ut,ts],...e]}])}var SZ=vt(fN,!0);var AZ=vt(dN,!0);var RZ=vt(cN,!0,2);var NZ=vt(ZR,!0,2);var MZ=vt(TI,!0,2);var PZ=vt(JR,!0);var xZ=vt(sN,!0,2);var kZ=vt(aN,!0,2);export{F as a,ve as b,f4 as c,p4 as d,E as e,Ye as f,Se as g,q as h,se as i,MM as j,PM as k,Mt as l,j as m,iT as n,B as o,No as p,U as q,x as r,Dl as s,K8 as t,Q8 as u,Ng as v,Tt as w,Ea as x,kg as y,Y8 as z,Z8 as A,Ol as B,Pt as C,ib as D,Oo as E,Lo as F,FO as G,qO as H,ba as I,s1 as J,a1 as K,aW as L,cW as M,uW as N,lW as O,pb as P,gb as Q,rm as R,dW as S,mb as T,hW as U,fW as V,M1 as W,yb as X,pW as Y,gW as Z,mW as _,yW as $,vW as aa,bb as ba,Cb as ca,Qn as da,yL as ea,vL as fa,EL as ga,Kb as ha,FL as ia,Bm as ja,er as ka,_V as la,IV as ma,SV as na,EK as oa,wK as pa,wj as qa,pA as ra,Qy as sa,wA as ta,Jy as ua,vc as va,$Q as wa,HQ as xa,zQ as ya,Xe as za,ZR as Aa,t4 as Ba,n4 as Ca,i4 as Da,sN as Ea,o4 as Fa,lY as Ga,dY as Ha,Bc as Ia,CZ as Ja,SZ as Ka,AZ as La,RZ as Ma,NZ as Na,MZ as Oa,PZ as Pa,xZ as Qa,kZ as Ra};
